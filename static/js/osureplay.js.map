{"version":3,"sources":["../../src/osureplay-es6.js"],"names":[],"mappings":"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","file":"osureplay.js","sourcesContent":["/**\r\n * main.js\r\n * Created by Ugrend on 2/06/2016.\r\n */\r\n\r\nvar DEBUG = true;\r\nvar APIURL = \"https://ugrend.com/osu/api/\";\r\n//var APIURL = \"http://localhost:8080/api/\";\r\n\r\nfunction hidePrototypeWarning() {\r\n    document.getElementById('prototype-warning').className = \"hidden\";\r\n}\r\n\r\n//From http://stackoverflow.com/questions/12710001/how-to-convert-uint8-array-to-base64-encoded-string\r\n//fixes RangeError: Maximum call stack size exceeded on chrome\r\nfunction Uint8ToString(u8a){\r\n    var CHUNK_SZ = 0x8000;\r\n    var c = [];\r\n    for (var i=0; i < u8a.length; i+=CHUNK_SZ) {\r\n        c.push(String.fromCharCode.apply(null, u8a.subarray(i, i+CHUNK_SZ)));\r\n    }\r\n    return c.join(\"\");\r\n}\r\n\r\nvar getParams = function () {\r\n    var queryDict = {};\r\n    //http://stackoverflow.com/questions/5448545/how-to-retrieve-get-parameters-from-javascript\r\n    location.search.substr(1).split(\"&\")\r\n        .forEach(function(item) {\r\n            if(item != \"\"){\r\n                queryDict[item.split(\"=\")[0]] = item.split(\"=\")[1]\r\n            }\r\n\r\n        });\r\n    return queryDict;\r\n};\r\n\r\n\r\nvar base64ToUint8Array = function(base64) {\r\n    var binary_string =  window.atob(base64);\r\n    var len = binary_string.length;\r\n    var bytes = new Uint8Array( len );\r\n    for (var i = 0; i < len; i++)        {\r\n        bytes[i] = binary_string.charCodeAt(i);\r\n    }\r\n    return bytes\r\n};\r\n\r\nvar mainArea = document.getElementById('main_zone');\r\nvar dragDropZone = document.getElementById('dragdrop');\r\nvar dragDropLabel = document.getElementById('drag_label');\r\nvar replay = \"\";\r\nvar beatmap =null;\r\nzip.workerScriptsPath = \"static/libs/js/\";\r\n\r\n//IE FIXES BELOW (I don't know why I care about IE though)\r\nif (!Uint8Array.prototype.slice && 'subarray' in Uint8Array.prototype)\r\n    Uint8Array.prototype.slice = Uint8Array.prototype.subarray;\r\n//https://gist.github.com/hsablonniere/2581101\r\nif (!Element.prototype.scrollIntoViewIfNeeded) {\r\n    Element.prototype.scrollIntoViewIfNeeded = function (centerIfNeeded) {\r\n        centerIfNeeded = arguments.length === 0 ? true : !!centerIfNeeded;\r\n\r\n        var parent = this.parentNode,\r\n            parentComputedStyle = window.getComputedStyle(parent, null),\r\n            parentBorderTopWidth = parseInt(parentComputedStyle.getPropertyValue('border-top-width')),\r\n            parentBorderLeftWidth = parseInt(parentComputedStyle.getPropertyValue('border-left-width')),\r\n            overTop = this.offsetTop - parent.offsetTop < parent.scrollTop,\r\n            overBottom = (this.offsetTop - parent.offsetTop + this.clientHeight - parentBorderTopWidth) > (parent.scrollTop + parent.clientHeight),\r\n            overLeft = this.offsetLeft - parent.offsetLeft < parent.scrollLeft,\r\n            overRight = (this.offsetLeft - parent.offsetLeft + this.clientWidth - parentBorderLeftWidth) > (parent.scrollLeft + parent.clientWidth),\r\n            alignWithTop = overTop && !overBottom;\r\n\r\n        if ((overTop || overBottom) && centerIfNeeded) {\r\n            parent.scrollTop = this.offsetTop - parent.offsetTop - parent.clientHeight / 2 - parentBorderTopWidth + this.clientHeight / 2;\r\n        }\r\n\r\n        if ((overLeft || overRight) && centerIfNeeded) {\r\n            parent.scrollLeft = this.offsetLeft - parent.offsetLeft - parent.clientWidth / 2 - parentBorderLeftWidth + this.clientWidth / 2;\r\n        }\r\n\r\n        if ((overTop || overBottom || overLeft || overRight) && !centerIfNeeded) {\r\n            this.scrollIntoView(alignWithTop);\r\n        }\r\n    };\r\n}\r\n/**\r\n * skins.js\r\n * Created by Ugrend on 4/06/2016.\r\n */\r\nvar osu = osu || {};\r\nosu.skins = {\r\n\r\n    //https://osu.ppy.sh/wiki/Skinning_Standard\r\n    //https://osu.ppy.sh/wiki/Skinning_Interface\r\n\r\n    COMBO_COLOURS: [],\r\n    DEFAULT_COLOURS: [0xFFC000,0x00CA00,0x127CFF,0xF21839],\r\n    loaded: false,\r\n    resources: {\r\n\r\n\r\n    },\r\n    DEFAULT_RESOURCES:[\r\n        //hitbursts\r\n        {name: 'hit300', url: \"resources/hit300.png\"},\r\n        {name: 'hit300g', url: \"resources/hit300g.png\"},\r\n        {name: 'hit300k', url: \"resources/hit300k.png\"},\r\n        {name: 'hit100',  url: \"resources/hit100.png\"},\r\n        {name: 'hit100k', url: \"resources/hit100k.png\"},\r\n        {name: 'hit50', url: \"resources/hit50.png\"},\r\n        {name: 'hit0', url: \"resources/hit0.png\"},\r\n\r\n        //Ranking Grades\r\n        {name: 'ranking_xh',  url:\"resources/ranking-XH.png\"},\r\n        {name: 'ranking_sh',  url:\"resources/ranking-SH.png\"},\r\n        {name: 'ranking_x', url:\"resources/ranking-X.png\"},\r\n        {name: 'ranking_s', url:\"resources/ranking-S.png\"},\r\n        {name: 'ranking_a', url:\"resources/ranking-A.png\"},\r\n        {name: 'ranking_b', url:\"resources/ranking-B.png\"},\r\n        {name: 'ranking_c', url:\"resources/ranking-C.png\"},\r\n        {name: 'ranking_d', url:\"resources/ranking-D.png\"},\r\n        {name: 'ranking_xh_small', url:\"resources/ranking-XH.png\"},\r\n        {name: 'ranking_sh_small', url:\"resources/ranking-SH.png\"},\r\n        {name: 'ranking_x_small', url:\"resources/ranking-X.png\"},\r\n        {name: 'ranking_s_small', url:\"resources/ranking-S.png\"},\r\n        {name: 'ranking_a_small', url:\"resources/ranking-A.png\"},\r\n        {name: 'ranking_b_small', url:\"resources/ranking-B.png\"},\r\n        {name: 'ranking_c_small', url:\"resources/ranking-C.png\"},\r\n        {name: 'ranking_d_small', url:\"resources/ranking-D.png\"},\r\n\r\n\r\n        //Interface\r\n        {name: 'pause_replay', url:\"resources/pause-replay.png\"},\r\n        {name: 'menu_back', url:\"resources/menu-back.png\"},\r\n        {name: 'cursor', url:\"resources/cursor.png\"},\r\n        {name: 'cursortrail', url:\"resources/cursortrail.png\"},\r\n        {name: 'cursormiddle', url:\"resources/cursormiddle.png\"},\r\n        {name: 'cursor_smoke', url:\"resources/cursor-smoke.png\"},\r\n        {name: 'inputoverlay_key', url:\"resources/inputoverlay-key.png\"},\r\n        {name: 'star', url:\"resources/star.png\"},\r\n\r\n        //Playfield\r\n        {name: 'section_fail', url:\"resources/section-fail.png\"},\r\n        {name: 'section_pass', url:\"resources/section-pass.png\"},\r\n        {name: 'play_warningarrow', url:\"resources/play-warningarrow.png\"},\r\n        {name: 'play_skip', url:\"resources/play-skip.png\"},\r\n\r\n        {name: 'hitcircle',  url:\"resources/hitcircle.png\"},\r\n        {name: 'hitcicleoverlay',  url:\"resources/hitcircleoverlay.png\"},\r\n        {name: 'approachcircle',  url:\"resources/approachcircle.png\"},\r\n        {name: 'followpoint',  url:\"resources/followpoint.png\"},\r\n        {name: 'sliderfollowcircle',  url:\"resources/sliderfollowcircle.png\"},\r\n        {name: 'reversearrow',  url:\"resources/reversearrow.png\"},\r\n        {name: 'sliderscorepoint',  url:\"resources/sliderscorepoint.png\"},\r\n        {name: 'sliderb0', url:\"resources/sliderb0.png\"},\r\n\r\n        {name: 'spinner_approachcircle',url:\"resources/spinner-approachcircle.png\"},\r\n        {name: 'spinner_background',url:\"resources/spinner-background.png\"},\r\n        {name: 'spinner_bottom',url:\"resources/spinner-bottom.png\"},\r\n        {name: 'spinner_circle',url:\"resources/spinner-circle.png\"},\r\n        {name: 'spinner_clear',url:\"resources/spinner-clear.png\"},\r\n        {name: 'spinner_glow',url:\"resources/spinner-glow.png\"},\r\n        {name: 'spinner_metre',url:\"resources/spinner-metre.png\"},\r\n        {name: 'spinner_middle',url:\"resources/spinner-middle.png\"},\r\n        {name: 'spinner_middle2',url:\"resources/spinner-middle2.png\"},\r\n        {name: 'spinner_osu',url:\"resources/spinner-osu.png\"},\r\n        {name: 'spinner_rpm',url:\"resources/spinner-rpm.png\"},\r\n        {name: 'spinner_spin',url:\"resources/spinner-spin.png\"},\r\n        {name: 'spinner_top',url:\"resources/spinner-top.png\"},\r\n        {name: 'spinner_warning',url:\"resources/spinner-warning.png\"},\r\n\r\n\r\n\r\n        {name: 'default_0', url:\"resources/default-0.png\"},\r\n        {name: 'default_1', url:\"resources/default-1.png\"},\r\n        {name: 'default_2', url:\"resources/default-2.png\"},\r\n        {name: 'default_3', url:\"resources/default-3.png\"},\r\n        {name: 'default_4', url:\"resources/default-4.png\"},\r\n        {name: 'default_5', url:\"resources/default-5.png\"},\r\n        {name: 'default_6', url:\"resources/default-6.png\"},\r\n        {name: 'default_7', url:\"resources/default-7.png\"},\r\n        {name: 'default_8', url:\"resources/default-8.png\"},\r\n        {name: 'default_9', url:\"resources/default-9.png\"},\r\n        //Mods\r\n\r\n        {name: 'selection_mod_doubletime', url:\"resources/selection-mod-doubletime.png\"},\r\n        {name: 'selection_mod_easy', url:\"resources/selection-mod-easy.png\"},\r\n        {name: 'selection_mod_flashlight', url:\"resources/selection-mod-flashlight.png\"},\r\n        {name: 'selection_mod_halftime', url:\"resources/selection-mod-halftime.png\"},\r\n        {name: 'selection_mod_hardrock', url:\"resources/selection-mod-hardrock.png\"},\r\n        {name: 'selection_mod_hidden', url:\"resources/selection-mod-hidden.png\"},\r\n        {name: 'selection_mod_nightcore', url:\"resources/selection-mod-nightcore.png\"},\r\n        {name: 'selection_mod_nofail', url:\"resources/selection-mod-nofail.png\"},\r\n        {name: 'selection_mod_perfect', url:\"resources/selection-mod-perfect.png\"},\r\n        {name: 'selection_mod_spunout', url:\"resources/selection-mod-spunout.png\"},\r\n        {name: 'selection_mod_suddendeath', url:\"resources/selection-mod-suddendeath.png\"},\r\n\r\n        {name: 'pause_overlay', url:\"resources/pause-overlay.png\"},\r\n        {name: 'pause_continue', url:\"resources/pause-continue.png\"},\r\n        {name: 'pause_back', url:\"resources/pause-back.png\"},\r\n\r\n    ],\r\n\r\n    skins: [],\r\n\r\n    init: function () {\r\n        var self = this;\r\n        this.skins = []; //clear existing skins incase this is a refresh\r\n        database.getAll('skins',function (result) {\r\n            for(var i=0; i < result.length; i++ ){\r\n                self.skins.push({\r\n                    md5sum: result[i].md5sum,\r\n                    name: result[i].name\r\n                });\r\n            }\r\n            var current_skin = {};\r\n            self.COMBO_COLOURS = [];\r\n\r\n\r\n            //clone default then override with custom values\r\n            for(i = 0; i < self.DEFAULT_RESOURCES.length; i++){\r\n                current_skin[self.DEFAULT_RESOURCES[i].name] = self.DEFAULT_RESOURCES[i].url;\r\n            }\r\n            if(osu.settings.SETTINGS.selected_skin != \"0\"){\r\n                database.get_data(database.TABLES.SKINS, osu.settings.SETTINGS.selected_skin,function (data) {\r\n                    if(data.data.colours) {\r\n                        for (i = 0; i < data.data.colours.length; i++) {\r\n                            self.COMBO_COLOURS.push(data.data.colours[i]);\r\n                        }\r\n                    }\r\n                    self._loadAssetsFromIDB(current_skin,data.data.assets,self.loadSkin.bind(self));\r\n                });\r\n            }\r\n            else{\r\n                for(i = 0; i<self.DEFAULT_COLOURS.length;i++){\r\n                    self.COMBO_COLOURS.push(self.DEFAULT_COLOURS[i]);\r\n                }\r\n                self.loadSkin(current_skin);\r\n            }\r\n\r\n        });\r\n    },\r\n    _loadAssetsFromIDB: function (current_skin,assets,cb) {\r\n\r\n        var _length = assets.length;\r\n        var _loaded = 0;\r\n        for(var i = 0; i < _length; i++){\r\n            var fileExt = assets[i].filename.split('.').pop();\r\n            var name = assets[i].filename.split('.')[0].toLowerCase().replace(/-|@/g,\"_\");\r\n            if(fileExt.toLowerCase() == \"png\"){\r\n                (function (name) {\r\n                    database.get_data(database.TABLES.ASSETS,assets[i].md5sum, function (result) {\r\n                        _loaded++;\r\n                        current_skin[name] = result.data;\r\n                        if(_loaded >= _length){\r\n                            cb(current_skin);\r\n                        }\r\n                    }, function () {\r\n                        _loaded++;\r\n                        if(_loaded >= _length){\r\n                            cb(current_skin);\r\n                        }\r\n                    });\r\n                })(name);\r\n            }else if(fileExt.toLowerCase() == \"wav\" || fileExt.toLowerCase() == \"mp3\"){\r\n                (function (name) {\r\n                    database.get_data(database.TABLES.ASSETS,assets[i].md5sum, function (result) {\r\n                        _loaded++;\r\n                        osu.skins.audio[name] = result.data;\r\n                        if(_loaded >= _length){\r\n                            cb(current_skin);\r\n                        }\r\n                    }, function () {\r\n                        _loaded++;\r\n                        if(_loaded >= _length){\r\n                            cb(current_skin);\r\n                        }\r\n                    });\r\n                })(name);\r\n            }\r\n            else{\r\n                _loaded++;\r\n                if(_loaded >= _length){\r\n                    cb(current_skin);\r\n                }\r\n            }\r\n        }\r\n        if(_loaded >= _length){\r\n            cb(current_skin);\r\n        }\r\n\r\n    },\r\n    loadSkin: function (skin) {\r\n        var self = this;\r\n        var skinArray = [];\r\n        for(var k in skin){\r\n            if(skin.hasOwnProperty(k)){\r\n                skinArray.push({\r\n                    name: k,\r\n                    url: skin[k]\r\n                });\r\n            }\r\n\r\n        }\r\n        var loader = new PIXI.loaders.Loader();\r\n        loader.add(skinArray).on(\"progress\",self.loadProgressHandler.bind(self)).load(self._loaded.bind(self));\r\n    },\r\n\r\n    loadProgressHandler: function (loader, resources) {\r\n       if(resources.name == \"ranking-sh\"){\r\n           console.log(resources);\r\n       }\r\n    },\r\n\r\n    onloaded: function () {\r\n\r\n    },\r\n\r\n    _loaded: function (loader, resources) {\r\n        this.resources = resources;\r\n        event_handler.emit(event_handler.EVENTS.RESOURCES_LOADED);\r\n        this.loaded = true;\r\n        osu.skins.onloaded();\r\n        osu.audio.sound.init();\r\n        //quick hack to prevent skin changing doing weird things.\r\n        osu.skins.onloaded = function () {\r\n\r\n        };\r\n    },\r\n    //AUDIO\r\n\r\n    audio: {\r\n        applause: 'resources/applause.wav',\r\n        combobreak: 'resources/combobreak.wav',\r\n        count1s: 'resources/count1s.wav',\r\n        count2s: 'resources/count2s.wav',\r\n        count3s: 'resources/count3s.wav',\r\n        drum_hitclap: 'resources/drum-hitclap.wav',\r\n        drum_hitfinish: 'resources/drum-hitfinish.wav',\r\n        drum_hitfinish2: 'resources/drum-hitfinish2.wav',\r\n        drum_hitnormal: 'resources/drum-hitnormal.wav',\r\n        drum_hitnormal19: 'resources/drum-hitnormal19.wav',\r\n        drum_hitnormal2: 'resources/drum-hitnormal2.wav',\r\n        drum_hitwhistle: 'resources/drum-hitwhistle.wav',\r\n        drum_sliderslide: 'resources/drum-sliderslide.wav',\r\n        drum_slidertick: 'resources/drum-slidertick.wav',\r\n        drum_sliderwhistle: 'resources/drum-sliderwhistle.wav',\r\n        failsound: 'resources/failsound.wav',\r\n        gos: 'resources/gos.wav',\r\n        menuback: 'resources/menuback.wav',\r\n        menuclick: 'resources/menuclick.wav',\r\n        menuhit: 'resources/menuhit.wav',\r\n        normal_hitclap: 'resources/normal-hitclap.wav',\r\n        normal_hitfinish: 'resources/normal-hitfinish.wav',\r\n        normal_hitnormal: 'resources/normal-hitnormal.wav',\r\n        normal_hitwhistle: 'resources/normal-hitwhistle.wav',\r\n        normal_sliderslide: 'resources/normal-sliderslide.wav',\r\n        normal_slidertick: 'resources/normal-slidertick.wav',\r\n        normal_sliderwhistle: 'resources/normal-sliderwhistle.wav',\r\n        readys: 'resources/readys.wav',\r\n        sectionfail: 'resources/sectionfail.wav',\r\n        sectionpass: 'resources/sectionpass.wav',\r\n        shutter: 'resources/shutter.wav',\r\n        soft_hitclap: 'resources/soft-hitclap.wav',\r\n        soft_hitclap19: 'resources/soft-hitclap19.wav',\r\n        soft_hitfinish: 'resources/soft-hitfinish.wav',\r\n        soft_hitnormal: 'resources/soft-hitnormal.wav',\r\n        soft_hitwhistle: 'resources/soft-hitwhistle.wav',\r\n        soft_sliderslide: 'resources/soft-sliderslide.wav',\r\n        soft_sliderslide2: 'resources/soft-sliderslide2.wav',\r\n        soft_slidertick: 'resources/soft-slidertick.wav',\r\n        soft_sliderwhistle: 'resources/soft-sliderwhistle.wav',\r\n        spinnerbonus: 'resources/spinnerbonus.wav',\r\n        spinner_osu: 'resources/spinner-osu.wav',\r\n        spinnerspin: 'resources/spinnerspin.wav',\r\n\r\n\r\n    }\r\n\r\n\r\n};\r\n/**\r\n * replay_details.js\r\n * Created by Ugrend on 6/2/2016.\r\n */\r\n\r\n/*\r\nJust adding this for testing will prob remove\r\n\r\n */\r\n\r\nfunction loadBeatMap(){\r\n\r\n    database.get_data(database.TABLES.BEATMAPS,replay.bmMd5Hash, function(e){\r\n\r\n        if(typeof e.data != 'undefined'){\r\n            osu.beatmaps.BeatmapLoader.load(replay.bmMd5Hash, showReplayData);\r\n        }else{\r\n            var loading =   new PNotify({\r\n                title: 'Downloading Beatmap',\r\n                text: \"Loading \\n\" + replay.bmMd5Hash,\r\n                type: 'info',\r\n                hide: false\r\n            });\r\n            osu.webapi.beatmaps.loadBeatMap(replay.bmMd5Hash, function (e) {\r\n                loading.remove();\r\n                osu.beatmaps.BeatmapLoader.load(replay.bmMd5Hash, showReplayData);\r\n            })\r\n        }\r\n\r\n\r\n    });\r\n\r\n\r\n}\r\n\r\n\r\nfunction showReplayData(beatmap){\r\n    osu.ui.interface.mainscreen.hide_main_screen();\r\n    osu.ui.interface.scorescreen.mods = replay.mods;\r\n    beatmap.been_rendered = false;\r\n    osu.ui.interface.scorescreen.beatmap = beatmap;\r\n    osu.ui.interface.scorescreen.played_by = replay.playerName;\r\n    osu.ui.interface.scorescreen.date_played = replay.time_played;\r\n    osu.ui.interface.scorescreen.total_score = replay.tScore;\r\n    osu.ui.interface.scorescreen.t300Hits = replay.h300;\r\n    osu.ui.interface.scorescreen.t300gHits = replay.hGekis;\r\n    osu.ui.interface.scorescreen.t100Hits = replay.h100;\r\n    osu.ui.interface.scorescreen.t100kHits = replay.hKatus;\r\n    osu.ui.interface.scorescreen.t50Hits = replay.h50;\r\n    osu.ui.interface.scorescreen.tMissHits = replay.hMisses ;\r\n    osu.ui.interface.scorescreen.maxCombo = replay.tCombo;\r\n    osu.ui.interface.scorescreen.grade = replay.grade;\r\n    osu.ui.interface.scorescreen.accuracy = replay.accuracy;\r\n    setTimeout(function () {\r\n        document.getElementById(\"render_zone\").className = \"\";\r\n        osu.ui.interface.scorescreen.renderScoreScreen();\r\n    }, 500);\r\n}\r\n/**\r\n * render.js\r\n * Created by Ugrend on 4/06/2016.\r\n */\r\n\r\n\r\nvar osu = osu || {};\r\nosu.ui = osu.ui || {};\r\nosu.ui.renderer = {\r\n\r\n\r\n\r\n    renderWidth: window.innerWidth,\r\n    renderHeight: window.innerHeight,\r\n    renderer: null,\r\n    masterStage: new PIXI.Container(),\r\n    render_zone: document.getElementById(\"render_zone\"),\r\n    fixed_aspect: false,\r\n\r\n\r\n    /**\r\n     *\r\n     * @param child add to renderer stage\r\n     */\r\n    addChild: function(child){\r\n        this.masterStage.addChild(child);\r\n    },\r\n    removeChild: function(child){\r\n        this.masterStage.removeChild(child);\r\n    },\r\n\r\n    clearStage: function(){\r\n        this.masterStage.removeChildren();\r\n    },\r\n    animate: function () {\r\n        event_handler.emit(event_handler.EVENTS.RENDER);\r\n        this.renderer.render(this.masterStage);\r\n        requestAnimationFrame(this.animate.bind(this));\r\n    },\r\n    resize: function(){\r\n        var x = window.innerWidth;\r\n        var y = window.innerHeight;\r\n\r\n        //just to make my life easier fix the render ratio for game play\r\n        if(this.fixed_aspect && false) {\r\n            var fixed_ratio_y = (3 / 4) * x;\r\n            var fixed_ratio_x = (4 / 3) * y;\r\n\r\n            if (fixed_ratio_y > y) {\r\n                //if we increasing y bigger than the screen we need to make x smaller\r\n                x = fixed_ratio_x;\r\n            }\r\n            else {\r\n                y = fixed_ratio_y;\r\n            }\r\n        }\r\n        this.renderWidth =  x;\r\n        this.renderHeight = y;\r\n        if(this.renderer != null) {\r\n            this.renderer.view.style.width = this.renderWidth + 'px';\r\n            this.renderer.view.style.height = this.renderHeight + 'px';\r\n        }\r\n    },\r\n    start: function () {\r\n        this.resize();\r\n        if(this.renderer == null) {\r\n            this.renderer = PIXI.autoDetectRenderer(this.renderWidth, this.renderHeight);\r\n            this.render_zone.appendChild(this.renderer.view);\r\n            this.animate();\r\n            window.onresize = this.resize.bind(this);\r\n        }else{\r\n            console.log(\"renderer already started resizing instead\");\r\n            this.renderer.width =  this.renderWidth;\r\n            this.renderer.height = this.renderHeight;\r\n            this.renderer.view.width = this.renderWidth;\r\n            this.renderer.view.height = this.renderHeight;\r\n        }\r\n\r\n    },\r\n    hide: function () {\r\n        this.render_zone.innerHTML = \"\";\r\n    },\r\n    show: function(){\r\n        this.render_zone.appendChild(this.renderer.view);\r\n    }\r\n};\r\n\r\n\r\n\r\n/**\r\n *\r\n * replay_control.js\r\n * Created by Ugrend on 18/11/2016.\r\n *\r\n * For pausing/playing/positioning of replay\r\n */\r\n\r\nvar osu = osu || {};\r\nosu.ui = osu.ui || {};\r\nosu.ui.interface = osu.ui.interface || {};\r\nosu.ui.interface.replaycontroller = {\r\n\r\n\r\n    __$controlBar: $(\"#replay_control_zone\"),\r\n    __$togglePlayButton: $(\"#toggle_play_replay\"),\r\n    __$progressBar: $(\"#replay_progress\"),\r\n    __$volume: $(\"#replay_master_volume\"),\r\n    __$configButton: $(\"#open_config_button\"),\r\n    __$replayCurTime: $(\"#replay_current_time\"),\r\n    __$replayDuration: $(\"#replay_duration\"),\r\n    __eventsBound: false,\r\n    __ignoreUpdates: false,\r\n    _currentDuration: 0,\r\n    _currentPosition: 0,\r\n\r\n    showBar: function () {\r\n            this.__$controlBar.slideDown();\r\n    },\r\n    hideBar: function () {\r\n        this.__$controlBar.slideUp();\r\n    },\r\n\r\n    convertMs: function (t) {\r\n;\r\n        var seconds = parseInt((t/1000)%60);\r\n        var minutes = parseInt((t/(1000*60))%60);\r\n        var hours = parseInt((t/(1000*60*60))%24);\r\n\r\n        hours = (hours < 10) ? \"0\" + hours : hours;\r\n        minutes = (minutes < 10) ? \"0\" + minutes : minutes;\r\n        seconds = (seconds < 10) ? \"0\" + seconds : seconds;\r\n        return (hours > 0) ? hours + \":\" + minutes + \":\" + seconds  : minutes + \":\" + seconds;\r\n\r\n    },\r\n\r\n    set_duration: function(t){\r\n        this.__$replayDuration.text(this.convertMs(t));\r\n        this.__$progressBar.prop({max: t});\r\n    },\r\n\r\n    set_position: function (t) {\r\n        if(!this.__ignoreUpdates){\r\n            this.__$progressBar.val(t);\r\n        }\r\n\r\n        this.__$replayCurTime.text(this.convertMs(t));\r\n    },\r\n\r\n    __setVolume: function () {\r\n        this.__$volume.val(osu.settings.SETTINGS.master_volume * 100);\r\n    },\r\n\r\n    showPauseIcon: function () {\r\n        this.__$togglePlayButton.prop({src: 'data/player-pause-icon.png'})\r\n    },\r\n    showPlayIcon: function () {\r\n        this.__$togglePlayButton.prop({src: 'data/player-play-icon.png'})\r\n    },\r\n\r\n    disable_progressbar: function () {\r\n        this.__$progressBar.prop('disabled', true)\r\n\r\n    },\r\n    enable_progressbar: function () {\r\n        this.__$progressBar.prop('disabled', false)\r\n    },\r\n\r\n\r\n    bindEvents: function () {\r\n\r\n        if(!this.__eventsBound){\r\n            var self = this;\r\n            this.__setVolume();\r\n            this.__$togglePlayButton.on('click', function () {\r\n               if(osu.ui.interface.scorescreen.replayStarted){\r\n                   osu.ui.interface.osugame.toggle_pause();\r\n               }else{\r\n                   osu.ui.interface.scorescreen.start_replay();\r\n               }\r\n\r\n\r\n            });\r\n            event_handler.on(event_handler.EVENTS.SETTINGS_CHANGED, this.__setVolume.bind(this));\r\n            this.__$volume.on('input', function () {\r\n                osu.settings.SETTINGS.master_volume = self.__$volume.val() /100;\r\n            });\r\n            this.__$progressBar.on('input', function () {\r\n               osu.ui.interface.osugame.go_to(self.__$progressBar.val());\r\n            });\r\n\r\n            this.__$configButton.on('click', function () {\r\n                osu.ui.interface.osugame.toggle_settings();\r\n            });\r\n\r\n            this.__eventsBound = true;\r\n        }\r\n\r\n\r\n    }\r\n\r\n};\r\n\r\n\r\n/**\r\n * eventhandler.js\r\n * Created by Ugrend on 10/06/2016.\r\n */\r\nvar event_handler = {\r\n\r\n    EVENTS: Object.freeze({\r\n        BEATMAP_LOADING: 1,\r\n        BEATMAP_LOADED: 2,\r\n        BEATMAP_LOADING_FAILED: 3,\r\n        REPLAY_LOADING: 4,\r\n        REPLAY_LOADED: 5,\r\n        REPLAY_LOAD_FAILED:6,\r\n        BEATMAP_NOTFOUND: 7,\r\n        DB_ERROR: 8,\r\n        ASSET_NOT_FOUND:9,\r\n        RENDER:10,\r\n        UNKNOWN_FILE_ERROR:11,\r\n        INVALID_FILE: 12,\r\n        BEATMAP_SELECTED: 13,\r\n        STOP_REPLAY: 14,\r\n        SETTINGS_CHANGED: 15,\r\n        SKIN_LOADING: 16,\r\n        SKIN_LOADED: 17,\r\n        SKIN_LOADING_FAILED: 18,\r\n        RESOURCES_LOADING: 19,\r\n        RESOURCES_LOADED: 20\r\n    }),\r\n\r\n    __events: {},\r\n    on: function (eventName, fn, alias, parent_object) {\r\n        this.__events[eventName] = this.__events[eventName] || [];\r\n        this.__events[eventName].push({fn: fn, alias: alias, parent: parent_object});\r\n    },\r\n    off: function (eventName, alias,fn) {\r\n        if (this.__events[eventName]) {\r\n            for (var i = 0; i < this.__events[eventName].length; i++) {\r\n                if (this.__events[eventName][i].fn === fn) {\r\n                    this.__events[eventName].splice(i, 1);\r\n                    break;\r\n                }\r\n                if(this.__events[eventName][i].alias == alias){\r\n                    this.__events[eventName].splice(i,1);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    },\r\n    emit: function (eventName, data) {\r\n        if(DEBUG && eventName != event_handler.EVENTS.RENDER){\r\n            console.log(\"EVENT: \" + eventName);\r\n            console.log(data);\r\n        }\r\n        if (this.__events[eventName]) {\r\n            this.__events[eventName].forEach(function (obj) {\r\n                if (obj.parent) {\r\n                    obj.parent[obj.fn](data);\r\n                } else {\r\n                    obj.fn(data);\r\n                }\r\n\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\n\r\n\r\nevent_handler.on(event_handler.EVENTS.SKIN_LOADING, function (data) {\r\n    var loading =   new PNotify({\r\n        title: 'Loading skin',\r\n        text: \"Loading \\n\" + data,\r\n        type: 'info',\r\n        hide: 'false'\r\n    });\r\n    var alias = Date.now().toString();\r\n    event_handler.on(event_handler.EVENTS.SKIN_LOADED, function (data_loaded) {\r\n        var options = {\r\n            type: \"success\",\r\n            title: \"Skin Loaded\",\r\n            text: data_loaded.name + \"\\n has been successfully processed\",\r\n            hide: \"true\"\r\n        };\r\n        loading.update(options);\r\n        //one time only event\r\n        event_handler.off(event_handler.EVENTS.SKIN_LOADED, alias);\r\n    }, alias);\r\n});\r\n\r\n\r\nevent_handler.on(event_handler.EVENTS.BEATMAP_LOADING, function (data) {\r\n    var loading =   new PNotify({\r\n        title: 'Loading beatmap',\r\n        text: \"Loading \\n\" + data,\r\n        type: 'info',\r\n        hide: 'false'\r\n    });\r\n    var alias = Date.now().toString();\r\n    event_handler.on(event_handler.EVENTS.BEATMAP_LOADED, function (data_loaded) {\r\n        var options = {\r\n            type: \"success\",\r\n            title: \"Beatmap Loaded\",\r\n            text: data_loaded.filename + \"\\n has been successfully processed\",\r\n            hide: \"true\"\r\n        };\r\n        loading.update(options);\r\n        //one time only event\r\n        event_handler.off(event_handler.EVENTS.BEATMAP_LOADED, alias);\r\n    }, alias);\r\n});\r\n\r\n\r\nevent_handler.on(event_handler.EVENTS.BEATMAP_LOADING_FAILED, function (data) {\r\n    PNotify.removeAll();\r\n    new PNotify({\r\n        title: 'Beatmap Loading Failed',\r\n        text: \"Failed to load beatmap: \" + data,\r\n        type: 'error'\r\n    });\r\n});\r\n\r\nevent_handler.on(event_handler.EVENTS.BEATMAP_LOADING_FAILED, function (data) {\r\n    new PNotify({\r\n        title: 'Beatmap Loading Failed',\r\n        text: \"Failed to load beatmap: \" + data,\r\n        type: 'error'\r\n    });\r\n});\r\n\r\nevent_handler.on(event_handler.EVENTS.BEATMAP_NOTFOUND, function (data) {\r\n    new PNotify({\r\n        title: 'Beatmap not found',\r\n        text: \"Beatmap not found for replay, \\n beatmap md5sum:\\n\" + data,\r\n        type: 'error'\r\n    });\r\n});\r\n/**\r\n * beatmap_reader.js\r\n * Created by Ugrend on 6/06/2016.\r\n */\r\n\r\n\r\n/**\r\n * Converts osu data/beatmap config file into a JS object\r\n * @param data\r\n * @returns {{version: string, general: {}, metadata: {}, difficulty: {}, events: Array, timing_points: Array, colours: {}, hit_objects: Array}}\r\n */\r\nvar parse_osu_map_data = function (data) {\r\n    var beatmap_config = {\r\n        version: \"\",\r\n        name: \"\",\r\n        general: {},\r\n        metadata: {},\r\n        difficulty: {},\r\n        events: [],\r\n        timing_points: [],\r\n        colours: {},\r\n        hit_objects: [],\r\n        minBPM: -1,\r\n        maxBPM: -1,\r\n        circles: 0,\r\n        sliders: 0,\r\n        spinners: 0,\r\n        time_length: 0,\r\n    };\r\n    var lines = data.replace(\"\\r\", \"\").split(\"\\n\");\r\n    beatmap_config.version = lines[0];\r\n    var current_setting = null;\r\n    var parentBPMS = 500;\r\n    for (var i = 0; i < lines.length; i++) {\r\n        var line = lines[i].trim();\r\n        if (line === \"\") {\r\n            continue;\r\n        }\r\n        if (line.indexOf(\"//\") == 0) {\r\n            continue;\r\n        }\r\n        if (line.indexOf(\"[\") == 0) {\r\n            current_setting = line.toLowerCase();\r\n            continue;\r\n        }\r\n        switch (current_setting) {\r\n            case \"[general]\":\r\n                var settings = line.split(\":\");\r\n                if (settings.length == 2) {\r\n                    beatmap_config.general[settings[0]] = settings[1].trim();\r\n                }\r\n                break;\r\n            case \"[editor]\":\r\n                break;\r\n            case \"[metadata]\":\r\n                var settings = line.split(\":\");\r\n                if (settings.length > 1) {\r\n                    // Im not sure if title/creator/etc can have : in them but just to be safe ill assume it can\r\n                    beatmap_config.metadata[settings[0]] = settings.splice(1).join(\":\").trim()\r\n                }\r\n                break;\r\n            case \"[difficulty]\":\r\n                var settings = line.split(\":\");\r\n                if (settings.length == 2) {\r\n                    beatmap_config.difficulty[settings[0]] = parseFloat(settings[1]);\r\n                }\r\n                break;\r\n            case \"[events]\":\r\n                beatmap_config.events.push(line.split(\",\"));\r\n                break;\r\n            case \"[timingpoints]\":\r\n                var parts = line.split(\",\");\r\n\r\n                var timingPoint = {\r\n                    offset: +parts[0],\r\n                    millisecondsPerBeat: +parts[1],\r\n                    meter: +parts[2],\r\n                    sampleType: +parts[3],\r\n                    sampleSet: +parts[4],\r\n                    volume: +parts[5],\r\n                    inherited: +parts[6],\r\n                    kaiMode: +parts[7]\r\n                };\r\n\r\n                if(timingPoint.inherited == 1){\r\n                    parentBPMS = timingPoint.millisecondsPerBeat;\r\n                    if(parentBPMS < beatmap_config.minBPM || beatmap_config.minBPM === -1){\r\n                        if(beatmap_config.minBPM > beatmap_config.maxBPM){\r\n                            beatmap_config.maxBPM = beatmap_config.minBPM;\r\n                        }\r\n                        beatmap_config.minBPM = parentBPMS;\r\n                    }\r\n                }\r\n                else{\r\n                    //if inherited and postive we should ignore and multiply by 1\r\n                    //You cant do this in the editor so shouldnt happen, but this is how the game seems to handle it.\r\n                    if(timingPoint.millisecondsPerBeat >= 0){\r\n                        timingPoint.millisecondsPerBeat = parentBPMS;\r\n                    }\r\n                    else{\r\n                        var multiplier = Math.abs(100/timingPoint.millisecondsPerBeat);\r\n                        timingPoint.millisecondsPerBeat = parentBPMS / multiplier;\r\n                    }\r\n                }\r\n                beatmap_config.minBPM = Math.round(60000 / beatmap_config.minBPM);\r\n                if(beatmap_config.maxBPM !=-1) beatmap_config.maxBPM = Math.round(60000 / beatmap_config.maxBPM);\r\n\r\n                beatmap_config.timing_points.push(timingPoint);\r\n                break;\r\n            case \"[colours]\":\r\n                var settings = line.split(\":\");\r\n                if (settings.length == 2) {\r\n                    beatmap_config.colours[settings[0]] = settings[1].split(\",\");\r\n                }\r\n                break;\r\n            case \"[hitobjects]\":\r\n                var hit_object = osu.objects.HitObjectParser.parse_line(line, beatmap_config.timing_points, beatmap_config.difficulty.SliderMultiplier || 1);\r\n                switch(hit_object.type) {\r\n                    case osu.objects.HitObjectParser.TYPES.CIRCLE:\r\n                        beatmap_config.circles++;\r\n                        break;\r\n                    case osu.objects.HitObjectParser.TYPES.SLIDER:\r\n                        beatmap_config.sliders++;\r\n                        break;\r\n                    case osu.objects.HitObjectParser.TYPES.SPINNER:\r\n                        beatmap_config.spinners++;\r\n                }\r\n                beatmap_config.hit_objects.push(hit_object);\r\n                break;\r\n\r\n        }\r\n\r\n\r\n    }\r\n    var lastHitObject = beatmap_config.hit_objects[beatmap_config.hit_objects.length-1];\r\n    beatmap_config.time_length = lastHitObject.endTime || lastHitObject.startTime;\r\n    return beatmap_config;\r\n};\r\n\r\n\r\n\r\nvar BeatmapReader = function (beatmap_zip_file, callback) {\r\n    var beatMap = {\r\n        maps: [],\r\n        assets: []\r\n    };\r\n    var md5sums = [];\r\n    event_handler.emit(event_handler.EVENTS.BEATMAP_LOADING, beatmap_zip_file.name);\r\n    var zip_length = 0;\r\n    var extracted = 0;\r\n    var beatmaps = 0;\r\n    var beatmaps_loaded = 0;\r\n\r\n\r\n\r\n    var beatmap_loaded = function () {\r\n        if (beatmaps_loaded == beatmaps) {\r\n\r\n\r\n            event_handler.emit(event_handler.EVENTS.BEATMAP_LOADED, {md5sums: md5sums, filename: beatmap_zip_file.name});\r\n            callback(beatMap);\r\n        }\r\n    };\r\n\r\n    var create_thumbnail = function (img_data) {\r\n        var MAX_WIDTH = 232;\r\n        var MAX_HEIGHT = 130;\r\n        var canvas = document.createElement(\"canvas\");\r\n        var img = document.createElement(\"img\");\r\n        img.src = img_data;\r\n        var width = img.width;\r\n        var height = img.height;\r\n        if (width > height) {\r\n            if (width > MAX_WIDTH) {\r\n                height *= MAX_WIDTH / width;\r\n                width = MAX_WIDTH;\r\n            }\r\n        } else {\r\n            if (height > MAX_HEIGHT) {\r\n                width *= MAX_HEIGHT / height;\r\n                height = MAX_HEIGHT;\r\n            }\r\n        }\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n        var ctx = canvas.getContext(\"2d\");\r\n        ctx.drawImage(img, 0, 0, width, height);\r\n        return canvas.toDataURL(\"image/jpeg\");\r\n    };\r\n\r\n    var processing_complete = function () {\r\n        if (extracted == zip_length) {\r\n\r\n            beatmaps = beatMap.maps.length;\r\n            for (var i = 0; i < beatMap.maps.length; i++) {\r\n                var beatmap = beatMap.maps[i];\r\n\r\n                beatmap.parsed = parse_osu_map_data(beatmap.data);\r\n                for (var k in beatmap.parsed.metadata) {\r\n                    beatmap[k.toLocaleLowerCase()] = beatmap.parsed.metadata[k];\r\n                }\r\n                beatmap.files = [];\r\n                var background_file_name = beatmap.parsed.events[0][2].replace(/\"/g, '');\r\n                var thumbnail = \"\";\r\n                for (var x = 0; x < beatMap.assets.length; x++) {\r\n                    if (beatMap.assets[x].filename == background_file_name) {\r\n                        beatmap.files.push(\r\n                            {\r\n                                md5sum: beatMap.assets[x].md5sum,\r\n                                filename: beatMap.assets[x].filename\r\n                            }\r\n                        );\r\n                        //i know this is async but im hoping it shouldn't cause problems also duplicate insertions wont break anything\r\n                        database.insert_data(database.TABLES.ASSETS, beatMap.assets[x].md5sum, beatMap.assets[x].data);\r\n                        beatmap.background = beatMap.assets[x].md5sum;\r\n                        thumbnail = create_thumbnail(beatMap.assets[x].data);\r\n                    }\r\n                    if(beatMap.assets[x].filename == beatmap.parsed.general.AudioFilename){\r\n                        beatmap.files.push(\r\n                            {\r\n                                md5sum: beatMap.assets[x].md5sum,\r\n                                filename: beatMap.assets[x].filename\r\n                            }\r\n                        );\r\n                        database.insert_data(database.TABLES.ASSETS, beatMap.assets[x].md5sum, beatMap.assets[x].data);\r\n                        beatmap.song = beatMap.assets[x].md5sum;\r\n                    }\r\n\r\n                }\r\n                var thumbnail_md5sum = md5(thumbnail);\r\n                beatmap.thumbnail = thumbnail_md5sum;\r\n                var difficultyCalc = new osu.beatmaps.DifficultyCalculator(beatmap.parsed);\r\n                beatmap.stars = difficultyCalc.calculate();\r\n                md5sums.push(beatmap.md5sum);\r\n                database.insert_data(database.TABLES.ASSETS, thumbnail_md5sum, thumbnail, function () {}, function () {});//TODO actually callback properly\r\n                osu.webapi.beatmaps.uploadBeatMap(beatmap);\r\n                database.insert_data(database.TABLES.BEATMAPS, beatmap.md5sum, beatmap, function () {\r\n                    beatmaps_loaded++;\r\n                    beatmap_loaded();\r\n                }, function () {\r\n                    beatmaps_loaded++;\r\n                    beatmap_loaded();\r\n                });\r\n\r\n            }\r\n\r\n\r\n        }\r\n    };\r\n\r\n\r\n    zip.createReader(new zip.BlobReader(beatmap_zip_file), function (reader) {\r\n\r\n        // get all entries from the zip\r\n        reader.getEntries(function (entries) {\r\n            if (entries.length) {\r\n                zip_length = entries.length;\r\n                for (var i = 0; i < entries.length; i++) {\r\n\r\n                    if (entries[i].filename.split(\".\").pop() == \"osu\") {\r\n                        var extract_data = function (i) {\r\n                            entries[i].getData(new zip.TextWriter(), function (text) {\r\n                                var filename = entries[i].filename;\r\n                                extracted++;\r\n                                var md5sum = md5(text);\r\n                                beatMap.maps.push({\r\n                                    filename: filename,\r\n                                    data: text,\r\n                                    md5sum: md5sum\r\n                                });\r\n                                //we add beatmaps to the db last to join to all the assets\r\n                                processing_complete();\r\n                            }, function (current, total) {\r\n\r\n                            });\r\n                        };\r\n                        extract_data(i);\r\n                    }\r\n\r\n                    else if (entries[i].filename.split(\".\").pop() == \"png\") {\r\n                        var extract_data = function (i) {\r\n                            entries[i].getData(new zip.Data64URIWriter('image/png'), function (data) {\r\n                                var filename = entries[i].filename;\r\n                                extracted++;\r\n                                var md5sum = md5(data);\r\n                                beatMap.assets.push({\r\n                                    filename: filename,\r\n                                    data: data,\r\n                                    md5sum: md5sum,\r\n                                });\r\n                                processing_complete();\r\n                            }, function (current, total) {\r\n\r\n                            });\r\n                        };\r\n                        extract_data(i);\r\n                    }\r\n                    else if (entries[i].filename.split(\".\").pop() == \"wav\") {\r\n                        var extract_data = function (i) {\r\n                            entries[i].getData(new zip.Data64URIWriter('audio/wav'), function (data) {\r\n                                var filename = entries[i].filename;\r\n                                extracted++;\r\n                                var md5sum = md5(data);\r\n                                beatMap.assets.push({\r\n                                    filename: filename,\r\n                                    data: data,\r\n                                    md5sum: md5sum\r\n                                });\r\n                                processing_complete();\r\n                            }, function (current, total) {\r\n\r\n                            });\r\n                        };\r\n                        extract_data(i)\r\n                    }\r\n\r\n                    else if (entries[i].filename.split(\".\").pop() == \"jpg\" || entries[i].filename.split(\".\").pop() == \"jpeg\") {\r\n                        var extract_data = function (i) {\r\n                            entries[i].getData(new zip.Data64URIWriter('image/jpeg'), function (data) {\r\n                                var filename = entries[i].filename;\r\n                                extracted++;\r\n                                var md5sum = md5(data);\r\n                                beatMap.assets.push({\r\n                                    filename: filename,\r\n                                    data: data,\r\n                                    md5sum: md5sum\r\n                                });\r\n                                processing_complete();\r\n\r\n                            }, function (current, total) {\r\n\r\n                            });\r\n                        };\r\n                        extract_data(i)\r\n                    }\r\n\r\n                    else if (entries[i].filename.split(\".\").pop() == \"mp3\") {\r\n                        var extract_data = function (i) {\r\n                            entries[i].getData(new zip.Data64URIWriter('audio/mpeg'), function (data) {\r\n                                var filename = entries[i].filename;\r\n                                extracted++;\r\n                                var md5sum = md5(data);\r\n                                beatMap.assets.push({\r\n                                    filename: filename,\r\n                                    data: data,\r\n                                    md5sum: md5sum\r\n                                });\r\n                                processing_complete();\r\n                            }, function (current, total) {\r\n\r\n                            });\r\n                        };\r\n                        extract_data(i)\r\n                    }\r\n                    else {\r\n                        extracted++;\r\n                        processing_complete();\r\n                    }\r\n\r\n                }\r\n\r\n\r\n            }\r\n\r\n        });\r\n    }, function (error) {\r\n        console.log(error);\r\n    });\r\n\r\n};\r\n\r\n/**\r\n * filereader.js\r\n * Created by Ugrend on 6/2/2016.\r\n */\r\n\r\n\r\nif(typeof window.FileReader === \"undefined\"){\r\n    dragDropLabel.innerHTML = \"Shit won't work on this browser :(\"\r\n}\r\nelse {\r\n    document.body.ondragover = function () {\r\n        return false;\r\n    };\r\n    document.body.ondragend = function () {\r\n        return false;\r\n    };\r\n    document.body.ondrop = function (e) {\r\n        e.preventDefault();\r\n\r\n        var file = e.dataTransfer.files[0];\r\n        var reader = new FileReader();\r\n        reader.onloadend = function (event) {\r\n\r\n            console.log(event);\r\n\r\n            if(event.target.readyState === 2){\r\n\r\n                if(event.target.result.constructor.name == \"ArrayBuffer\" ){\r\n                    var replay_data = new Uint8Array(event.target.result);\r\n                    //This explodes on chrome\r\n                    //var b64encoded = btoa(String.fromCharCode.apply(null, replay_data));\r\n                    var b64encoded = btoa(Uint8ToString(replay_data));\r\n\r\n                    osu.webapi.replays.uploadReplay(file,md5(b64encoded));\r\n                    ReplayParser(replay_data, function (replay_data) {\r\n                        replay = replay_data; //TODO: not be essentially global\r\n                        loadBeatMap();\r\n                    });\r\n                }\r\n                else{\r\n                    //We want it to be mpeg not mp3 (firefox is mpeg chrome is mp3)\r\n                    //this used to just replace itself eg: event.target.result = event.target.result.replace('audio/mp3','audio/mpeg');\r\n                    //However this just stoped working on chrome for no good reason, the string would never get replaced\r\n                    //I have to clone the string for this to work on chrome\r\n                    var insertResult = event.target.result.replace('audio/mp3','audio/mpeg');\r\n                    var md5sum = md5(insertResult);\r\n                    database.insert_data(database.TABLES.ASSETS, md5sum, insertResult, function () {}, function () {});\r\n                }\r\n\r\n            }else{\r\n                event_handler.emit(event_handler.EVENTS.UNKNOWN_FILE_ERROR);\r\n            }\r\n\r\n        };\r\n\r\n            if(file.name.split(\".\").pop() == \"osr\") {\r\n\r\n\r\n\r\n                reader.readAsArrayBuffer(file);\r\n            }else if(file.name.split(\".\").pop() == \"osz\"){\r\n                //beatmap\r\n                if(beatmap &&  beatmap.locked){\r\n                    event_handler.emit(event_handler.EVENTS.BEATMAP_LOADING_FAILED, \"beatmap is locked\")\r\n                }else{\r\n                    BeatmapReader(file, function (bm) {\r\n                            beatmap = bm;\r\n                    });\r\n                }\r\n\r\n            }else if(file.name.split(\".\").pop() == \"osk\"){\r\n                //skin\r\n                SkinReader(file,function (skin) {\r\n                    event_handler.emit(event_handler.EVENTS.SKIN_LOADED, skin);\r\n                });\r\n            }else{\r\n\r\n                //asset\r\n                reader.readAsDataURL(file);\r\n            }\r\n\r\n        return false;\r\n    };\r\n}\r\n/**\r\n * indexeddb.js\r\n * Created by Ugrend on 6/06/2016.\r\n */\r\nwindow.indexedDB = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB;\r\nwindow.IDBTransaction = window.IDBTransaction || window.webkitIDBTransaction || window.msIDBTransaction;\r\nwindow.IDBKeyRange = window.IDBKeyRange || window.webkitIDBKeyRange || window.msIDBKeyRange;\r\n\r\n\r\nvar database = {\r\n\r\n    __db: null,\r\n    __started: false,\r\n    indexeddb_available: false,\r\n\r\n    TABLES: Object.freeze({\r\n        BEATMAPS: \"beatmaps\",\r\n        REPLAYS: \"replays\",\r\n        SKINS: \"skins\",\r\n        ASSETS: \"assets\",\r\n        OPTIONS: \"options\"\r\n\r\n    }),\r\n\r\n    INDEXES: Object.freeze({\r\n        REPLAYS: {\r\n            BEATMAP_ID: 'beatmap_id',\r\n            PLAYER: 'player'\r\n        }\r\n\r\n    }),\r\n\r\n\r\n    init: function (onsucess) {\r\n        var self = this;\r\n        var createDatabase = indexedDB.open(\"osu\", 1);\r\n        createDatabase.onupgradeneeded = function (e) {\r\n            var thisDB = e.target.result;\r\n            for(var k in database.TABLES){\r\n                if (!thisDB.objectStoreNames.contains(database.TABLES[k])) {\r\n                    var table = thisDB.createObjectStore(database.TABLES[k]);\r\n                    if(database.TABLES[k] == database.TABLES.BEATMAPS){\r\n                        table.createIndex(\"beatmapsetid\", \"beatmapsetid\", {unique: false});\r\n                        table.createIndex(\"title\", \"title\", {unique: false});\r\n                        table.createIndex(\"titleunicode\", \"titleunicode\", {unique: false});\r\n                        table.createIndex(\"artist\", \"artist\", {unique: false});\r\n                        table.createIndex(\"artistunicode\", \"artistunicode\", {unique: false});\r\n                        table.createIndex(\"creator\", \"creator\", {unique: false});\r\n                        table.createIndex(\"tags\", \"tags\", {unique: false});\r\n                    }\r\n                    if(database.TABLES[k] == database.TABLES.REPLAYS){\r\n                        table.createIndex(\"beatmap_id\", \"bmMd5Hash\", {unique: false});\r\n                        table.createIndex(\"player\", \"playerName\", {unique: false});\r\n\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        createDatabase.onsuccess = function (e) {\r\n            self.__db = e.target.result;\r\n            self.__started = true;\r\n            this.indexeddb_available = true;\r\n            onsucess();\r\n        };\r\n        createDatabase.onerror = function (e) {\r\n            console.log(e);\r\n        };\r\n\r\n\r\n\r\n\r\n\r\n    },\r\n\r\n    insert_data: function (table, md5sum, data, onsuccess, onerror) {\r\n        if (this.__started) {\r\n            var transaction = this.__db.transaction([table], \"readwrite\").objectStore(table).add(data, md5sum);\r\n            transaction.onsuccess =   onsuccess || function () {};\r\n            transaction.onerror = function(e){\r\n                console.log(e.target.error);\r\n                if(onerror){\r\n                    onerror(e);\r\n                }\r\n\r\n            };\r\n        }\r\n        else {\r\n            onerror(\"db not started\");\r\n        }\r\n\r\n    },\r\n    get_data: function (table, md5sum, onsuccess, onerror) {\r\n        if (this.__started) {\r\n            var query = this.__db.transaction([table], \"readonly\").objectStore(table).get(md5sum);\r\n            query.onsuccess = function (e) {\r\n              onsuccess({md5sum: md5sum, data:e.target.result});\r\n            };\r\n            query.onerror = onerror;\r\n        } else {\r\n             onerror(\"db not started\");\r\n        }\r\n    },\r\n    get_count: function (table, onsuccess) {\r\n        var countReq = this.__db.transaction([table], \"readonly\").objectStore(table).count();\r\n        countReq.onsuccess = function () {\r\n            onsuccess(countReq.result);\r\n        }\r\n    },\r\n    delete_data: function (table,key, onsuccess) {\r\n        var request = this.__db.transaction([table], \"readwrite\").objectStore(table).delete(key);\r\n        request.onsuccess = onsuccess;\r\n    },\r\n\r\n    get_all_keys: function (table,callback) {\r\n        var request = this.__db.transaction([table], \"readonly\").objectStore(table);\r\n        var result = [];\r\n        request.openCursor().onsuccess = function (event) {\r\n\r\n\r\n            var cursor = event.target.result;\r\n            if(cursor){\r\n                result.push(cursor.key);\r\n                cursor.continue();\r\n            }else{\r\n                callback(result);\r\n            }\r\n\r\n\r\n        }\r\n    },\r\n    get_data_from_index(table, index, param, onsuccess, onerror){\r\n        var result = [];\r\n        var key = IDBKeyRange.only(param);\r\n        var query = this.__db.transaction([table], \"readonly\").objectStore(table).index(index).openCursor(key)\r\n            .onsuccess= function (e) {\r\n            var cursor = e.target.result;\r\n            if(cursor){\r\n                result.push(cursor.value);\r\n                cursor.continue();\r\n            }else{\r\n                onsuccess(result);\r\n            }\r\n\r\n        };\r\n\r\n\r\n\r\n        query.onsuccess = function (e) {\r\n            onsuccess(e.target.result);\r\n        };\r\n    },\r\n    getAll(table,callback){\r\n        var request = this.__db.transaction([table], \"readonly\").objectStore(table);\r\n        var result = [];\r\n        request.openCursor().onsuccess = function (event) {\r\n\r\n\r\n            var cursor = event.target.result;\r\n            if(cursor){\r\n                result.push(cursor.value);\r\n                cursor.continue();\r\n            }else{\r\n                callback(result);\r\n            }\r\n\r\n\r\n        }\r\n\r\n    },\r\n    update_data(table,key,data, onsuccess, onerror){\r\n        onsuccess = onsuccess || function () {};\r\n        onerror = onerror || function () {};\r\n        if (this.__started) {\r\n            var transaction = this.__db.transaction([table], \"readwrite\").objectStore(table).put(data, key);\r\n            transaction.onsuccess =   onsuccess;\r\n            transaction.onerror = function(e){\r\n                console.log(e.target.error);\r\n                onerror(e);\r\n            };\r\n        }\r\n        else {\r\n            onerror(\"db not started\");\r\n        }\r\n\r\n    },\r\n\r\n\r\n    delete_database: function () {\r\n      if(DEBUG) {\r\n          indexedDB.deleteDatabase('osu');\r\n      }else{\r\n          console.log(\"no\");\r\n      }\r\n    },\r\n    clear_table: function(table_name){\r\n        if(DEBUG){\r\n            var transaction = this.__db.transaction([table_name], \"readwrite\");\r\n            var objectStore = transaction.objectStore(table_name);\r\n            var objectStoreRequest = objectStore.clear();\r\n\r\n            objectStoreRequest.onsuccess = function(event) {\r\n                console.log(table_name + \" cleared!\");\r\n\r\n            }\r\n        }else{\r\n            console.log(\"no\");\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n};\r\n\r\n\r\n/**\r\n * replayreader.js\r\n * Created by Ugrend on 2/06/2016.\r\n */\r\n\r\n\r\n/**\r\n * Converts a hexdump of a replay file into a JS object\r\n * @param replay_data {String value of a hexdump of replay file}\r\n * @returns {{type: *, version: *, bmMd5Hash: *, playerName: *, rMd5Hash: *, h300: *, h100: *, h50: *, hGekis: *, hKatus: *, hMisses: *, tScore: *, tCombo: *, fullClear: *, mods: *, lifeBar: *, timeTicks: *, replayByteLength: *}}\r\n * @constructor\r\n */\r\nvar ReplayParser = function(replay_data, callback){\r\n    event_handler.emit(event_handler.EVENTS.REPLAY_LOADING);\r\n    //https://osu.ppy.sh/wiki/Osr_%28file_format%29\r\n    var b64EncodedMd5 = md5(btoa(Uint8ToString(replay_data)));\r\n    var RP = {\r\n        replay_bytes: replay_data,\r\n\r\n        byte_index: 0,\r\n\r\n\r\n        //data types\r\n        getByte: function(){\r\n            return this.replay_bytes[this.byte_index++];\r\n        },\r\n        getShort: function(){\r\n            return this.replay_bytes[this.byte_index++]\r\n                | (this.replay_bytes[this.byte_index++] << 8);\r\n        },\r\n        getInteger: function(){\r\n            return this.replay_bytes[this.byte_index++]\r\n                | (this.replay_bytes[this.byte_index++] << 8)\r\n                | (this.replay_bytes[this.byte_index++] << 16)\r\n                | (this.replay_bytes[this.byte_index++] << 24);\r\n        },\r\n        getLong: function(){\r\n            return this.getInteger() + this.getInteger() * 0x100000000;\r\n        },\r\n        getULEB128: function(){\r\n            var t = 0;\r\n            var s = 0;\r\n            while (true) {\r\n                var byte = this.getByte();\r\n                t |= ((byte & 0x7F) << s);\r\n                if ((byte & 0x80) === 0) break;\r\n                s += 7;\r\n            }\r\n            return t;\r\n        },\r\n        getString: function(){\r\n\r\n                /*\r\n                From: https://osu.ppy.sh/wiki/Osr_%28file_format%29\r\n                Has three parts; a single byte which will be either\r\n                0x00,indicating that the next two parts are not present, or\r\n                0x0b (decimal 11), indicating that the next two parts are present.\r\n                If it is 0x0b, there will then be a ULEB128,\r\n                representing the byte length of the following string, and then the string itself, encoded in UTF-8. See wikipedia:UTF-8*/\r\n                var startByte = this.getByte();\r\n                if (startByte == 0x0B){\r\n                    var len = this.getULEB128();\r\n                    var s = \"\";\r\n                    for (var i = 0; i < len; i++) {\r\n                        s += String.fromCharCode(this.getByte());\r\n                    }\r\n                    return s;\r\n                }\r\n                return \"\";\r\n        }\r\n\r\n    };\r\n    var replay = {\r\n        type: RP.getByte(),\r\n        version: RP.getInteger(),\r\n        bmMd5Hash: RP.getString(),\r\n        playerName: RP.getString(),\r\n        rMd5Hash: RP.getString(),\r\n        h300: RP.getShort(),\r\n        h100: RP.getShort(),\r\n        h50: RP.getShort(),\r\n        hGekis: RP.getShort(),\r\n        hKatus: RP.getShort(),\r\n        hMisses: RP.getShort(),\r\n        tScore: RP.getInteger(),\r\n        tCombo: RP.getShort(),\r\n        fullClear: RP.getByte(),\r\n        mods: osu.mods.getMods(RP.getInteger()),\r\n        lifeBar: RP.getString(),\r\n        time_played: RP.getLong(),\r\n        replayByteLength: RP.getInteger(),\r\n        b64md5sum: b64EncodedMd5\r\n    };\r\n\r\n    //this converts from .net ticks to epoch time\r\n    var epoch = (replay.time_played - 621355968000000000) / 10000 ;\r\n    var date_time = new Date(epoch);\r\n    replay.time_played = date_time.toLocaleString();\r\n\r\n\r\n    replay.grade = osu.score.getGrade(replay.h300, replay.h100, replay.h50,replay.hMisses, replay.mods).name;\r\n    replay.accuracy = osu.score.getAccuracy(replay.h300, replay.h100, replay.h50,replay.hMisses);\r\n\r\n    replay.been_rendered = false;\r\n\r\n    LZMA.decompress(\r\n        RP.replay_bytes.slice(RP.byte_index),\r\n        function(data) {\r\n            var replayData = data.split(\",\");\r\n            var lastTimeFrame = 0;\r\n            for(var i = 0 ; i< replayData.length ; i++){\r\n                var splitData = replayData[i].split(\"|\");\r\n                for(var x = 0; x< splitData.length ; x++){\r\n                    splitData[x] = parseFloat(splitData[x]);\r\n                }\r\n\r\n                if(splitData.length !=4) continue;\r\n                var time = +splitData[0];\r\n                if(time >= 0){\r\n                    time+= lastTimeFrame;\r\n                    lastTimeFrame = time;\r\n                }\r\n\r\n                var replayFrame = {\r\n                    t: time,\r\n                    x:splitData[1],\r\n                    y: splitData[2],\r\n                    keys: osu.keypress.get_keys(splitData[3])\r\n\r\n                };\r\n\r\n\r\n                replayData[i] = replayFrame;\r\n            }\r\n\r\n\r\n            replay.replayData = replayData;\r\n\r\n            database.insert_data(database.TABLES.REPLAYS, replay.rMd5Hash, replay, function () {\r\n                event_handler.emit(event_handler.EVENTS.REPLAY_LOADED);\r\n                callback(replay);\r\n            }, function () {\r\n                event_handler.emit(event_handler.EVENTS.REPLAY_LOADED);\r\n                callback(replay);\r\n            });\r\n        },\r\n        function(){}\r\n    );\r\n\r\n};\r\n\r\n/**\r\n * skinreader.js\r\n * Created by Ugrend on 6/06/2016.\r\n */\r\nvar SkinReader = function(skin_zip, callback) {\r\n\r\n    event_handler.emit(event_handler.EVENTS.SKIN_LOADING, skin_zip.name);\r\n\r\n    var skins = {\r\n        name: \"\",\r\n        author: \"\",\r\n        version: \"\",\r\n        colours: [],\r\n        assets: [],\r\n        md5sum: \"\",\r\n    };\r\n\r\n    zip.createReader(new zip.BlobReader(skin_zip), function (reader) {\r\n        var zip_length = 0;\r\n        var process_count = 0;\r\n        var processing_complete = function () {\r\n            process_count++;\r\n            if (process_count >= zip_length){\r\n\r\n                database.insert_data(database.TABLES.SKINS,skins.md5sum,skins,callback,callback);\r\n            }\r\n        };\r\n\r\n       var RGBToHex = function(r,g,b){\r\n            var bin = r << 16 | g << 8 | b;\r\n            return (function(h){\r\n                return new Array(7-h.length).join(\"0\")+h\r\n            })(bin.toString(16).toUpperCase())\r\n        };\r\n\r\n\r\n        reader.getEntries(function (entries) {\r\n            if (entries.length) {\r\n                zip_length = entries.length;\r\n                for (var i = 0; i < entries.length; i++) {\r\n                    var extension = entries[i].filename.split(\".\").pop();\r\n                    if (extension == \"ini\") {\r\n                        entries[i].getData(new zip.TextWriter(), function (text) {\r\n                            skins.md5sum = md5(text);\r\n\r\n                            var lines = text.replace(\"\\r\", \"\").split(\"\\n\");\r\n                            for (var j = 0; j < lines.length; j++) {\r\n                                var line = lines[j];\r\n                                if (line === \"\") {\r\n                                    continue;\r\n                                }\r\n                                if (line.indexOf(\"Name:\") == 0) {\r\n                                    var setting = line.split(\":\");\r\n                                    if (setting.length > 1) skins.name = setting[1].trim();\r\n                                }\r\n                                if (line.indexOf(\"Author:\") == 0) {\r\n                                    var setting = line.split(\":\");\r\n                                    if (setting.length > 1) skins.author = setting[1].trim();\r\n                                }\r\n                                if (line.indexOf(\"Version:\") == 0) {\r\n                                    var setting = line.split(\":\");\r\n                                    if (setting.length > 1) skins.version = setting[1].trim();\r\n                                }\r\n                                if (line.indexOf(\"Combo\") == 0) {\r\n                                    var setting = line.split(\":\");\r\n                                    if (setting.length > 1) {\r\n                                        var rgb = setting[1].trim().split(\",\");\r\n                                        if (rgb.length === 3) {\r\n                                            skins.colours.push(parseInt(\"0x\" + RGBToHex(rgb[0], rgb[1], rgb[2])));\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                            processing_complete();\r\n                        });\r\n\r\n                    } else if (extension == \"png\" || extension == \"wav\" || extension == \"mp3\") {\r\n\r\n                        var filename = entries[i].filename.split(\"/\");\r\n                        if(filename.length > 1 )filename = filename[1]; else filename = filename[0];\r\n                        if (extension == \"png\") {\r\n                            (function (filename) {\r\n                                if(DEBUG)console.log(filename);\r\n                                entries[i].getData(new zip.Data64URIWriter('image/png'), function (data) {\r\n                                    var md5sum = md5(data);\r\n                                    skins.assets.push({\r\n                                        filename: filename,\r\n                                        md5sum: md5sum\r\n                                    });\r\n                                    database.insert_data(database.TABLES.ASSETS, md5sum, data, processing_complete, processing_complete)\r\n                                });\r\n                            })(filename);\r\n\r\n                        } else if(extension == \"wav\") {\r\n\r\n                            (function (filename) {\r\n                                if(DEBUG)console.log(filename);\r\n                                entries[i].getData(new zip.Data64URIWriter('audio/wav'), function (data) {\r\n                                    var md5sum = md5(data);\r\n                                    skins.assets.push({\r\n                                        filename: filename,\r\n                                        md5sum: md5sum\r\n                                    });\r\n                                    database.insert_data(database.TABLES.ASSETS, md5sum, data, processing_complete, processing_complete)\r\n                                });\r\n                            })(filename);\r\n                        }else{\r\n                            (function (filename) {\r\n                                if(DEBUG)console.log(filename);\r\n                                entries[i].getData(new zip.Data64URIWriter('audio/mpeg'), function (data) {\r\n                                    var md5sum = md5(data);\r\n                                    skins.assets.push({\r\n                                        filename: filename,\r\n                                        md5sum: md5sum\r\n                                    });\r\n                                    database.insert_data(database.TABLES.ASSETS, md5sum, data, processing_complete, processing_complete)\r\n                                });\r\n                            })(filename);\r\n\r\n                        }\r\n                    } else {\r\n                        processing_complete();\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    });\r\n};\r\n/**\r\n *hitsounds.js\r\n * Created by Ugrend on 9/07/2016.\r\n */\r\nvar osu = osu || {};\r\nosu.audio = osu.audio || {};\r\nosu.audio.HitSound = {\r\n    HIT_SOUNDS: {\r\n        SOUND_NORMAL: \"HITNORMAL\",\r\n        SOUND_WHISTLE: \"HITWHISTLE\",\r\n        SOUND_FINISH: \"HITFINISH\",\r\n        SOUND_CLAP: \"HITCLAP\",\r\n    },\r\n    HIT_ADDITIONS: {\r\n        NORMAL: \"NORMAL_\",\r\n        SOFT: \"SOFT_\",\r\n        DRUM: \"DRUM_\"\r\n    },\r\n\r\n    getHitSounds: function (hitSoundArray, timing,noNormals) {\r\n        noNormals = noNormals || false;\r\n        var soundArray = [];\r\n        var hitAdditons = this.HIT_ADDITIONS.NORMAL;\r\n        switch(timing.sampleType){\r\n            case osu.objects.HitObjectParser.HIT_ADDITIONS.DRUM:\r\n                hitAdditons = this.HIT_ADDITIONS.DRUM;\r\n                break;\r\n            case osu.objects.HitObjectParser.HIT_ADDITIONS.SOFT:\r\n                hitAdditons = this.HIT_ADDITIONS.SOFT;\r\n        }\r\n        if(!noNormals){\r\n            soundArray.push(osu.audio.sound[this.HIT_ADDITIONS.NORMAL+this.HIT_SOUNDS.SOUND_NORMAL]);\r\n        }\r\n\r\n        for(var i = 0 ; i < hitSoundArray.length; i ++){\r\n            switch(hitSoundArray[i]){\r\n                case osu.objects.HitObjectParser.HIT_SOUNDS.SOUND_NORMAL:\r\n                    break;\r\n                case osu.objects.HitObjectParser.HIT_SOUNDS.SOUND_WHISTLE:\r\n                    soundArray.push(osu.audio.sound[hitAdditons+this.HIT_SOUNDS.SOUND_WHISTLE]);\r\n                    break;\r\n                case osu.objects.HitObjectParser.HIT_SOUNDS.SOUND_FINISH:\r\n                    soundArray.push(osu.audio.sound[hitAdditons+this.HIT_SOUNDS.SOUND_FINISH]);\r\n                    break;\r\n                case osu.objects.HitObjectParser.HIT_SOUNDS.SOUND_CLAP:\r\n                    soundArray.push(osu.audio.sound[hitAdditons+this.HIT_SOUNDS.SOUND_CLAP]);\r\n                    break;\r\n            }\r\n\r\n        }\r\n        return soundArray;\r\n    }\r\n\r\n\r\n};\r\n/**\r\n * music_controller.js\r\n * Created by Ugrend on 9/06/2016.\r\n */\r\nvar osu = osu || {};\r\nosu.audio = osu.audio || {};\r\nosu.audio.music =  {\r\n\r\n    preview_screen: false,\r\n    preview_time: 0,\r\n    __audio: null,\r\n    md5sum: \"\",\r\n    playing: false,\r\n    events_bound: false,\r\n    using_howl: true,\r\n\r\n    init: function (src, md5sum) {\r\n\r\n        /*You might read this and ask, why have both html5 Audio and howler js\r\n\r\n            Basically had some weird problems with Chrome and datauri audio where switching sources/moving positions\r\n            would sometimes corrupt the audio playing.\r\n            To fix this i thought i would try using a audio library to see if it solved this problem\r\n            However this introduced a new problem, howlerjs didn't seem to work with CORS when the remote source did not allow remote domains,\r\n            Since the problem didn't affect url sources i decided to use both, howlerjs for datauri and standard Audio for everything else.\r\n\r\n         */\r\n\r\n        if(!this.events_bound){\r\n            event_handler.on(event_handler.EVENTS.SETTINGS_CHANGED, this.set_volume.bind(this));\r\n            this.events_bound = true;\r\n        }\r\n        //only start again\r\n        if(src && md5sum != this.md5sum){\r\n            this.md5sum = md5sum;\r\n            //howl has issues with same origin policy so only use it with datauris\r\n            this.using_howl = src.startsWith('data:audio');\r\n\r\n            //clear out original audio object\r\n            if(this.__audio instanceof Howl){\r\n                this.__audio.unload();\r\n            }\r\n            if(this.__audio instanceof Audio){\r\n                this.__audio.pause();\r\n                this.__audio.src = \"\";\r\n            }\r\n            if(this.using_howl){\r\n                this.__audio = new Howl({\r\n                    src:[src],\r\n                    onend:this.repeat.bind(this)\r\n                });\r\n            }else{\r\n                if(this.__audio instanceof Audio){\r\n                    this.__audio.src = src;\r\n                }else{\r\n                    this.__audio = new Audio(src);\r\n                    this.__audio.onended = this.repeat.bind(this);\r\n                }\r\n\r\n            }\r\n\r\n            this.set_volume();\r\n            this.playing = false;\r\n        }\r\n        this.set_playback_speed(1);//reset playback speed if was playing DT/HT\r\n\r\n\r\n    },\r\n    set_volume: function () {\r\n        if(this.__audio) {\r\n            if(this.using_howl){\r\n                this.__audio.volume(osu.settings.SETTINGS.master_volume * osu.settings.SETTINGS.music_volume);\r\n            }else{\r\n                this.__audio.volume = osu.settings.SETTINGS.master_volume * osu.settings.SETTINGS.music_volume;\r\n            }\r\n\r\n        }\r\n    },\r\n\r\n    stop: function () {\r\n        if(this.__audio){\r\n            if(this.using_howl){\r\n                this.__audio.stop();\r\n            }else{\r\n                this.__audio.pause();\r\n                this.__audio.currentTime = 0;\r\n            }\r\n\r\n        }\r\n    },\r\n\r\n    start: function(){\r\n        if(!this.__audio) return;\r\n        if(this.preview_screen){\r\n            if(!this.playing){\r\n                if(this.using_howl){\r\n                    this.__audio.seek(this.preview_time);\r\n                }else{\r\n                    this.__audio.currentTime = this.preview_time;\r\n                }\r\n\r\n                this.__audio.play();\r\n                this.playing = true;\r\n            }\r\n\r\n        }\r\n        else{\r\n            if(this.using_howl){\r\n                this.__audio.seek(0);\r\n            }else{\r\n                this.__audio.currentTime = 0;\r\n            }\r\n            this.__audio.play();\r\n        }\r\n\r\n    },\r\n    set_position: function (t) {\r\n        if(!this.__audio) return;\r\n        if(this.using_howl){\r\n            this.__audio.seek(t);\r\n        }else{\r\n            this.__audio.currentTime = t;\r\n        }\r\n\r\n    },\r\n\r\n    play: function(){\r\n        if(!this.__audio) return;\r\n        this.__audio.play()\r\n    },\r\n    pause: function () {\r\n        if(!this.__audio) return;\r\n        this.__audio.pause();\r\n    },\r\n    set_playback_speed: function (rate) {\r\n        if(!this.__audio) return;\r\n        if(this.using_howl){\r\n            this.__audio.rate(rate);\r\n        }else{\r\n            this.__audio.playbackRate = rate;\r\n        }\r\n\r\n\r\n\r\n    },\r\n\r\n    loaded: function () {\r\n        if(!this.using_howl && this.__audio){\r\n            return osu.audio.music.__audio.readyState == 4 || osu.audio.music.__audio.src != \"\" && !osu.audio.music.__audio.error\r\n        }\r\n        return true;\r\n    },\r\n    repeat: function () {\r\n        if(!this.__audio) return;\r\n        if(this.preview_screen){\r\n            this.playing = false;\r\n            this.start();\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n};\r\n\r\n\r\n/**\r\n * sound_effects.js\r\n * Created by Ugrend on 16/06/2016.\r\n */\r\nvar osu = osu || {};\r\nosu.audio = osu.audio || {};\r\nosu.audio.sound = {\r\n    APPLAUSE: '',\r\n    COMBOBREAK: '',\r\n    COUNT1S: '',\r\n    COUNT2S: '',\r\n    COUNT3S: '',\r\n    DRUM_HITCLAP: '',\r\n    DRUM_HITFINISH: '',\r\n    DRUM_HITNORMAL: '',\r\n    DRUM_HITWHISTLE: '',\r\n    DRUM_SLIDERSLIDE: '',\r\n    DRUM_SLIDERTICK: '',\r\n    DRUM_SLIDERWHISTLE: '',\r\n    FAILSOUND: '',\r\n    GOS: '',\r\n    MENUBACK: '',\r\n    MENUCLICK: '',\r\n    MENUHIT: '',\r\n    NORMAL_HITCLAP: '',\r\n    NORMAL_HITFINISH: '',\r\n    NORMAL_HITNORMAL: '',\r\n    NORMAL_HITWHISTLE: '',\r\n    NORMAL_SLIDERSLIDE: '',\r\n    NORMAL_SLIDERTICK: '',\r\n    NORMAL_SLIDERWHISTLE: '',\r\n    READYS: '',\r\n    SECTIONFAIL: '',\r\n    SECTIONPASS: '',\r\n    SHUTTER: '',\r\n    SOFT_HITCLAP: '',\r\n    SOFT_HITFINISH: '',\r\n    SOFT_HITNORMAL: '',\r\n    SOFT_HITWHISTLE: '',\r\n    SOFT_SLIDERSLIDE: '',\r\n    SOFT_SLIDERTICK: '',\r\n    SOFT_SLIDERWHISTLE: '',\r\n    SPINNERBONUS: '',\r\n    SPINNER_OSU: '',\r\n    SPINNERSPIN: '',\r\n\r\n    initialised: false,\r\n\r\n    play_sound(effect,volume){\r\n        if(!this.initialised || effect == '') return;\r\n        volume = volume || 1;\r\n        effect.volume = (osu.settings.SETTINGS.master_volume * osu.settings.SETTINGS.sound_effects_volume) * volume;\r\n        effect.currentTime = 0;\r\n        effect.play();\r\n    },\r\n\r\n    init(){\r\n        this.APPLAUSE = new Audio(src=osu.skins.audio.applause);\r\n        this.COMBOBREAK = new Audio(src=osu.skins.audio.combobreak);\r\n        this.COUNT1S = new Audio(src=osu.skins.audio.count1s);\r\n        this.COUNT2S = new Audio(src=osu.skins.audio.count2s);\r\n        this.COUNT3S = new Audio(src=osu.skins.audio.count3s);\r\n        this.DRUM_HITCLAP = new Audio(src=osu.skins.audio.drum_hitclap);\r\n        this.DRUM_HITFINISH = new Audio(src=osu.skins.audio.drum_hitfinish);\r\n        this.DRUM_HITNORMAL = new Audio(src=osu.skins.audio.drum_hitnormal);\r\n        this.DRUM_HITWHISTLE = new Audio(src=osu.skins.audio.drum_hitwhistle);\r\n        this.DRUM_SLIDERSLIDE = new Audio(src=osu.skins.audio.drum_sliderslide);\r\n        this.DRUM_SLIDERTICK = new Audio(src=osu.skins.audio.drum_slidertick);\r\n        this.DRUM_SLIDERWHISTLE = new Audio(src=osu.skins.audio.drum_sliderwhistle);\r\n        this.FAILSOUND = new Audio(src=osu.skins.audio.failsound);\r\n        this.GOS = new Audio(src=osu.skins.audio.gos);\r\n        this.MENUBACK = new Audio(src=osu.skins.audio.menuback);\r\n        this.MENUCLICK = new Audio(src=osu.skins.audio.menuclick);\r\n        this.MENUHIT = new Audio(src=osu.skins.audio.menuhit);\r\n        this.NORMAL_HITCLAP = new Audio(src=osu.skins.audio.normal_hitclap);\r\n        this.NORMAL_HITFINISH = new Audio(src=osu.skins.audio.normal_hitfinish);\r\n        this.NORMAL_HITNORMAL = new Audio(src=osu.skins.audio.normal_hitnormal);\r\n        this.NORMAL_HITWHISTLE = new Audio(src=osu.skins.audio.normal_hitwhistle);\r\n        this.NORMAL_SLIDERSLIDE = new Audio(src=osu.skins.audio.normal_sliderslide);\r\n        this.NORMAL_SLIDERTICK = new Audio(src=osu.skins.audio.normal_slidertick);\r\n        this.NORMAL_SLIDERWHISTLE = new Audio(src=osu.skins.audio.normal_sliderwhistle);\r\n        this.READYS = new Audio(src=osu.skins.audio.readys);\r\n        this.SECTIONFAIL = new Audio(src=osu.skins.audio.sectionfail);\r\n        this.SECTIONPASS = new Audio(src=osu.skins.audio.sectionpass);\r\n        this.SHUTTER = new Audio(src=osu.skins.audio.shutter);\r\n        this.SOFT_HITCLAP = new Audio(src=osu.skins.audio.soft_hitclap);\r\n        this.SOFT_HITFINISH = new Audio(src=osu.skins.audio.soft_hitfinish);\r\n        this.SOFT_HITNORMAL = new Audio(src=osu.skins.audio.soft_hitnormal);\r\n        this.SOFT_HITWHISTLE = new Audio(src=osu.skins.audio.soft_hitwhistle);\r\n        this.SOFT_SLIDERSLIDE = new Audio(src=osu.skins.audio.soft_sliderslide);\r\n        this.SOFT_SLIDERTICK = new Audio(src=osu.skins.audio.soft_slidertick);\r\n        this.SOFT_SLIDERWHISTLE = new Audio(src=osu.skins.audio.soft_sliderwhistle);\r\n        this.SPINNERBONUS = new Audio(src=osu.skins.audio.spinnerbonus);\r\n        this.SPINNER_OSU = new Audio(src=osu.skins.audio.spinner_osu);\r\n        this.SPINNERSPIN = new Audio(src=osu.skins.audio.spinnerspin);\r\n        this.initialised = true;\r\n    }\r\n\r\n};\r\n/**\r\n * beatmaps.js\r\n * Created by Ugrend on 4/06/2016.\r\n */\r\n// https://osu.ppy.sh/wiki/Osu_%28file_format%29\r\n\r\n\r\nvar osu = osu || {};\r\nosu.beatmaps = osu.beatmaps || {};\r\n\r\n\r\nosu.beatmaps.BeatmapPreview = class BeatmapPreview {\r\n    constructor(md5sum, callback) {\r\n        callback = callback || function () {};\r\n        this.loaded = false;\r\n        this.artist = \"\";\r\n        this.artistunicode = \"\";\r\n        this.beatmapid = \"\";\r\n        this.beatmapsetid = \"\";\r\n        this.creator = \"\";\r\n        this.md5sum = md5sum;\r\n        this.source = \"\";\r\n        this.tags = \"\";\r\n        this.thumbnail_data = \"\";\r\n        this.title = \"\";\r\n        this.titleunicode = \"\";\r\n        this.version = \"\";\r\n        this.song = \"\";\r\n        this.preview_song_time = 0;\r\n        this.background = \"\";\r\n\r\n        //difficulty\r\n        this.approachRate = \"\";\r\n        this.circleSize = \"\";\r\n        this.overallDifficulty = \"\";\r\n        this.HPDrain = \"\";\r\n        this.stars = \"\";\r\n        this.bpm = 0;\r\n        this.objects = 0;\r\n        this.circles = 0;\r\n        this.sliders = 0;\r\n        this.spinners = 0;\r\n        this.song_length = \"\";\r\n\r\n        var self = this;\r\n        database.get_data(database.TABLES.BEATMAPS,md5sum, function (r) {\r\n            var beatmap = r.data;\r\n            self.artist = beatmap.artist || \"\";\r\n            //if unicode is same as normal just ignore it so we dont print twice\r\n            self.artistunicode = (beatmap.artistunicode == beatmap.artist ? false : beatmap.artistunicode);\r\n            self.artistunicode = beatmap.artistunicode || null;\r\n            self.beatmapid = beatmap.beatmapid || \"\";\r\n            self.beatmapsetid = beatmap.beatmapsetid || \"\";\r\n            self.creator = beatmap.creator || \"\";\r\n            self.source = beatmap.source || \"\";\r\n            self.tags = beatmap.tags || \"\";\r\n            self.title = beatmap.title || \"\";\r\n            self.titleunicode = (beatmap.titleunicode == beatmap.title ? false : beatmap.titleunicode);\r\n            self.version = beatmap.version || \"\";\r\n            self.song = beatmap.song || \"\";\r\n            self.preview_song_time = parseInt(beatmap.parsed.general.PreviewTime) || 0;\r\n            self.background = beatmap.background || \"\";\r\n            self.approachRate = beatmap.parsed.difficulty.ApproachRate || 0;\r\n            self.circleSize = beatmap.parsed.difficulty.CircleSize || 0;\r\n            self.overallDifficulty = beatmap.parsed.difficulty.OverallDifficulty || 0;\r\n            self.HPDrain = beatmap.parsed.difficulty.HPDrainRate || 0;\r\n            self.minBPM = beatmap.parsed.minBPM;\r\n            self.maxBPM = (beatmap.parsed.maxBPM == -1 ? false : beatmap.parsed.maxBPM);\r\n            self.circles = beatmap.parsed.circles || 0;\r\n            self.sliders = beatmap.parsed.sliders || 0;\r\n            self.spinners = beatmap.parsed.spinners || 0;\r\n            self.objects = self.circles + self.sliders + self.spinners;\r\n            self.stars = parseFloat(beatmap.stars);\r\n            self.display_stars = [];\r\n            var stars = self.stars;\r\n            for(var i = 0; i <= Math.ceil(self.stars); i++){\r\n                if(i > 9) break; //only display 10stars max\r\n\r\n\r\n                if(stars > 1){\r\n                    self.display_stars.push(\r\n                        {\r\n                            h: 52,\r\n                            w: 50,\r\n                            star_img: osu.skins.resources.star.url\r\n                        }\r\n                    )\r\n                }else{\r\n                    if(stars >= 0){\r\n                        self.display_stars.push(\r\n                            {\r\n                                h: 52 * stars,\r\n                                w: 50 * stars,\r\n                                star_img: osu.skins.resources.star.url\r\n                            })\r\n                    }\r\n\r\n                }\r\n                stars -= 1;\r\n\r\n            }\r\n\r\n            var milliseconds = beatmap.parsed.time_length;\r\n            var seconds = parseInt((milliseconds / 1000) % 60 );\r\n            var minutes = parseInt(((milliseconds / (1000*60)) % 60));\r\n            var hours   = parseInt(((milliseconds / (1000*60*60)) % 24));\r\n\r\n            var pad = function (s) {\r\n                return ('00'+s).substring(s.length);\r\n            };\r\n\r\n            self.song_length = (hours > 0 ? hours.toString() + \":\" : \"\") + pad(minutes.toString()) + \":\"  + pad(seconds.toString());\r\n\r\n            database.get_data(database.TABLES.ASSETS,beatmap.thumbnail, function (result) {\r\n                self.thumbnail_data = result.data;\r\n                self.loaded = true;\r\n                callback(this);\r\n            });\r\n        })\r\n\r\n    }\r\n\r\n\r\n    play_song() {\r\n        var preview_time = this.preview_song_time;\r\n        database.get_data(database.TABLES.ASSETS, this.song, function (r) {\r\n            osu.audio.music.preview_time = preview_time / 1000;\r\n            osu.audio.music.preview_screen = true;\r\n            osu.audio.music.init(r.data,r.md5sum);\r\n            osu.audio.music.start();\r\n        });\r\n    }\r\n\r\n    load_background(){\r\n\r\n        database.get_data(database.TABLES.ASSETS, this.background, function (r) {\r\n            osu.ui.interface.mainscreen.set_background(r.data);\r\n        });\r\n    }\r\n\r\n\r\n};\r\n\r\nosu.beatmaps.BeatmapLoader = {\r\n        beatmap_found: false,\r\n        map_name: \"\",\r\n        required_files: [],\r\n        background: \"\",\r\n        map_data: \"\",\r\n        assets: [],\r\n        song: \"\",\r\n        __beatmap: \"\",\r\n        __files_needed: [],\r\n        md5sum: \"\",\r\n\r\n        load: function (md5sum, onsuccess, onerror) {\r\n            //clear out old data\r\n            this.beatmap_found = false;\r\n            this.map_name = false;\r\n            this.required_files = [];\r\n            this.assets = [];\r\n            this.song = \"\";\r\n            this.song_md5sum = \"\";\r\n            this.__beatmap = \"\";\r\n            this.__files_needed = [];\r\n            this.background = \"\";\r\n\r\n            this.md5sum = md5sum;\r\n            this.onsuccess = onsuccess;\r\n            this.onerror = onerror;\r\n            // check if last loaded beatmap has our data first (incase indexeddb is unavailable/etc)\r\n            if (beatmap) {\r\n                for (var i = 0; i < beatmap.maps.length; i++) {\r\n                    if (beatmap.maps[i].md5sum == md5sum) {\r\n                        beatmap.locked = true; //lock the data to prevent droping another beatmap\r\n                        this.map_data = beatmap.maps[i].parsed;\r\n                        this.required_files = beatmap.maps[i].files;\r\n                        this.assets = beatmap.assets;\r\n                        this.beatmap_found = true;\r\n                        break;\r\n                    }\r\n                }\r\n                if (this.beatmap_found) {\r\n                    this.__beatmap_loaded();\r\n                }\r\n                else {\r\n                    this.__look_in_db();\r\n                }\r\n            } else {\r\n                this.__look_in_db();\r\n            }\r\n        },\r\n\r\n        __look_in_db: function () {\r\n            database.get_data(database.TABLES.BEATMAPS, this.md5sum, this.__load_bm_from_db.bind(this), function (e) {\r\n                event_handler.emit(event_handler.EVENTS.DB_ERROR, e.event.error);\r\n            });\r\n        },\r\n        __load_bm_from_db: function (result) {\r\n\r\n            if (result && result.data) {\r\n                this.__beatmap = result.data;\r\n                this.map_data = this.__beatmap.parsed;\r\n                this.required_files = this.__beatmap.files;\r\n                this.__files_needed = this.__beatmap.files.slice(0);\r\n                if(this.__files_needed && this.__files_needed.length){\r\n                    var file_to_get = this.__files_needed.pop().md5sum;\r\n                    database.get_data(database.TABLES.ASSETS, file_to_get, this.__load_assets_from_db.bind(this), function (e) {\r\n                        event_handler.emit(event_handler.EVENTS.DB_ERROR, e.event.error);\r\n                    });\r\n                }\r\n                else{\r\n                    //refresh assets\r\n                    osu.webapi.tasks.checkForMapAssets(this.__beatmap.md5sum);\r\n                    this.__load_assets_from_db();\r\n                }\r\n            } else {\r\n                event_handler.emit(event_handler.EVENTS.BEATMAP_NOTFOUND, result.md5sum);\r\n            }\r\n        },\r\n        __load_assets_from_db: function (result) {\r\n            if (result && result.data) {\r\n                this.assets.push(result);\r\n            } else if(result) {\r\n                event_handler.emit(event_handler.EVENTS.ASSET_NOT_FOUND, result.md5sum)\r\n            }\r\n            if (this.__files_needed && this.__files_needed.length) {\r\n                var file_to_get = this.__files_needed.pop().md5sum;\r\n                database.get_data(database.TABLES.ASSETS, file_to_get, this.__load_assets_from_db.bind(this), function (e) {\r\n                    event_handler.emit(event_handler.EVENTS.DB_ERROR, e.event.error);\r\n                });\r\n            } else {\r\n                this.beatmap_found = true;\r\n                this.__beatmap_loaded();\r\n            }\r\n\r\n        }\r\n        ,\r\n\r\n        __beatmap_loaded: function () {\r\n            if (this.beatmap_found) {\r\n                this.__process_beatmap();\r\n                //we only call onsuccess if we have the song, if we dont the findAudio api call will call the success function\r\n                if(this.song){\r\n                    this.onsuccess(this);\r\n                }\r\n\r\n\r\n            } else {\r\n                event_handler.emit(event_handler.EVENTS.BEATMAP_NOTFOUND, this.md5sum);\r\n                this.onerror(\"beatmap not found: \" + this.md5sum);\r\n\r\n            }\r\n        },\r\n\r\n        __process_beatmap: function () {\r\n            this.song_md5sum =this.__lookup_file_md5(this.map_data.general.AudioFilename);\r\n            this.song = this.__get_asset_from_md5(this.song_md5sum);\r\n            this.background = this.__get_asset_from_md5(this.__lookup_file_md5(this.map_data.events[0][2].replace(/\"/g, '')));\r\n            this.map_name = this.map_data.metadata.Artist + \" - \" + this.map_data.metadata.Title + \" [\" + this.map_data.metadata.Version + \"]\";\r\n            this.author = this.map_data.metadata.Creator;\r\n            if(this.song_md5sum == \"f25f5aa010a42f3618aea72ed8cfceaf\" &&!this.song){\r\n                this.song = \"data/RenatusSoleily.mp3\";\r\n            }\r\n\r\n            if(!this.song){\r\n                osu.webapi.audio.findAudio(this,this.onsuccess);\r\n            }\r\n\r\n\r\n        },\r\n        __lookup_file_md5: function (filename) {\r\n            for (var i = 0; i < this.required_files.length; i++) {\r\n                if (this.required_files[i].filename == filename) {\r\n                    return this.required_files[i].md5sum;\r\n                }\r\n            }\r\n        },\r\n        __get_asset_from_md5: function (md5) {\r\n            for (var i = 0; i < this.assets.length; i++) {\r\n                if (this.assets[i].md5sum == md5) {\r\n                    return this.assets[i].data;\r\n                }\r\n            }\r\n        }\r\n};\r\n\r\n/**\r\n * difficuly_calculator.js\r\n * Created by Ugrend on 23/06/2016.\r\n *\r\n * Code ported from opsu See\r\n * https://github.com/itdelatrisu/opsu/blob/master/src/itdelatrisu/opsu/beatmap/BeatmapDifficultyCalculator.java\r\n */\r\n\r\nvar osu = osu || {};\r\nosu.beatmaps = osu.beatmaps || {};\r\n\r\nosu.beatmaps.DifficultyCalculator = class DifficultyCalculator{\r\n\r\n    static get DifficultyType() {\r\n        return Object.freeze({\r\n            SPEED: 0,\r\n            AIM: 1\r\n\r\n        });\r\n\r\n    }\r\n\r\n    constructor(parsedBeatmapData){\r\n        this.TpHitObject = class TpHitObject{\r\n\r\n\r\n\r\n            constructor(hitObject){\r\n                this.TpSlider = class TpSlider {\r\n                    constructor(hitObject){\r\n                        this.startTime = hitObject.startTime;\r\n                        this.sliderTime = (hitObject.endTime - this.startTime)/hitObject.repeatCount;\r\n                        this.curve = new osu.objects.Curve(hitObject);\r\n                    }\r\n\r\n                    getPosAtTime(time){\r\n                        var t = (time - this.startTime) / this.sliderTime;\r\n                        var floor = Math.floor(t);\r\n                        t = (floor % 2 == 0) ? t - floor : floor + 1 - t;\r\n                        return this.curve.get_point(t);\r\n                    }\r\n\r\n\r\n                };\r\n\r\n\r\n                this.DECAY_BASE = [ 0.3, 0.15 ];\r\n                this.ALMOST_DIAMETER = 90;\r\n                this.STREAM_SPACING_TRESHOLD = 110;\r\n                this.SINGLE_SPACING_TRESHOLD = 125;\r\n                this.SPACING_WEIGHT_SCALING = [1400, 26.25];\r\n                this.LAZY_SLIDER_STEP_LENGTH = 1;\r\n                this.lazySliderLengthFirst = 0;\r\n                this.lazySliderLengthSubsequent = 0;\r\n                this.strains = [ 1, 1 ];\r\n\r\n\r\n                this.hitObject = hitObject;\r\n                var scalingFactor = (52/hitObject.size);\r\n                this.normalizedStartPosition = {\r\n                    x: hitObject.x * scalingFactor,\r\n                    y: hitObject.y * scalingFactor\r\n                };\r\n                if(hitObject.is_slider){\r\n                    var slider = new this.TpSlider(hitObject);\r\n                    var sliderFollowCircleRadius = hitObject.size * 3;\r\n                    var segmentLength = slider.sliderTime;\r\n                    var segmentEndTime = segmentLength + hitObject.startTime;\r\n                    var cursorPos = {\r\n                        x: hitObject.x,\r\n                        y: hitObject.y\r\n                    };\r\n                    for (var time = hitObject.startTime + this.LAZY_SLIDER_STEP_LENGTH; time < segmentEndTime; time += this.LAZY_SLIDER_STEP_LENGTH) {\r\n                        var sliderPos = slider.getPosAtTime(time);\r\n                        var difference = {x: sliderPos.x, y: sliderPos.y};\r\n                        difference.x -= cursorPos.x;\r\n                        difference.y -= cursorPos.y;\r\n                        var distance = Math.sqrt(difference.x * difference.x + difference.y * difference.y);\r\n                        if (distance > sliderFollowCircleRadius) {\r\n                            difference.x /= distance;\r\n                            difference.y /= distance;\r\n                            distance -= sliderFollowCircleRadius;\r\n                            cursorPos.x +=difference.x * distance;\r\n                            cursorPos.y +=difference.y * distance;\r\n                            this.lazySliderLengthFirst += distance;\r\n                        }\r\n                    }\r\n                    this.lazySliderLengthFirst *= scalingFactor;\r\n                    if (hitObject.repeatCount % 2 == 1) {\r\n                        this.normalizedEndPosition = {\r\n                            x: cursorPos.x * scalingFactor,\r\n                            y: cursorPos.y * scalingFactor\r\n                        }\r\n                    }\r\n                    if(hitObject.repeatCount > 1){\r\n                        segmentEndTime += segmentLength;\r\n                        for (var time = segmentEndTime - segmentLength + this.LAZY_SLIDER_STEP_LENGTH; time < segmentEndTime; time += this.LAZY_SLIDER_STEP_LENGTH) {\r\n                            var sliderPos = slider.getPosAtTime(time);\r\n                            var difference = {x: sliderPos.x, y: sliderPos.y};\r\n                            difference.x -= cursorPos.x;\r\n                            difference.y -= cursorPos.y;\r\n                            var distance = Math.sqrt(difference.x * difference.x + difference.y * difference.y);\r\n                            if (distance > sliderFollowCircleRadius) {\r\n                                difference.x /= distance;\r\n                                difference.y /= distance;\r\n                                distance -= sliderFollowCircleRadius;\r\n                                cursorPos.x +=difference.x * distance;\r\n                                cursorPos.y +=difference.y * distance;\r\n                                this.lazySliderLengthFirst += distance;\r\n                            }\r\n                        }\r\n                        this.lazySliderLengthSubsequent *= scalingFactor;\r\n                        if (hitObject.repeatCount % 2 == 0){\r\n                            this.normalizedEndPosition = {\r\n                                x: cursorPos.x * scalingFactor,\r\n                                y: cursorPos.y * scalingFactor\r\n                            }\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n                else{\r\n                    this.normalizedEndPosition ={\r\n                        x: this.normalizedStartPosition.x,\r\n                        y: this.normalizedStartPosition.y\r\n                    };\r\n                }\r\n\r\n            }\r\n            getStrain(type){\r\n                return this.strains[type];\r\n            }\r\n\r\n            calculateStrains(previousHitObject){\r\n                this.calculateSpecificStrain(previousHitObject, osu.beatmaps.DifficultyCalculator.DifficultyType.SPEED);\r\n                this.calculateSpecificStrain(previousHitObject, osu.beatmaps.DifficultyCalculator.DifficultyType.AIM);\r\n            }\r\n\r\n            spacingWeight(distance, type) {\r\n            switch (type) {\r\n            case osu.beatmaps.DifficultyCalculator.DifficultyType.SPEED:\r\n                var weight;\r\n                if (distance > this.SINGLE_SPACING_TRESHOLD)\r\n                    weight = 2.5;\r\n                else if (distance > this.STREAM_SPACING_TRESHOLD)\r\n                    weight = 1.6 + 0.9 * (distance - this.STREAM_SPACING_TRESHOLD) / (this.SINGLE_SPACING_TRESHOLD - this.STREAM_SPACING_TRESHOLD);\r\n                else if (distance > this.ALMOST_DIAMETER)\r\n                    weight = 1.2 + 0.4 * (distance - this.ALMOST_DIAMETER) / (this.STREAM_SPACING_TRESHOLD - this.ALMOST_DIAMETER);\r\n                else if (distance > this.ALMOST_DIAMETER / 2)\r\n                    weight = 0.95 + 0.25 * (distance - (this.ALMOST_DIAMETER / 2)) / (this.ALMOST_DIAMETER / 2);\r\n                else\r\n                    weight = 0.95;\r\n                return weight;\r\n            case osu.beatmaps.DifficultyCalculator.DifficultyType.AIM:\r\n                return Math.pow(distance, 0.99);\r\n            default:\r\n                // Should never happen.\r\n                return 0;\r\n            }\r\n        }\r\n\r\n            calculateSpecificStrain(previousHitObject,type) {\r\n                var addition = 0;\r\n                var timeElapsed = this.hitObject.startTime - previousHitObject.hitObject.startTime;\r\n                var decay = Math.pow(this.DECAY_BASE[type], timeElapsed / 1000);\r\n\r\n                if (this.hitObject.is_spinner) {\r\n                    // Do nothing for spinners\r\n                } else if (this.hitObject.is_slider) {\r\n                    switch (type) {\r\n                        case osu.beatmaps.DifficultyCalculator.DifficultyType.SPEED:\r\n                            addition = this.spacingWeight(previousHitObject.lazySliderLengthFirst +\r\n                                    previousHitObject.lazySliderLengthSubsequent * (Math.max(previousHitObject.hitObject.repeatCount||0, 1) - 1) +\r\n                                    this.distanceTo(previousHitObject), type) * this.SPACING_WEIGHT_SCALING[type];\r\n                            break;\r\n\r\n                        case osu.beatmaps.DifficultyCalculator.DifficultyType.AIM:\r\n                            var spaceWeight1 = this.spacingWeight(previousHitObject.lazySliderLengthFirst, type);\r\n                            var spaceWeight2 = this.spacingWeight(previousHitObject.lazySliderLengthSubsequent, type);\r\n\r\n                            addition = (spaceWeight1 + spaceWeight2 * (Math.max(previousHitObject.hitObject.repeatCount||0, 1) - 1) +\r\n                                this.spacingWeight(this.distanceTo(previousHitObject), type)) * this.SPACING_WEIGHT_SCALING[type];\r\n                            break;\r\n                    }\r\n                } else if (this.hitObject.is_circle) {\r\n                    addition = this.spacingWeight(this.distanceTo(previousHitObject), type) * this.SPACING_WEIGHT_SCALING[type];\r\n                }\r\n\r\n                addition /= Math.max(timeElapsed, 50);\r\n\r\n                this.strains[type] = previousHitObject.strains[type] * decay + addition;\r\n\r\n            }\r\n\r\n            distanceTo(prevHitObject){\r\n                var x= this.normalizedStartPosition.x - prevHitObject.normalizedEndPosition.x;\r\n                var y= this.normalizedStartPosition.y - prevHitObject.normalizedEndPosition.y;\r\n\r\n                return Math.sqrt(x * x + y * y)\r\n            }\r\n\r\n        };\r\n\r\n        this.beatmap = parsedBeatmapData;\r\n\r\n        this.STAR_SCALING_FACTOR = 0.0675;\r\n        this.EXTREME_SCALING_FACTOR = 0.5;\r\n        this.STRAIN_STEP = 400;\r\n        this.DECAY_WEIGHT = 0.9;\r\n        this.tpHitObjects = [];\r\n        this.starRating = -1;\r\n        this.difficulties = [-1,-1];\r\n        this.stars = [-1,-1];\r\n    }\r\n\r\n    calculate(){\r\n        var circleSize = (osu.helpers.constants.OSU_GAME_WIDTH / 16) * (1 -.7 * (this.beatmap.difficulty.CircleSize - 5)/5);\r\n\r\n        for(var i = 0; i< this.beatmap.hit_objects.length; i++){\r\n            var hitObject = new osu.objects.HitObject(this.beatmap.hit_objects[i], circleSize, this.beatmap.difficulty.ApproachRate);\r\n            this.tpHitObjects.push(new this.TpHitObject(hitObject))\r\n        }\r\n        if (!this.calculateStrainValues()) {\r\n            console.log(\"Could not compute strain values. Aborting difficulty calculation.\");\r\n            return 0;\r\n        }\r\n        this.difficulties[osu.beatmaps.DifficultyCalculator.DifficultyType.SPEED] = this.calculateDifficulty(osu.beatmaps.DifficultyCalculator.DifficultyType.SPEED);\r\n        this.difficulties[osu.beatmaps.DifficultyCalculator.DifficultyType.AIM] = this.calculateDifficulty(osu.beatmaps.DifficultyCalculator.DifficultyType.AIM);\r\n\r\n        this.stars[osu.beatmaps.DifficultyCalculator.DifficultyType.SPEED] = Math.sqrt(this.difficulties[osu.beatmaps.DifficultyCalculator.DifficultyType.SPEED]) * this.STAR_SCALING_FACTOR;\r\n        this.stars[osu.beatmaps.DifficultyCalculator.DifficultyType.AIM] = Math.sqrt(this.difficulties[osu.beatmaps.DifficultyCalculator.DifficultyType.AIM  ]) * this.STAR_SCALING_FACTOR;\r\n        this.starRating = this.stars[osu.beatmaps.DifficultyCalculator.DifficultyType.SPEED] + this.stars[osu.beatmaps.DifficultyCalculator.DifficultyType.AIM] +\r\n            Math.abs(this.stars[osu.beatmaps.DifficultyCalculator.DifficultyType.SPEED] - this.stars[osu.beatmaps.DifficultyCalculator.DifficultyType.AIM]) * this.EXTREME_SCALING_FACTOR;\r\n\r\n        return this.starRating.toFixed(2);\r\n    }\r\n\r\n    calculateStrainValues() {\r\n        if (this.tpHitObjects.length == 0) {\r\n            console.log(\"Can not compute difficulty of empty beatmap.\");\r\n            return false;\r\n        }\r\n\r\n        var currentHitObject = this.tpHitObjects[0];\r\n        var  nextHitObject;\r\n        var index = 0;\r\n\r\n        while (++index < this.tpHitObjects.length) {\r\n            nextHitObject = this.tpHitObjects[index];\r\n            nextHitObject.calculateStrains(currentHitObject);\r\n            currentHitObject = nextHitObject;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    calculateDifficulty(type) {\r\n\t\tvar highestStrains = [];\r\n\t\tvar intervalEndTime = this.STRAIN_STEP;\r\n\t\tvar maximumStrain = 0;\r\n\r\n\t\tvar previousHitObject = null;\r\n\t\tfor (var i = 0; i < this.tpHitObjects.length; i++) {\r\n\t\t\tvar hitObject = this.tpHitObjects[i];\r\n\r\n\t\t\twhile (hitObject.hitObject.startTime > intervalEndTime) {\r\n\t\t\t\thighestStrains.push(maximumStrain);\r\n\r\n\t\t\t\tif (previousHitObject == null)\r\n\t\t\t\t\tmaximumStrain = 0;\r\n\t\t\t\telse {\r\n\t\t\t\t\tvar decay = Math.pow(previousHitObject.DECAY_BASE[type], (intervalEndTime - previousHitObject.hitObject.startTime) / 1000);\r\n\t\t\t\t\tmaximumStrain = previousHitObject.getStrain(type) * decay;\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tintervalEndTime += this.STRAIN_STEP;\r\n\t\t\t}\r\n\r\n\t\t\t// Obtain maximum strain\r\n\t\t\tif (hitObject.getStrain(type) > maximumStrain)\r\n\t\t\t\tmaximumStrain = hitObject.getStrain(type);\r\n\r\n\t\t\tpreviousHitObject = hitObject;\r\n\t\t}\r\n\r\n\t\tvar difficulty = 0;\r\n\t\tvar weight = 1;\r\n        var sortNum = function (a,b) {\r\n            return b-a;\r\n        };\r\n        highestStrains.sort(sortNum);\r\n\r\n        for(var i = 0 ; i < highestStrains.length; i++){\r\n            var strain = highestStrains[i];\r\n            difficulty += weight * strain;\r\n            weight *= this.DECAY_WEIGHT;\r\n        }\r\n\r\n\t\treturn difficulty;\r\n\t}\r\n\r\n\r\n\r\n};\r\n/**\r\n * calculate_replay.js\r\n * Created by Ugrend on 21/07/2016.\r\n */\r\n\r\n\r\n\r\nvar osu  = osu || {};\r\n\r\nosu.calculateReplay = function (hitobjects, replayframes, unscaledCircleSize) {\r\n    //Pre calculate replay hits on hitobjects\r\n    //returns an array of when keys were pressed at what time and if it was a hit\r\n    var isIn = function(objectPos,curPos, radius){\r\n        //check if vector is in circle/slider\r\n        var distance = Math.hypot(objectPos.x - (curPos.orig_x || curPos.x), objectPos.y - (curPos.orig_y || curPos.y))\r\n        var result = distance <= radius;\r\n        return result;\r\n    };\r\n\r\n\r\n    var replayOffset = (replayframes[2].orig_t || replayframes[2].t) *-1;\r\n    if(replayOffset < 0) replayOffset =1;\r\n    var lastFrame = 2;\r\n\r\n    var keyPresses = [];\r\n    var K1M1Down = false;\r\n    var K2M2Down = false;\r\n    var keyDown = false;\r\n    var radius = (unscaledCircleSize /2);\r\n    var M1 = false;\r\n    var M2 = false;\r\n    var K1 = false;\r\n    var K2 = false;\r\n    var SMOKE = false;\r\n\r\n\r\n\r\n    for(var i = 0; i < hitobjects.length; i++){\r\n        var hitObject = hitobjects[i];\r\n\r\n        var hitTime = hitObject.startTime;\r\n        var IS_HIT = false;\r\n        var sliderPoints = hitObject.object.ticks || [];\r\n        var repeatCount = hitObject.repeatCount || 0;\r\n        var currentRepeat = 0;\r\n\r\n        if(hitObject.is_slider){\r\n            var startPoint = {\r\n                x: hitObject.x,\r\n                y: hitObject.y,\r\n                hitCount: 1,\r\n                timesHit:0\r\n            };\r\n            var endPoint = hitObject.object.curves.points[hitObject.object.curves.points.length-1];\r\n            endPoint.hitCount = 1;\r\n            endPoint.timesHit = 0;\r\n\r\n            if(repeatCount === 0){\r\n                for(var z = 0; z< sliderPoints.length;z++){\r\n                    sliderPoints[z].hitCount = 1;\r\n                    sliderPoints[z].timesHit = 0;\r\n                }\r\n\r\n                sliderPoints.push(startPoint);\r\n                sliderPoints.push(endPoint);\r\n            }else{\r\n                //Need to work out if a object should be 'hit' twice or more for repeats\r\n\r\n            }\r\n\r\n\r\n\r\n\r\n        }\r\n\r\n        //TODO: some maps (mostly or all troll) can have sliders and circles at the same time\r\n        // so may need to take that into account later\r\n        var REPLAYHIT = false;\r\n        for(true; lastFrame < replayframes.length; lastFrame++){\r\n            var replayFrame = replayframes[lastFrame];\r\n            if(typeof replayFrame != \"object\") break; //Last frame seems to be a string\r\n            var difference = hitTime - ((replayFrame.orig_t || replayFrame.t)  -replayOffset);\r\n\r\n            if(hitObject.is_circle && difference < hitObject.hitOffset.HIT_50*-1){\r\n                break;\r\n            }else if(difference < ((hitObject.endTime - hitObject.startTime)*-1)){\r\n                break;\r\n\r\n            }\r\n\r\n            var isClick = false; // if this is a hold or click (if button is down)\r\n            M1 = false;\r\n            M2 = false;\r\n            K1 = false;\r\n            K2 = false;\r\n            SMOKE = false;\r\n\r\n\r\n            for(var j = 0 ; j < replayFrame.keys.length ; j++){\r\n                var key = replayFrame.keys[j];\r\n                if(key == osu.keypress.KEYS.M1 || key == osu.keypress.KEYS.K1){\r\n                    if(K1M1Down == false){\r\n                        isClick = true;\r\n                        K1M1Down = true;\r\n                        keyDown = true;\r\n                    }\r\n\r\n                    M1 = (key == osu.keypress.KEYS.M1);\r\n                    K1 = (key == osu.keypress.KEYS.K1);\r\n                }\r\n\r\n                if(key == osu.keypress.KEYS.M2 || key == osu.keypress.KEYS.K2){\r\n                    if(K2M2Down == false){\r\n                        isClick = true;\r\n                        K2M2Down = true;\r\n                        keyDown = true;\r\n                    }\r\n\r\n                    M2 = (key == osu.keypress.KEYS.M2);\r\n                    K2 = (key == osu.keypress.KEYS.K2);\r\n                }\r\n                if(key == osu.keypress.KEYS.SMOKE ){\r\n                    SMOKE = true;\r\n                }\r\n            }\r\n\r\n\r\n            if(!M1 && !K1){\r\n                K1M1Down = false;\r\n            }\r\n            if(!M2 && !K2){\r\n                K2M2Down = false;\r\n            }\r\n            if(!K1M1Down && !K2M2Down){\r\n                keyDown = false;\r\n            }\r\n\r\n            difference = Math.abs(difference);\r\n            var circleHit = false;\r\n            if(!hitObject.is_spinner && isClick && !IS_HIT && isIn(hitObject,replayFrame,radius)){\r\n                if(difference <= hitObject.hitOffset.HIT_300){\r\n                    //Hit is a 300\r\n                    hitObject.hitType = 'HIT_300';\r\n                    hitObject.hitTime = (replayFrame.orig_t || replayFrame.t) - replayOffset;\r\n                    IS_HIT = true;\r\n                    REPLAYHIT = true;\r\n                    circleHit = true;\r\n                }else if (difference <= hitObject.hitOffset.HIT_100){\r\n                    //Hit is a 100\r\n                    hitObject.hitType = 'HIT_100';\r\n                    hitObject.hitTime = (replayFrame.orig_t || replayFrame.t) - replayOffset;\r\n                    IS_HIT = true;\r\n                    REPLAYHIT = true;\r\n                    circleHit = true;\r\n                }else if (difference  <= hitObject.hitOffset.HIT_50){\r\n                    //Hit is a 50\r\n                    hitObject.hitType = 'HIT_50';\r\n                    hitObject.hitTime = (replayFrame.orig_t || replayFrame.t) - replayOffset;\r\n                    IS_HIT = true;\r\n                    REPLAYHIT = true;\r\n                    circleHit = true;\r\n                }else if (difference  <= hitObject.hitOffset.HIT_MISS){\r\n                    //Hit to early and is a miss\r\n                    hitObject.hitType = 'HIT_MISS';\r\n                    hitObject.hitTime = (replayFrame.orig_t || replayFrame.t) - replayOffset;\r\n                    IS_HIT = true;\r\n                    REPLAYHIT = true;\r\n                    circleHit = true;\r\n                }\r\n            }\r\n\r\n            keyPresses.push({\r\n                M1: M1,\r\n                M2: M2,\r\n                K1: K1,\r\n                K2: K2,\r\n                SMOKE: SMOKE,\r\n                REPLAYHIT: circleHit,\r\n                ID: i,\r\n                t: (replayFrame.orig_t || replayFrame.t) -replayOffset\r\n            });\r\n            \r\n            if(REPLAYHIT && hitObject.is_circle){\r\n                replayFrame++;\r\n                break;\r\n            }\r\n            //TODO: its possible to still get points after missing intial circle\r\n            if(REPLAYHIT && hitObject.is_slider){\r\n                if(hitObject.object.scoreBreak){\r\n                    replayFrame++;\r\n                    break;\r\n                }\r\n                var duration = hitObject.duration / hitObject.repeatCount+1; //how long it takes to go 1 way\r\n                var t = difference - (currentRepeat*duration);\r\n\r\n                if(t <= duration) {\r\n                    var sliderPos;\r\n                    if (currentRepeat == 0 || currentRepeat % 2 == 0) {\r\n                        sliderPos = hitObject.object.curves.get_point(t/duration); //where we should be at this point in time;\r\n                    }else{\r\n                        sliderPos = hitObject.object.curves.get_point(1-(t/duration)); //where we should be at this point in time;\r\n                    }\r\n                    //TODO: this will need to be reworked alot, just getting the idea going\r\n                    for(var z = 0; z < sliderPoints.length; z++){\r\n                        if(isIn(sliderPos,sliderPoints[z],radius*3)){\r\n                            //TODO: need to not hit the same point multiple times\r\n                            sliderPoints[z].timesHit++\r\n                        }\r\n                    }\r\n\r\n                    if(isIn(sliderPos,replayFrame,radius *3)){\r\n                        hitObject.object.scoreBreak = false;\r\n                    }else{\r\n                        var sliderBreak = false;\r\n                        for(z = 0; z < sliderPoints.length; z++){\r\n                            if(sliderPoints[z].timesHit < sliderPoints[z].hitCount){\r\n                                sliderBreak = replayFrame.t -replayOffset;\r\n                            }\r\n                        }\r\n                        hitObject.object.scoreBreak = sliderBreak;\r\n                    }\r\n\r\n                }else{\r\n                    if(repeatCount > 0){\r\n                        currentRepeat++;\r\n                        repeatCount--;\r\n                        replayFrame--; //rerun this frame\r\n                        break;\r\n                    }else{\r\n                        replayFrame++;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n            if(hitObject.is_spinner){\r\n                var centerPoint = {x:osu.helpers.constants.OSU_GAME_WIDTH/2,\r\n                    y:osu.helpers.constants.OSU_GAME_HEIGHT/2};\r\n                var angle = Math.atan2(centerPoint.y - (replayFrame.orig_y || replayFrame.y), centerPoint.x - (replayFrame.orig_x || replayFrame.x));\r\n                if(keyDown){\r\n                    hitObject.object.rotations.push({\r\n                        a: angle,\r\n                        t: (replayFrame.orig_t || replayFrame.t)\r\n                    });\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    return keyPresses;\r\n\r\n\r\n};\r\n\r\n/**\r\n * gametypes.js\r\n * Created by Ugrend on 3/06/2016.\r\n */\r\n\r\nosu = osu || {};\r\n\r\nosu.GAMETYPES = {\r\n    NORMAL: 0,\r\n    TAIKO: 1,\r\n    CTB: 2,\r\n    MANIA: 3\r\n};\r\n/**\r\n * constants.js\r\n * Created by Ugrend on 6/07/2016.\r\n */\r\n\r\nosu = osu || {};\r\nosu.helpers = osu.helpers || {};\r\nosu.helpers.constants = Object.freeze({\r\n    OSU_GAME_HEIGHT: 384,\r\n    OSU_GAME_WIDTH: 512,\r\n    DOUBLE_TIME_MULTI: 1.5,\r\n    HALF_TIME_MULTI: 0.75,\r\n    SLIDER_STEP_DISTANCE: 5,\r\n    TIMER_SONG_COLOUR: 0xB4B4B2,\r\n    TIMER_INTRO_COLOUR: 0x82FA58,\r\n    HR_DIFFICULTY_MULTI: 1.4,\r\n    EZ_DIFFICULTY_MULTI: 0.5,\r\n});\r\n/**\r\n *\r\n *\r\n * Created by Ugrend on 3/07/2016.\r\n */\r\n\r\nosu = osu || {};\r\nosu.helpers = osu.helpers || {};\r\nosu.helpers.math = {\r\n\r\n    distance: function (x1,y1,x2,y2) {\r\n        var v1 = Math.abs(x1 - x2);\r\n        var v2 = Math.abs(y1 - y2);\r\n        return Math.sqrt((v1 * v1) + (v2 * v2));\r\n    },\r\n\r\n    /*\r\n        Get angle between two vectors;\r\n     */\r\n    vectorDistance: function (v1,v2) {\r\n        return osu.helpers.math.distance(v1.x,v1.y,v2.x,v2.y);\r\n    },\r\n\r\n    angleVector: function (p1,p2) {\r\n\r\n        var xDiff = p2.x - p1.x;\r\n        var yDiff = p2.y - p1.y;\r\n        return Math.atan2(yDiff, xDiff);\r\n    }\r\n\r\n};\r\n\r\n\r\n\r\n/**\r\n * keypress.js\r\n * Created by Ugrend on 5/06/2016.\r\n */\r\n\r\nvar osu  = osu || {};\r\n\r\n/*\r\n\r\n Part\tData Type\tDescription\r\n w\tLong\tTime in milliseconds since the previous action\r\n x\tFloat\tx-coordinate of the cursor from 0 - 512\r\n y\tFloat\ty-coordinate of the cursor from 0 - 384\r\n z\tInteger\tBitwise combination of keys/mouse buttons pressed (M1 = 1, M2 = 2, K1 = 5, K2 = 10)\r\n\r\n\r\n */\r\nosu.keypress = Object.freeze({\r\n\r\n    KEYS: {\r\n        NONE : 0,\r\n        M1: 1,\r\n        M2: 2,\r\n        K1: 4,\r\n        K2: 8,\r\n        SMOKE: 16\r\n    },\r\n\r\n    //TODO: make this code less yuck\r\n    get_keys: function(keys_int){\r\n        var keys = [];\r\n        if (keys_int == 0) {\r\n            keys.push(this.KEYS.NONE);\r\n            return keys;\r\n        }\r\n        //seems k1/m1 etc are 'both' hit when k1/k2 are pressed so we need to ingore m1/m2 in that event\r\n        for (var k in this.KEYS) {\r\n            var bit = keys_int & this.KEYS[k];\r\n            if (bit == this.KEYS[k] && bit != 0) {\r\n                keys.push(this.KEYS[k]);\r\n            }\r\n        }\r\n\r\n\r\n        //remove M1/M2 if K1/K2 are present\r\n        if(keys.indexOf(this.KEYS.M1) > -1 && keys.indexOf(this.KEYS.K1) > -1){\r\n                keys.splice(keys.indexOf(this.KEYS.M1),1);\r\n        }\r\n        if(keys.indexOf(this.KEYS.M2) > -1 && keys.indexOf(this.KEYS.K2) > -1){\r\n            keys.splice(keys.indexOf(this.KEYS.M2),1);\r\n        }\r\n\r\n\r\n        return keys;\r\n    }\r\n\r\n});\r\n\r\n\r\n/**\r\n * mods.js\r\n * Created by Ugrend on 2/06/2016.\r\n */\r\n//https://osu.ppy.sh/wiki/Game_Modifiers\r\n//https://github.com/ppy/osu-api/wiki#mods\r\nvar osu  = osu || {};\r\n\r\n\r\nosu.mods = Object.freeze({\r\n\r\n    //anything higher than 4096 i don't really care about i don't think except maybe perfect?\r\n    __mods: {\r\n\r\n        NONE: {value: 0, multi: 1.0, code: \"\", name: \"No Mod\", icon: \"\"},\r\n        NO_FAIL: {value: 1, multi: 0.5, code: \"NF\", name: \"No Fail\", icon: \"selection_mod_nofail\"},\r\n        EASY: {value: 2, multi: 0.5, code: \"EZ\", name: \"Easy\", icon: \"selection_mod_easy\"},\r\n        NO_VIDEO: {value: 4, multi: 1.0, code: \"\", name: \"No Video\", icon: \"\"},\r\n        HIDDEN: {value: 8, multi: 1.06, code: \"HD\", name: \"Hidden\", icon: \"selection_mod_hidden\"},\r\n        HARD_ROCK: {value: 16, multi: 1.06, code: \"HR\", name: \"Hard Rock\", icon: \"selection_mod_hardrock\"},\r\n        SUDDEN_DEATH: {value: 32, multi: 1.0, code: \"SD\", name: \"Sudden Death\", icon: \"selection_mod_suddendeath\"},\r\n        DOUBLE_TIME: {value: 64, multi: 1.12, code: \"DT\", name: \"Double Time\", icon: \"selection_mod_doubletime\"},\r\n        RELAX: {value: 128, multi: 0, code: \"\", name: \"\", icon: \"\"},\r\n        HALF_TIME: {value: 256, multi: 0.3, code: \"HT\", name: \"Half Time\", icon: \"selection_mod_halftime\"},\r\n        NIGHT_CORE: {value: 512, multi: 1.12, code: \"NT\", name: \"Night Core\", icon: \"selection_mod_nightcore\"},\r\n        FLASH_LIGHT: {value: 1024, multi: 1.12, code: \"FL\", name: \"Flash Light\", icon: \"selection_mod_flashlight\"},\r\n        AUTO_PLAY: {value: 2048, multi: 0, code: \"\", name: \"Auto Play\", icon: \"\"},\r\n        SPUN_OUT: {value: 4096, multi: 0.9, code: \"SO\", name: \"Spun Out\", icon: \"selection_mod_spunout\"},\r\n        RELAX_2: {value: 8192, multi: 0, code: \"AP\", name: \"Auto Pilot\", icon:\"\"},\r\n        PERFECT: {value: 16384, multi: 1, code: \"PF\", name: \"Perfect\", icon:\"selection_mod_perfect\"}\r\n    },\r\n    /**\r\n     * gets used mods based on replay mod int value\r\n     * @param mod_bit_int {Number} value of replay mod output\r\n     * @returns {Array} of mods\r\n     */\r\n    getMods: function(mod_bit_int){\r\n        var mods = [];\r\n        if (mod_bit_int == 0) {\r\n            mods.push(this.__mods.NONE);\r\n            return mods;\r\n        }\r\n        for (var k in this.__mods) {\r\n            var bit = mod_bit_int & this.__mods[k].value;\r\n            if (bit == this.__mods[k].value) {\r\n                mods.push(this.__mods[k]);\r\n            }\r\n        }\r\n        return mods;\r\n    },\r\n    /**\r\n     * Gets mod based on value\r\n     * @param mod_int {Number} value of desired mod\r\n     * @returns {object} Mod object or Empty object if nothing found\r\n     */\r\n    getModFromVal: function(mod_int){\r\n        for (var k in this.__mods) {\r\n            if (this.__mods[k].value == mod_int) {\r\n                return this.__mods[k];\r\n            }\r\n        }\r\n        return {}\r\n    }\r\n});\r\n\r\n\r\n/**\r\n * circle.js\r\n * Created by Ugrend on 11/06/2016.\r\n */\r\n\r\n\r\nosu = osu || {};\r\nosu.objects = osu.objects || {};\r\nosu.objects.Circle = class Circle{\r\n    constructor(hitObject){\r\n        this.hitObject = hitObject;\r\n        this.last_draw_time = 0;\r\n        this.drawn = false;\r\n        this.destroyed = false;\r\n        this.hidden_time = this.hitObject.approachRate / 3.3;\r\n        this.beenHit = false;\r\n        this.isScoreAble = true; //just prevents the point animation from appearing\r\n        this.radius = 0;\r\n        this.missArray = [];\r\n\r\n        this.hit_numbers = {\r\n            num_0: osu.skins.resources.default_0.texture,\r\n            num_1: osu.skins.resources.default_1.texture,\r\n            num_2: osu.skins.resources.default_2.texture,\r\n            num_3: osu.skins.resources.default_3.texture,\r\n            num_4: osu.skins.resources.default_4.texture,\r\n            num_5: osu.skins.resources.default_5.texture,\r\n            num_6: osu.skins.resources.default_6.texture,\r\n            num_7: osu.skins.resources.default_7.texture,\r\n            num_8: osu.skins.resources.default_8.texture,\r\n            num_9: osu.skins.resources.default_9.texture\r\n        };\r\n\r\n    }\r\n\r\n    reset(){\r\n        //Reset the object so that it can be used again\r\n        this.last_draw_time = 0;\r\n        this.drawn = false;\r\n        this.destroyed = false;\r\n        this.beenHit = false;\r\n        this.isScoreAble = true;\r\n    }\r\n\r\n\r\n\r\n    init(){\r\n        this.radius = this.hitObject.size/2;\r\n        this.circleContainer = new PIXI.Container();\r\n        this.endCircleSprite =  new PIXI.Sprite(osu.skins.resources.hitcircle.texture);\r\n        this.endCircleSprite.tint = this.hitObject.colour;\r\n        this.endCircleSprite.anchor.set(0.5);\r\n        this.endCircleSprite.height = this.hitObject.size;\r\n        this.endCircleSprite.width = this.hitObject.size;\r\n        this.radius = this.hitObject.size /2;\r\n\r\n        if(!this.hitObject.game.is_hidden) {\r\n            this.approchCircleSprite = new PIXI.Sprite(osu.skins.resources.approachcircle.texture);\r\n            this.approchCircleSprite.tint = this.hitObject.colour;\r\n            this.approchCircleSprite.anchor.set(0.5);\r\n            this.approchCircleSprite.width = this.hitObject.size * 2.5;\r\n            this.approchCircleSprite.height = this.hitObject.size * 2.5;\r\n            this.circleContainer.addChild(this.approchCircleSprite);\r\n        }\r\n\r\n\r\n        this.circleOverlaySprite =  new PIXI.Sprite(osu.skins.resources.hitcicleoverlay.texture);\r\n        this.circleOverlaySprite.height = this.hitObject.size;\r\n        this.circleOverlaySprite.width = this.hitObject.size;\r\n        this.circleOverlaySprite.anchor.set(0.5);\r\n        this.circleContainer.addChild(this.endCircleSprite);\r\n        this.circleContainer.addChild(this.circleOverlaySprite);\r\n\r\n        var comboString = this.hitObject.combo.toString();\r\n        this.comboNumSprites = [];\r\n        for(var i = 0; i< comboString.length ; i++){\r\n            this.comboNumSprites.push(new PIXI.Sprite(this.hit_numbers[\"num_\"+comboString.charAt(i)]));\r\n        }\r\n\r\n        if(this.comboNumSprites.length > 1){\r\n            this.comboSprite1 = this.comboNumSprites[0];\r\n            this.comboSprite2 = this.comboNumSprites[1];\r\n            this.comboSprite1.x -= this.hitObject.size/10;\r\n            this.comboSprite2.x += this.hitObject.size/10;\r\n            this.comboSprite1.anchor.set(0.5);\r\n            this.comboSprite2.anchor.set(0.5);\r\n            this.circleContainer.addChild(this.comboSprite1);\r\n            this.circleContainer.addChild(this.comboSprite2);\r\n        }else{\r\n            this.comboSprite1 = this.comboNumSprites[0];\r\n            this.comboSprite1.anchor.set(0.5);\r\n            this.circleContainer.addChild(this.comboSprite1);\r\n        }\r\n        this.circleContainer.x = this.hitObject.x;\r\n        this.circleContainer.y =  this.hitObject.y;\r\n\r\n\r\n        this.hitSounds = osu.audio.HitSound.getHitSounds(this.hitObject.hitSounds,this.hitObject.timing)\r\n    }\r\n\r\n    updatePositions(){\r\n        this.circleContainer.x =  this.hitObject.x;\r\n        this.circleContainer.y =  this.hitObject.y;\r\n    }\r\n\r\n\r\n    draw(cur_time){\r\n        if(cur_time >= (this.hitObject.hitTime)){\r\n            this.hit(cur_time);\r\n        }\r\n        if(this.destroyed) {\r\n            if (!this.beenHit && cur_time > this.hitObject.startTime + this.hitObject.hitOffset.HIT_50) {\r\n                //never been hit\r\n                if (this.isScoreAble) this.hitObject.ScorePoint.displayMiss();\r\n                this.beenHit = true;\r\n            }\r\n            //object is no longer rendered but point sprite will be destroyed once this object is finished\r\n            return (cur_time < this.hitObject.startTime + 1000);\r\n        }\r\n\r\n        if(this.drawn && this.hitObject.game.is_hidden && cur_time > this.hitObject.startTime - this.hidden_time){\r\n            this.destroy();\r\n            this.destroyed = true;\r\n        }\r\n\r\n        if(!this.destroyed && cur_time > this.hitObject.startTime + 110 ){\r\n            this.destroy();\r\n            this.destroyed = true;\r\n        }\r\n\r\n        if(!this.destroyed && cur_time < this.hitObject.startTime + this.hitObject.approachRate){\r\n            if(!this.hitObject.game.is_hidden){\r\n                //dont need to calculate this so often\r\n                if(Date.now() - this.last_draw_time > 35) {\r\n                    var time_diff = this.hitObject.startTime - cur_time;\r\n                    var scale = 1 + (time_diff / this.hitObject.approachRate) * 2.5;\r\n                    if (scale < 1) scale = 1;\r\n                    this.approchCircleSprite.width = this.hitObject.size * scale;\r\n                    this.approchCircleSprite.height = this.hitObject.size * scale;\r\n                    this.last_draw_time = Date.now();\r\n                }\r\n            }\r\n            if(!this.drawn){\r\n                this.hitObject.game.hit_object_container.addChildAt(this.circleContainer,0);\r\n                this.drawn = true;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    isInCircle(pos){\r\n\r\n        var hitCirclePos = {\r\n            x: this.hitObject.x,\r\n            y: this.hitObject.y\r\n        };\r\n        var distance = osu.helpers.math.vectorDistance(hitCirclePos,pos);\r\n        var result = distance <= this.radius;\r\n        if(!result && DEBUG) this.missArray.push(\"DISTANCE: \" + distance + \"RADIUS: \" +this.radius + \"DIFFERENCE: \" + (distance-this.radius) + \"STARTIME: \"+this.hitObject.startTime\r\n            + \" X: \" + hitCirclePos.x + \" Y: \" + hitCirclePos.y);\r\n        return result\r\n    }\r\n\r\n    playHitSound(){\r\n        for(var i = 0 ; i < this.hitSounds.length ; i++){\r\n            osu.audio.sound.play_sound(this.hitSounds[i], this.hitObject.timing.volume/100);\r\n        }\r\n    }\r\n\r\n    hit(time, pos){\r\n\r\n        if(this.beenHit) {\r\n            return;\r\n        }\r\n\r\n        switch(this.hitObject.hitType){\r\n            case 'HIT_MISS':\r\n                if(this.isScoreAble) this.hitObject.ScorePoint.displayMiss();\r\n                this.beenHit = true;\r\n                break;\r\n            case 'HIT_50':\r\n                if (this.isScoreAble) this.hitObject.ScorePoint.display50();\r\n                this.playHitSound();\r\n                this.beenHit = true;\r\n                break;\r\n            case 'HIT_100':\r\n                if (this.isScoreAble) this.hitObject.ScorePoint.display100();\r\n                this.playHitSound();\r\n                this.beenHit = true;\r\n                break;\r\n            case 'HIT_300':\r\n                if (this.isScoreAble) this.hitObject.ScorePoint.display300();\r\n                this.playHitSound();\r\n                this.beenHit = true;\r\n                break;\r\n        }\r\n\r\n\r\n\r\n/*\r\n        var difference = this.hitObject.startTime - time;\r\n        if(this.isInCircle(this.hitObject.game.getCursorPos())) {\r\n            if (difference > this.hitObject.hitOffset.HIT_MISS) {\r\n                return;\r\n            }\r\n            if (difference < this.hitObject.hitOffset.HIT_MISS && difference > this.hitObject.hitOffset.HIT_50) {\r\n                //miss\r\n                if (this.isScoreAble) this.hitObject.ScorePoint.displayMiss();\r\n                this.beenHit = true;\r\n            }\r\n            if (difference < this.hitObject.hitOffset.HIT_50 && difference > this.hitObject.hitOffset.HIT_100) {\r\n                //hit50\r\n                if (this.isScoreAble) this.hitObject.ScorePoint.display50();\r\n                this.playHitSound();\r\n                this.beenHit = true;\r\n            }\r\n            if (difference < this.hitObject.hitOffset.HIT_100 && difference > this.hitObject.hitOffset.HIT_300) {\r\n                //hit100\r\n                if (this.isScoreAble) this.hitObject.ScorePoint.display100();\r\n                this.playHitSound();\r\n                this.beenHit = true;\r\n            }\r\n            if (difference < this.hitObject.hitOffset.HIT_300 && time <= this.hitObject.startTime) {\r\n                //hit300\r\n                if (this.isScoreAble) this.hitObject.ScorePoint.display300();\r\n                this.playHitSound();\r\n                this.beenHit = true;\r\n\r\n            }\r\n        }\r\n\r\n        if(this.beenHit){\r\n          //  this.destroy();\r\n        }\r\n        */\r\n    }\r\n\r\n    destroy(){\r\n        this.hitObject.game.hit_object_container.removeChild(this.circleContainer);\r\n    }\r\n\r\n};\r\n\r\n/**\r\n * curves.js\r\n * Created by Ugrend on 11/07/2016.\r\n */\r\n\r\nosu = osu || {};\r\nosu.objects = osu.objects || {};\r\nosu.objects.curves = osu.objects.curves || {};\r\nosu.objects.curves.TYPES = Object.freeze({\r\n    BEZIER: \"B\",\r\n    LINEAR: \"L\",\r\n    PASSTHROUGH: \"P\",\r\n    CATMULL: \"C\"\r\n});\r\n\r\nosu.objects.Curve = class Curve {\r\n\r\n    constructor(hitObject){\r\n        this.startPoint ={x: hitObject.x, y: hitObject.y };\r\n        this.controllPoints = hitObject.points;\r\n        this.type = hitObject.sliderType;\r\n        this.points = [];\r\n        switch(this.type){\r\n            case osu.objects.curves.TYPES.LINEAR:\r\n                this.__generate_linear();\r\n                break;\r\n            case osu.objects.curves.TYPES.BEZIER:\r\n                this.__generate_beizer();\r\n                break;\r\n            case osu.objects.curves.TYPES.PASSTHROUGH:\r\n                this.__generate_passthrough();\r\n                break;\r\n            default:\r\n                this.__generate_beizer();\r\n                console.log(\"Unknown slider type\")\r\n        }\r\n\r\n        for(var i = 0; i < this.points.length-1;i++){\r\n            var currentPoint = this.points[i];\r\n            var nextPoint = this.points[i+1];\r\n            var xDiff = nextPoint.x - currentPoint.x;\r\n            var yDiff = nextPoint.y - currentPoint.y;\r\n            var angle = Math.atan2(yDiff, xDiff);\r\n            this.points[i].angle = angle;\r\n            if(i+1 == this.points.length-1){\r\n                this.points[i+1].angle = angle;\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n    /*\r\n     * Gets point at given percentage/time;\r\n     */\r\n    get_point(t) {\r\n        //TODO: could do passthrough/circle curves more accurately\r\n        var point = Math.round((this.points.length-1) * t);\r\n        if(point >= this.points.length){\r\n            return this.points[this.points.length-1]\r\n        }\r\n        return this.points[point];\r\n    }\r\n\r\n\r\n    __generate_linear(){\r\n        //generate linear with bezier, add the startpoints as a controll point which will cause a straight line\r\n        this.controllPoints.unshift(this.startPoint);\r\n        this.__generate_beizer();\r\n    }\r\n    /*\r\n     * Generates a bezier curve slider (also used for linear sliders)\r\n     *\r\n     * How the Bezier sliders seem to work is that it will split them into seperate curves\r\n     * This split is indicated by a duplicate value\r\n     */\r\n    __generate_beizer(){\r\n        var beziers = [];\r\n        var cP = [];\r\n        var lastP = false;\r\n        for(var i = -1; i < this.controllPoints.length; i++){\r\n            var tPos;\r\n            if(i==-1) {\r\n                //The starter point is not in the initial point array so we start manually from it\r\n                tPos = this.startPoint;\r\n            }else{\r\n                tPos = this.controllPoints[i];\r\n            }\r\n            //this checks if the last point is same as the next point\r\n            //if it is the same it indicates the end of controll points for the bezier\r\n            //If there are less than two in the controllpoints we just drop it completly\r\n            if(lastP && tPos.x == lastP.x && tPos.y == lastP.y){\r\n                if(cP.length >1){\r\n                    beziers.push(new Bezier(cP))\r\n                }\r\n                cP.splice(0);\r\n            }\r\n            cP.push(tPos);\r\n            lastP = tPos;\r\n        }\r\n        if(cP.length >1){\r\n            beziers.push(new Bezier(cP));\r\n        }\r\n\r\n        for(i = 0; i< beziers.length; i++){\r\n            var distance = 0;\r\n            var compute_value = 0;\r\n            var startingPoint = beziers[i].compute(0);\r\n            var p = [startingPoint];\r\n            while(distance < osu.helpers.constants.SLIDER_STEP_DISTANCE){\r\n                compute_value += 0.00001;\r\n                var point = beziers[i].compute(compute_value);\r\n                distance = osu.helpers.math.distance(startingPoint.x, startingPoint.y, point.x,point.y);\r\n\r\n            }\r\n            var t = compute_value;\r\n            while(t <= 1){\r\n                p.push(beziers[i].compute(t));\r\n                t += compute_value;\r\n            }\r\n            if(t>1){\r\n                p.push(beziers[i].compute(1));\r\n            }\r\n            this.points = this.points.concat(p);\r\n        }\r\n\r\n\r\n    }\r\n\r\n    __generate_passthrough(){\r\n\r\n        var getPoint = function (angle,radius) {\r\n            var x = (Math.cos(angle) * radius);\r\n            var y = (Math.sin(angle) * radius);\r\n            return {x:x,y:y}\r\n        };\r\n        var lerp = function(ang1,ang2,t){\r\n            return ang1 * (1 - t) + ang2 * t;\r\n        };\r\n        var isMidBetween = function (a,b,c) {\r\n            return (b > a && b < c) || (b < a && b > c);\r\n        };\r\n\r\n        var  circumcircle = function(p1, p2, p3) {\r\n            var x,y,r;\r\n            var A = p2.x - p1.x,\r\n                B = p2.y - p1.y,\r\n                C = p3.x - p1.x,\r\n                D = p3.y - p1.y,\r\n                E = A * (p1.x + p2.x) + B * (p1.y + p2.y),\r\n                F = C * (p1.x + p3.x) + D * (p1.y + p3.y),\r\n                G = 2 * (A * (p3.y - p2.y) - B * (p3.x - p2.x)),\r\n                minx, miny, dx, dy;\r\n            if(Math.abs(G) < 0.000001) {\r\n                minx = Math.min(p1.x, p2.x, p3.x);\r\n                miny = Math.min(p1.y, p2.y, p3.y);\r\n                dx   = (Math.max(p1.x, p2.x, p3.x) - minx) * 0.5;\r\n                dy   = (Math.max(p1.y, p2.y, p3.y) - miny) * 0.5;\r\n                x = minx + dx;\r\n                y = miny + dy;\r\n                r = Math.sqrt(dx * dx + dy * dy);\r\n            }\r\n            else {\r\n                x = (D*E - B*F) / G;\r\n                y = (A*F - C*E) / G;\r\n                dx = x - p1.x;\r\n                dy = y - p1.y;\r\n                r = Math.sqrt(dx * dx + dy * dy);\r\n            }\r\n            return {x: x, y:y, r: r};\r\n        };\r\n\r\n\r\n\r\n        var centerCircle = circumcircle(this.startPoint,\r\n            this.controllPoints[0],this.controllPoints[1]);\r\n\r\n        var xDiff = this.startPoint.x - centerCircle.x;\r\n        var yDiff = this.startPoint.y - centerCircle.y;\r\n        var startAngle = Math.atan2(yDiff, xDiff);\r\n        xDiff = this.controllPoints[0].x - centerCircle.x;\r\n        yDiff = this.controllPoints[0].y - centerCircle.y;\r\n        var middleAngle = Math.atan2(yDiff, xDiff);\r\n        xDiff = this.controllPoints[1].x - centerCircle.x;\r\n        yDiff = this.controllPoints[1].y - centerCircle.y;\r\n        var endAngle = Math.atan2(yDiff, xDiff);\r\n\r\n\r\n        //code from opsu https://github.com/itdelatrisu/opsu\r\n        //https://github.com/itdelatrisu/opsu/blob/master/src/itdelatrisu/opsu/objects/curves/CircumscribedCircle.java#L90\r\n        var TWO_PI  =  Math.PI * 2;\r\n        if (!isMidBetween(startAngle, middleAngle, endAngle)) {\r\n            if (Math.abs(startAngle + TWO_PI - endAngle) < TWO_PI && isMidBetween(startAngle + (TWO_PI), middleAngle, endAngle))\r\n                startAngle += TWO_PI;\r\n            else if (Math.abs(startAngle - (endAngle + TWO_PI)) < TWO_PI && isMidBetween(startAngle, middleAngle, endAngle + (TWO_PI)))\r\n                endAngle += TWO_PI;\r\n            else if (Math.abs(startAngle - TWO_PI - endAngle) < TWO_PI && isMidBetween(startAngle - (TWO_PI), middleAngle, endAngle))\r\n                startAngle -= TWO_PI;\r\n            else if (Math.abs(startAngle - (endAngle - TWO_PI)) < TWO_PI && isMidBetween(startAngle, middleAngle, endAngle - (TWO_PI)))\r\n                endAngle -= TWO_PI;\r\n            else\r\n                console.log('Cannot find angles between midAng '+ startAngle + \" \" + middleAngle +\" \" + endAngle);\r\n        }\r\n\r\n\r\n\r\n        var t = 0;\r\n        while(t<=1){\r\n            var angle = lerp(startAngle,endAngle,t);\r\n            var point = getPoint(angle,centerCircle.r);\r\n            point.x += centerCircle.x;\r\n            point.y += centerCircle.y;\r\n            this.points.push(point);\r\n            t+=0.01;\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n};\r\n/**\r\n * followpoint.js\r\n * Created by Ugrend on 6/07/2016.\r\n */\r\nosu = osu || {};\r\nosu.objects = osu.objects || {};\r\nosu.objects.FollowPoint = class FollowPoint{\r\n    constructor(hitObject1, hitObject2){\r\n        this.hitObject1 = hitObject1;\r\n        this.hitObject2 = hitObject2;\r\n        this.drawn = false;\r\n        this.destroyed = false;\r\n    }\r\n\r\n    init(){\r\n        this.x1 = this.hitObject1.endX || this.hitObject1.x;\r\n        this.y1 = this.hitObject1.endY  || this.hitObject1.y;\r\n        this.x2 = this.hitObject2.x;\r\n        this.y2 = this.hitObject2.y;\r\n\r\n        this.drawTime = this.hitObject1.endTime  || this.hitObject1.startTime;\r\n        this.drawTime -= this.hitObject1.approachRate/2;\r\n        var xDiff = this.x2 - this.x1;\r\n        var yDiff = this.y2 - this.y1;\r\n        var angle = Math.atan2(yDiff, xDiff);\r\n        var distance = osu.helpers.math.distance(this.x1, this.y1, this.x2, this.y2);\r\n        var numPoints = Math.round(distance / (this.hitObject1.size/1.5));\r\n        var steps = 1/(numPoints+1);\r\n        var nextStep = steps;\r\n        this.followPointContainer = new PIXI.Container();\r\n        var arrowTexture = osu.skins.resources.followpoint.texture;\r\n        for(var i = 0 ; i < numPoints; i++){\r\n            var arrowSprite = new PIXI.Sprite(arrowTexture);\r\n\r\n            arrowSprite.rotation = angle;\r\n            arrowSprite.position.x = this.x1 + (xDiff * nextStep);\r\n            arrowSprite.position.y = this.y1 + (yDiff * nextStep);\r\n            this.followPointContainer.addChild(arrowSprite);\r\n            nextStep += steps;\r\n        }\r\n    }\r\n\r\n    reset(){\r\n        this.destroyed = false;\r\n        this.drawn = false;\r\n    }\r\n\r\n\r\n    draw(cur_time){\r\n        if(this.destroyed){\r\n            return false;\r\n        }\r\n\r\n        if(!this.drawn && cur_time >= this.drawTime){\r\n            this.hitObject1.game.hit_object_container.addChildAt(this.followPointContainer,0);\r\n            this.drawn = true;\r\n            return true;\r\n        }\r\n        if(!this.destroyed && cur_time > this.hitObject2.startTime){\r\n            this.destroy();\r\n            this.destroyed = true;\r\n        }\r\n\r\n\r\n        return true;\r\n    }\r\n    destroy(){\r\n        this.hitObject1.game.hit_object_container.removeChild(this.followPointContainer);\r\n    }\r\n\r\n};\r\n\r\n\r\n/**\r\n *\r\n *\r\n * Created by Ugrend on 18/07/2016.\r\n */\r\nosu = osu || {};\r\nosu.objects = osu.objects || {};\r\n\r\nosu.objects.HitObjectParser = {\r\n    TYPES: {\r\n        CIRCLE: 1,\r\n        SLIDER: 2,\r\n        NEW_COMBO: 4,\r\n        SPINNER: 8,\r\n    },\r\n\r\n    HIT_SOUNDS: {\r\n        SOUND_NORMAL: 0,\r\n        SOUND_WHISTLE: 2,\r\n        SOUND_FINISH: 4,\r\n        SOUND_CLAP: 8,\r\n    },\r\n    HIT_ADDITIONS: {\r\n        NORMAL: 1,\r\n        SOFT: 2,\r\n        DRUM: 3,\r\n    },\r\n\r\n\r\n    parse_type: function (hitObjectInt) {\r\n        var newCombo = false;\r\n        if ((hitObjectInt & this.TYPES.NEW_COMBO)) {\r\n            newCombo = true;\r\n        }\r\n        if ((hitObjectInt & osu.objects.HitObjectParser.TYPES.CIRCLE)) {\r\n            return {type: this.TYPES.CIRCLE, new_combo: newCombo}\r\n        }\r\n        if ((hitObjectInt & osu.objects.HitObjectParser.TYPES.SLIDER)) {\r\n            return {type: this.TYPES.SLIDER, new_combo: newCombo}\r\n        }\r\n        if ((hitObjectInt & osu.objects.HitObjectParser.TYPES.SPINNER)) {\r\n            return {type: this.TYPES.SPINNER, new_combo: newCombo}\r\n        }\r\n    },\r\n    parse_line: function (line, timing, sliderMulti) {\r\n\r\n        var get_timing_point = function (offset) {\r\n            for(var i = timing.length -1 ; i >=0 ; i--){\r\n                if(timing[i].offset <= offset)  return timing[i];\r\n            }\r\n            return timing[0];\r\n        };\r\n\r\n        var parse_additions = function (strAdditions) {\r\n            if(!strAdditions) return {};\r\n            var additions = {};\r\n            var adds = strAdditions.split(\":\");\r\n            if(adds.length > 0){\r\n                additions.sample = +adds[0];\r\n            }\r\n            if(adds.length > 1){\r\n                additions.additionalSample = +adds[1];\r\n            }\r\n            if(adds.length > 2){\r\n                additions.customSampleIndex = +adds[2];\r\n            }\r\n            if(adds.length > 3){\r\n                additions.hitSoundVolume = +adds[3];\r\n            }\r\n            if(adds.length > 4){\r\n                additions.hitsound = +adds[4];\r\n            }\r\n\r\n            return additions;\r\n        };\r\n\r\n        var hitObject = {};\r\n\r\n        var hitArray = line.split(',');\r\n\r\n        var type = this.parse_type(+hitArray[3]);\r\n\r\n        hitObject.x = +hitArray[0];\r\n        hitObject.y = +hitArray[1];\r\n        hitObject.startTime = +hitArray[2];\r\n        hitObject.type = type.type;\r\n        hitObject.newCombo = type.new_combo;\r\n        hitObject.hitSounds = [];\r\n        hitObject.timing = get_timing_point(hitObject.startTime);\r\n        hitObject.is_slider = false;\r\n        hitObject.is_circle = false;\r\n        hitObject.is_spinner = false;\r\n\r\n        var soundByte = +hitArray[4];\r\n        if ((soundByte & this.HIT_SOUNDS.SOUND_WHISTLE) == this.HIT_SOUNDS.SOUND_WHISTLE)\r\n            hitObject.hitSounds.push(this.HIT_SOUNDS.SOUND_WHISTLE);\r\n        if ((soundByte & this.HIT_SOUNDS.SOUND_FINISH) == this.HIT_SOUNDS.SOUND_FINISH)\r\n            hitObject.hitSounds.push(this.HIT_SOUNDS.SOUND_FINISH);\r\n        if ((soundByte & this.HIT_SOUNDS.SOUND_CLAP) == this.HIT_SOUNDS.SOUND_CLAP)\r\n            hitObject.hitSounds.push(this.HIT_SOUNDS.SOUND_CLAP);\r\n        if (hitObject.hitSounds.length === 0)\r\n            hitObject.hitSounds.push(this.HIT_SOUNDS.SOUND_NORMAL);\r\n\r\n\r\n        if (hitObject.type == this.TYPES.CIRCLE) {\r\n            hitObject.is_circle = true;\r\n            hitObject.additions = parse_additions(hitArray[5]);\r\n        }\r\n        if (hitObject.type == this.TYPES.SPINNER) {\r\n            hitObject.is_spinner = true;\r\n            hitObject.endTime = +hitArray[5];\r\n            hitObject.additions = +hitArray[6];\r\n        }\r\n        if (hitObject.type == this.TYPES.SLIDER) {\r\n            hitObject.is_slider = true;\r\n            var sliderData = hitArray[5].split(\"|\");\r\n            hitObject.sliderType = sliderData[0];\r\n            hitObject.repeatCount = +hitArray[6];\r\n            hitObject.pixelLength = +hitArray[7];\r\n            hitObject.additions = parse_additions(hitArray[10]);\r\n            hitObject.edges =[];\r\n            var sounds    = [];\r\n            var additions = [];\r\n            if (hitArray[8])  sounds = hitArray[8].split('|');\r\n            if (hitArray[9])  additions = hitArray[9].split('|');\r\n            for (var x = 0; x < hitObject.repeatCount+1 ; x++) {\r\n                var edge = {\r\n                    sounds: [],\r\n                    additions: parse_additions(additions[x])\r\n                };\r\n\r\n                if (sounds[x]) {\r\n                    soundByte = sounds[x];\r\n                    //TODO: function this\r\n                    if ((soundByte & this.HIT_SOUNDS.SOUND_WHISTLE) == this.HIT_SOUNDS.SOUND_WHISTLE)\r\n                        edge.sounds.push(this.HIT_SOUNDS.SOUND_WHISTLE);\r\n                    if ((soundByte & this.HIT_SOUNDS.SOUND_FINISH) == this.HIT_SOUNDS.SOUND_FINISH)\r\n                        edge.sounds.push(this.HIT_SOUNDS.SOUND_FINISH);\r\n                    if ((soundByte & this.HIT_SOUNDS.SOUND_CLAP) == this.HIT_SOUNDS.SOUND_CLAP)\r\n                        edge.sounds.push(this.HIT_SOUNDS.SOUND_CLAP);\r\n                    if (hitObject.hitSounds.length === 0)\r\n                        edge.sounds.push(this.HIT_SOUNDS.SOUND_NORMAL);\r\n                } else {\r\n                    edge.sounds.push(this.HIT_SOUNDS.SOUND_NORMAL);\r\n                }\r\n\r\n                hitObject.edges.push(edge);\r\n            }\r\n\r\n            hitObject.points = [];\r\n            for(var i = 1; i < sliderData.length; i++){\r\n                var points = sliderData[i].split(\":\");\r\n                hitObject.points.push({x:+points[0], y:+points[1]});\r\n            }\r\n\r\n\r\n            var beats = (hitObject.pixelLength * hitObject.repeatCount) /(100*sliderMulti)\r\n            hitObject.duration = Math.ceil(beats * hitObject.timing.millisecondsPerBeat);\r\n            hitObject.endTime = hitObject.startTime + hitObject.duration;\r\n\r\n        }\r\n\r\n\r\n        return hitObject;\r\n    },\r\n\r\n\r\n    //https://gist.github.com/peppy/1167470\r\n    create_stacks: function (hitobjects, stackLeniency, circleSize, hardrock) {\r\n        for (var i = hitobjects.length - 1; i > 0; i--) {\r\n            var hitObjectI = hitobjects[i];\r\n            if (hitObjectI.stack != 0 || hitObjectI.type == osu.objects.HitObjectParser.TYPES.SPINNER) continue;\r\n\r\n            if (hitObjectI.type == osu.objects.HitObjectParser.TYPES.CIRCLE) {\r\n                for (var n = i - 1; n >= 0; n--) {\r\n                    var hitObjectN = hitobjects[n];\r\n                    if (hitObjectN.type == osu.objects.HitObjectParser.TYPES.SPINNER) continue;\r\n\r\n                    var timeI = hitObjectI.startTime - (1000 * stackLeniency); //convert to miliseconds\r\n                    var timeN = hitObjectN.startTime;\r\n                    if (timeI > timeN) break;\r\n\r\n                    var distance = osu.helpers.math.distance(hitObjectI.x, hitObjectI.y, hitObjectN.x, hitObjectN.y);\r\n                    if (distance < 3) {\r\n                        hitObjectN.stack = hitObjectI.stack + 1;\r\n                        hitObjectI = hitObjectN;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        for (i = 0; i < hitobjects.length; i++) {\r\n            var hitObject = hitobjects[i];\r\n            var stack = hitObject.stack;\r\n            var offset = (stack * (circleSize * 0.05));\r\n            var x = hitObject.x - offset;\r\n            var y = hitObject.y - offset;\r\n            if (hardrock)\r\n                y = y + offset;\r\n\r\n            hitObject.x = x;\r\n            hitObject.y = y;\r\n        }\r\n\r\n\r\n\r\n    },\r\n\r\n    initialiseHitObjects: function (hitobjects) {\r\n        for(var i = 0; i < hitobjects.length; i++){\r\n            hitobjects[i].init();\r\n        }\r\n\r\n    },\r\n\r\n    calculate_follow_points: function (hitobjects, game) {\r\n\r\n        for(var i = 0; i < hitobjects.length -1; i++){\r\n            var hitObject1 = hitobjects[i];\r\n            var hitObject2 = hitobjects[i+1];\r\n            if (hitObject1.type == osu.objects.HitObjectParser.TYPES.SPINNER) continue;\r\n            if (hitObject2.type == osu.objects.HitObjectParser.TYPES.SPINNER) continue;\r\n            if(hitObject2.newCombo) continue;\r\n\r\n            var startX = game.calculate_original_x(hitObject1.endX || hitObject1.x);\r\n            var startY = game.calculate_original_y(hitObject1.endY || hitObject1.y);\r\n            var endX = game.calculate_original_x(hitObject2.x);\r\n            var endY = game.calculate_original_y(hitObject2.y);\r\n            var distance = osu.helpers.math.distance(startX,startY,endX,endY);\r\n            if(distance > 50){\r\n                hitObject1.followPoint = new osu.objects.FollowPoint(hitObject1, hitObject2);\r\n                hitObject1.followPoint.init();\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n};\r\n/**\r\n * hitobjects.js\r\n * Created by Ugrend on 17/06/2016.\r\n */\r\n\r\nosu = osu || {};\r\nosu.objects = osu.objects || {};\r\n\r\nosu.objects.HitObject = class HitObject{\r\n    constructor(hitObjectData, size, approachRate, game){\r\n        this._x = 0;\r\n        this._y = 0;\r\n        this.game = game || false;\r\n        this.combo = 1;\r\n        this.colour = 0xFFFFFF;\r\n        this.stack = 0;\r\n        this.size = size;\r\n        this.approachRate = approachRate;\r\n        this.followPoint = false;\r\n        this.drawn = false;\r\n        //these are defaults that should be overridden by the game\r\n        this.hitOffset = {\r\n            HIT_300: 79.5,\r\n            HIT_100: 139.5,\r\n            HIT_50: 199.5,\r\n            HIT_MISS: 500\r\n        };\r\n\r\n        this.destroyed = false;\r\n        $.extend(this, hitObjectData);\r\n\r\n\r\n        this.hitType = 'HIT_MISS';\r\n        this.hitTime = this.startTime;\r\n        if(this.game && this.game.is_hardrock) this._y = 384 - this._y;\r\n        switch (this.type){\r\n            case osu.objects.HitObjectParser.TYPES.CIRCLE:\r\n                this.object = new osu.objects.Circle(this);\r\n                break;\r\n            case osu.objects.HitObjectParser.TYPES.SLIDER:\r\n                this.object = new osu.objects.Slider(this);\r\n                break;\r\n            case osu.objects.HitObjectParser.TYPES.SPINNER:\r\n                this.object = new osu.objects.Spinner(this);\r\n        }\r\n        this.initialised = false;\r\n    }\r\n    set x(v){\r\n        this._x = v;\r\n        if(this.initialised) this.object.updatePositions();\r\n    };\r\n    get x() { return this._x}\r\n    set y(v){\r\n        this._y = v;\r\n        if(this.initialised) this.object.updatePositions();\r\n    };\r\n    get y() { return this._y}\r\n\r\n    init(){\r\n        if(!this.game){\r\n            throw \"Cannot Intialise object without game object!\";\r\n        }\r\n        this.x = this.game.calculate_x(this.x);\r\n        this.y = this.game.calculate_y(this.y);\r\n        this.drawn = false;\r\n\r\n\r\n\r\n\r\n        this.object.init();\r\n        //endX/Y will get intiatied by a slider else just use hitObject x\r\n        this.ScorePoint = new osu.objects.ScorePoint(this.endX||this.x,this.endY||this.y, this.game);\r\n\r\n\r\n        this.initialised = true;\r\n    }\r\n\r\n    reset(){\r\n        this.destroyed = false;\r\n        this.drawn = false;\r\n        this.object.reset();\r\n        if(this.followPoint){\r\n            this.followPoint.reset();\r\n        }\r\n    }\r\n\r\n    destroy(){\r\n        this.destroyed = true;\r\n    }\r\n\r\n    draw(cur_time){\r\n        if(this.destroyed) return false;\r\n        if(!this.drawn){\r\n            this.game.hit_object_container.addChild(this.ScorePoint.getContainer());\r\n            this.drawn = true;\r\n        }\r\n\r\n        var followResult = false;\r\n        if(this.followPoint){\r\n            followResult = this.followPoint.draw(cur_time);\r\n        }\r\n        var drawResult = this.object.draw(cur_time);\r\n        if(!drawResult){\r\n            this.game.hit_object_container.removeChild(this.ScorePoint.getContainer());\r\n        }\r\n\r\n        return drawResult ||  followResult;\r\n    }\r\n\r\n    hit(cur_time, pos){\r\n        return this.object.hit(cur_time, pos);\r\n    }\r\n\r\n\r\n};\r\n/**\r\n *\r\n *\r\n * Created by Ugrend on 18/07/2016.\r\n */\r\n\r\n//TODO: support animation\r\n\r\nosu = osu || {};\r\nosu.objects = osu.objects || {};\r\nosu.objects.ScorePoint = class ScorePoint {\r\n\r\n    constructor(x,y,game){\r\n        this.game = game;\r\n        this.hit300Sprite = new PIXI.Sprite(osu.skins.resources.hit300_0 && osu.skins.resources.hit300_0.texture || osu.skins.resources.hit300.texture);\r\n        this.hit100Sprite = new PIXI.Sprite(osu.skins.resources.hit100_0 && osu.skins.resources.hit100_0.texture || osu.skins.resources.hit100.texture);\r\n        this.hit50Sprite = new PIXI.Sprite(osu.skins.resources.hit50_0 && osu.skins.resources.hit50_0.texture || osu.skins.resources.hit50.texture);\r\n        this.hitMissSprite = new PIXI.Sprite(osu.skins.resources.hit0_0 && osu.skins.resources.hit0_0.texture || osu.skins.resources.hit0.texture);\r\n\r\n        this.hit300Sprite.visible = false;\r\n        this.hit100Sprite.visible = false;\r\n        this.hit50Sprite.visible = false;\r\n        this.hitMissSprite.visible = false;\r\n\r\n        this.hitContainer = new PIXI.Container();\r\n        this.hitContainer.addChild(this.hit300Sprite);\r\n        this.hitContainer.addChild(this.hit100Sprite);\r\n        this.hitContainer.addChild(this.hit50Sprite);\r\n        this.hitContainer.addChild(this.hitMissSprite);\r\n\r\n        this.hitContainer.position.x = x;\r\n        this.hitContainer.position.y = y;\r\n    }\r\n\r\n    getContainer(){\r\n        return this.hitContainer;\r\n    }\r\n\r\n    display300(){\r\n        this.hit300Sprite.visible = true;\r\n        this.game.performance.add300();\r\n    }\r\n    display100(){\r\n        this.hit100Sprite.visible = true;\r\n        this.game.performance.add100();\r\n    }\r\n    display50(){\r\n        this.hit50Sprite.visible = true;\r\n        this.game.performance.add50();\r\n    }\r\n    displayMiss(){\r\n        this.hitMissSprite.visible = true;\r\n        this.game.performance.addMiss();\r\n    }\r\n};\r\n/**\r\n * slider.js\r\n * Created by Ugrend on 11/06/2016.\r\n */\r\n\r\n\r\n\r\nosu = osu || {};\r\nosu.objects = osu.objects || {};\r\nosu.objects.Slider = class Slider{\r\n    constructor(hitObject){\r\n        //TODO: fix sliderFollowTexture\r\n        //Should do this better however we only really need to load these once, it would be inefficient to load the textures over and over for every slider\r\n        if(!osu.objects.ballTextures){\r\n            osu.objects.ballTextures = [];\r\n            if(osu.skins.resources.sliderb0){\r\n                for(var i = 0; i < 99; i++){\r\n                    if(osu.skins.resources[\"sliderb\"+i]){\r\n                        osu.objects.ballTextures.push(osu.skins.resources[\"sliderb\"+i].texture);\r\n                    }else{\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        this.hitObject = hitObject;\r\n        this.last_draw_time  =0;\r\n        this.drawn = false;\r\n        this.destroyed = false;\r\n        this.initialised = false;\r\n        /*this is just used if we need to move the slider,\r\n        once generated the x,y coords of the slider will differ from the hitObject x,y\r\n        storing the originals will allow to move the slider by the difference\r\n         */\r\n        this.originalX = this.hitObject.x;\r\n        this.originalY = this.hitObject.y;\r\n        this.hidden_time = this.hitObject.approachRate / 3.3;\r\n        this.sliderDirectionBackwards = false;\r\n        this.drawnFollow = false;\r\n        this.followDestroyed = false;\r\n        this.totalTime = (this.hitObject.endTime - this.hitObject.startTime);\r\n        this.timePerRepeat = this.totalTime / this.hitObject.repeatCount;\r\n        this.nextRepeatTime = 0;\r\n        this.hitSounds = [];\r\n        this.repeatCount = this.hitObject.repeatCount;\r\n        var points = this.hitObject.points;\r\n        //for replay calcs\r\n        if(this.hitObject.game.is_hardrock){\r\n            for(var i = 0 ; i < points.length ; i++){\r\n                points[i].y = osu.helpers.constants.OSU_GAME_HEIGHT - points[i].y;\r\n            }\r\n        }\r\n        this.curves = new osu.objects.Curve(this.hitObject);\r\n        this.ticks = [];\r\n        this.tickPositions = [];\r\n        var  tickLengthDiv = this.hitObject.timing.millisecondsPerBeat / this.hitObject.game.sliderMultiplier / this.hitObject.game.sliderTickRate;\r\n        var sliderDuration = this.hitObject.duration / this.hitObject.repeatCount; //We only need to place the points once\r\n        var  tickCount =  Math.ceil(sliderDuration / tickLengthDiv) - 1;\r\n        if (tickCount > 0) {\r\n            var tickTOffset = 1 / (tickCount + 1);\r\n            var  t = tickTOffset;\r\n            for (i = 0; i < tickCount; i++, t += tickTOffset){\r\n                this.ticks.push(t)\r\n            }\r\n            for (i = 0; i < this.ticks.length; i++) {\r\n                var tickLoc = this.curves.get_point(this.ticks[i]);\r\n                this.tickPositions.push(tickLoc);\r\n            }\r\n\r\n        }\r\n        this.scoreBreak = false; //if the slider has been exited early\r\n\r\n    }\r\n\r\n    reset(){\r\n        //Reset the object so that it can be used again\r\n        this.beenHit = false;\r\n        this.sliderFollowContainer.visible = true;\r\n        this.nextRepeatTime = 0;\r\n        this.sliderDirectionBackwards = false;\r\n        this.repeatCount = this.hitObject.repeatCount;\r\n        this.startCircle.reset();\r\n        this.startCircle.isScoreAble = false;\r\n        this.drawnFollow = false;\r\n        this.drawn = false;\r\n        this.destroyed = false;\r\n        this.last_draw_time  =0;\r\n        this.hitSounds = [];\r\n        for(var i = 0 ; i < this.hitObject.edges.length;i++){\r\n            this.hitSounds.push(osu.audio.HitSound.getHitSounds(this.hitObject.edges[i].sounds, this.hitObject.timing, (i==0)));\r\n        }\r\n        this.displayRepeatArrow();\r\n    }\r\n\r\n\r\n    init(){\r\n        this.beenHit = false;\r\n        this.nextRepeatTime = 0;\r\n        this.sliderDirectionBackwards = false;\r\n        this.repeatCount = this.hitObject.repeatCount;\r\n        this.startCircle = new osu.objects.Circle(this.hitObject);\r\n        this.startCircle.isScoreAble = false;\r\n        this.startCircle.init();\r\n        this.drawnFollow = false;\r\n        this.drawn = false;\r\n        this.destroyed = false;\r\n        this.last_draw_time  =0;\r\n\r\n        if(this.initialised) return;\r\n\r\n        var sliderGraphics = new PIXI.Graphics();\r\n        var points = this.hitObject.points;\r\n        for(var i = 0 ; i < points.length ; i++){\r\n            points[i].x = this.hitObject.game.calculate_x(points[i].x);\r\n            points[i].y = this.hitObject.game.calculate_y(points[i].y);\r\n        }\r\n        sliderGraphics.beginFill(this.hitObject.colour);\r\n        sliderGraphics.lineStyle(5,0xFFFFFF);\r\n        var final_x = points[points.length-1].x;\r\n        var final_y = points[points.length-1].y;\r\n        this.hitObject.endX = final_x;\r\n        this.hitObject.endY =final_y;\r\n\r\n\r\n\r\n        sliderGraphics.endFill();\r\n        this.curves = new osu.objects.Curve(this.hitObject);\r\n        //ghetto sliders o babbby!\r\n        sliderGraphics.lineStyle(5,0xFFFFFF);\r\n        sliderGraphics.beginFill(0xFFFFFF);\r\n\r\n\r\n        //ghetto limit circle count to improve performance;\r\n\r\n\r\n        var lastPoint = this.curves.points[0];\r\n        sliderGraphics.drawCircle(lastPoint.x,lastPoint.y, (this.hitObject.size)/2.15);\r\n        var distance = osu.helpers.math.vectorDistance;\r\n        for(var i = 1; i< this.curves.points.length; i++){\r\n            var drawPoint = this.curves.points[i];\r\n            if(distance(lastPoint,drawPoint) > this.hitObject.size/15){\r\n                lastPoint = drawPoint;\r\n                sliderGraphics.drawCircle(drawPoint.x,drawPoint.y, (this.hitObject.size)/2.15);\r\n            }\r\n        }\r\n        var finalPoint = this.curves.points[this.curves.points.length-1];\r\n        sliderGraphics.drawCircle(finalPoint.x,finalPoint.y, (this.hitObject.size)/2.15);\r\n\r\n        sliderGraphics.lineStyle(5,this.hitObject.colour);\r\n        sliderGraphics.beginFill(this.hitObject.colour);\r\n\r\n\r\n        //draw inside\r\n        //TODO: masking might handle the border better so that it is not transparent\r\n        lastPoint = this.curves.points[0];\r\n        sliderGraphics.drawCircle(lastPoint.x,lastPoint.y, (this.hitObject.size*.9)/2.15);\r\n        for(var i = 1; i< this.curves.points.length; i++){\r\n            drawPoint = this.curves.points[i];\r\n            if(distance(lastPoint,drawPoint) > this.hitObject.size/15){\r\n                lastPoint = drawPoint;\r\n                sliderGraphics.drawCircle(drawPoint.x,drawPoint.y, (this.hitObject.size *.9)/2.15);\r\n            }\r\n        }\r\n        finalPoint = this.curves.points[this.curves.points.length-1];\r\n        sliderGraphics.drawCircle(finalPoint.x,finalPoint.y, (this.hitObject.size*.9)/2.15);\r\n\r\n\r\n        //seems to be a bug with generateTexture or its now meant to be used differently\r\n        //https://github.com/pixijs/pixi.js/issues/3446\r\n        //changing the location of the graphics fixes it tho so plz no remove this code even though it looks redundant\r\n        //bounds need to be calculated before moving graphics as it will calculate it as 0 afterwards\r\n        var bounds = sliderGraphics.getBounds();\r\n        sliderGraphics.x +=1;\r\n        sliderGraphics.x -=1;\r\n\r\n\r\n\r\n        var t = sliderGraphics.generateCanvasTexture();\r\n\r\n        var sprite = new PIXI.Sprite(t);\r\n        sprite.position.x = bounds.x;\r\n        sprite.position.y = bounds.y;\r\n        sprite.alpha = 0.6;\r\n        sprite.cacheAsBitmap = true;\r\n        sliderGraphics.clear();\r\n        sliderGraphics.destroy(); //no longer need this might a well destroy it\r\n        this.sliderGraphicsContainer = new PIXI.Container();\r\n        this.sliderGraphicsContainer.addChild(sprite);\r\n\r\n\r\n        //Add end circle TODO: check if theres a override skin\r\n        this.endCircleSprite =  new PIXI.Sprite(osu.skins.resources.hitcicleoverlay.texture);\r\n        this.endCircleSprite.anchor.set(0.5);\r\n        this.endCircleSprite.height = this.hitObject.size;\r\n        this.endCircleSprite.width = this.hitObject.size;\r\n        this.endCircleSprite.position.x = final_x;\r\n        this.endCircleSprite.position.y = final_y;\r\n\r\n        this.sliderGraphicsContainer.addChild(this.endCircleSprite);\r\n\r\n        this.startCircleSprite =  new PIXI.Sprite(osu.skins.resources.hitcicleoverlay.texture);\r\n        this.startCircleSprite.anchor.set(0.5);\r\n        this.startCircleSprite.height = this.hitObject.size;\r\n        this.startCircleSprite.width = this.hitObject.size;\r\n        this.startCircleSprite.position.x = this.hitObject.x;\r\n        this.startCircleSprite.position.y = this.hitObject.y;\r\n        this.sliderGraphicsContainer.addChild(this.startCircleSprite);\r\n\r\n        this.arrowSliderEnd = new PIXI.Sprite(osu.skins.resources.reversearrow.texture);\r\n        this.arrowSliderEnd.height = (this.hitObject.size *2)/5;\r\n        this.arrowSliderEnd.width = (this.hitObject.size *2)/5;\r\n        this.arrowSliderEnd.anchor.set(0.5);\r\n        this.arrowSliderEnd.position.x = final_x;\r\n        this.arrowSliderEnd.position.y = final_y;\r\n        var angle = osu.helpers.math.angleVector(this.curves.points[this.curves.points.length -1],\r\n            this.curves.points[this.curves.points.length-2]);\r\n        this.arrowSliderEnd.rotation = angle;\r\n        this.arrowSliderEnd.visible = false;\r\n\r\n        this.arrowSliderStart = new PIXI.Sprite(osu.skins.resources.reversearrow.texture);\r\n        this.arrowSliderStart.height = (this.hitObject.size *2) /5;\r\n        this.arrowSliderStart.width = (this.hitObject.size *2) /5 ;\r\n        this.arrowSliderStart.anchor.set(0.5);\r\n        this.arrowSliderStart.position.x = this.hitObject.x;\r\n        this.arrowSliderStart.position.y = this.hitObject.y;\r\n        angle = osu.helpers.math.angleVector(this.curves.points[0], this.curves.points[1]);\r\n        this.arrowSliderStart.rotation = angle;\r\n        this.arrowSliderStart.visible = false;\r\n\r\n        this.sliderGraphicsContainer.addChild(this.arrowSliderStart);\r\n        this.sliderGraphicsContainer.addChild(this.arrowSliderEnd);\r\n        this.tickPositions = [];\r\n        for (i = 0; i < this.ticks.length; i++) {\r\n            var tickLoc = this.curves.get_point(this.ticks[i]);\r\n            this.tickPositions.push(tickLoc);\r\n            var tickSprite = new PIXI.Sprite(osu.skins.resources.sliderscorepoint.texture);\r\n            tickSprite.position.x = tickLoc.x;\r\n            tickSprite.position.y = tickLoc.y;\r\n            tickSprite.anchor.set(0.5);\r\n            this.sliderGraphicsContainer.addChild(tickSprite)\r\n        }\r\n\r\n\r\n\r\n        this.sliderFollowContainer = new PIXI.Container();\r\n\r\n        var sliderFollowSprite = new PIXI.Sprite(osu.skins.resources.sliderfollowcircle.texture);\r\n        sliderFollowSprite.height = this.hitObject.size *2;\r\n        sliderFollowSprite.width = this.hitObject.size *2;\r\n        sliderFollowSprite.anchor.set(0.5);\r\n\r\n        var sliderBall = new PIXI.extras.MovieClip(osu.objects.ballTextures);\r\n        sliderBall.animationSpeed = 1.2;\r\n        sliderBall.anchor.set(0.5);\r\n        sliderBall.width = this.hitObject.size;\r\n        sliderBall.height = this.hitObject.size;\r\n        sliderBall.play();\r\n        this.sliderFollowContainer.addChild(sliderFollowSprite);\r\n        this.sliderFollowContainer.addChild(sliderBall);\r\n        this.sliderFollowContainer.position.x = this.hitObject.x;\r\n        this.sliderFollowContainer.position.y = this.hitObject.y;\r\n\r\n        for(i = 0 ; i < this.hitObject.edges.length;i++){\r\n            this.hitSounds.push(osu.audio.HitSound.getHitSounds(this.hitObject.edges[i].sounds, this.hitObject.timing, (i==0)));\r\n        }\r\n\r\n        this.displayRepeatArrow();\r\n\r\n        this.initialised = true;\r\n    }\r\n\r\n    displayRepeatArrow(){\r\n        if(this.repeatCount > 0) {\r\n            if (this.repeatCount % 2 == 0) {\r\n                this.arrowSliderEnd.visible = true;\r\n                this.arrowSliderStart.visible = false;\r\n            } else {\r\n                this.arrowSliderEnd.visible = false;\r\n                if (this.repeatCount != 1) {\r\n                    this.arrowSliderStart.visible = true;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    updatePositions(){\r\n        this.startCircle.updatePositions();\r\n\r\n        var moveX = this.originalX - this.hitObject.x;\r\n        var moveY = this.originalY - this.hitObject.y;\r\n        //the container x,y may differ from the hitobject xy so we move it by the difference change.\r\n        this.sliderGraphicsContainer.x -= moveX;\r\n        this.sliderGraphicsContainer.y -= moveY;\r\n        this.originalX = this.hitObject.x;\r\n        this.originalY = this.hitObject.y;\r\n    }\r\n    hit(time){\r\n        var playSound = false;\r\n        if(time >= this.hitObject.startTime && this.hitSounds.length == this.hitObject.edges.length){\r\n            playSound = true;\r\n        }\r\n        if(this.nextRepeatTime == 0){\r\n            if(time >= this.hitObject.endTime){\r\n                playSound = true;\r\n            }\r\n        }else{\r\n            if(time >= this.nextRepeatTime + this.hitObject.startTime){\r\n                playSound = true;\r\n            }\r\n        }\r\n\r\n\r\n        if(playSound && this.hitSounds.length > 0){\r\n            var sounds = this.hitSounds.shift();\r\n            for(var i = 0 ; i < sounds.length ; i++){\r\n                osu.audio.sound.play_sound(sounds[i], this.hitObject.timing.volume/100);\r\n            }\r\n        }\r\n\r\n\r\n\r\n    }\r\n\r\n    draw(cur_time){\r\n        this.hit(cur_time);\r\n        var drawCircle = this.startCircle.draw(cur_time);\r\n        //object is no longer rendered but still might have some logic (eg being missed, is hidden etc)\r\n        if(this.destroyed && !drawCircle){\r\n            if(cur_time > this.hitObject.endTime + 500){\r\n                if(!this.followDestroyed) {\r\n                    //if we alt tab or get a big lag spike some reason the object is not removed so this is a workaround\r\n                    this.sliderFollowContainer.visible = false;\r\n                    this.hitObject.game.hit_object_container.removeChild(this.sliderFollowContainer);\r\n                }\r\n                return false;\r\n            }\r\n        }\r\n        //TODO: should this be at the slider endtime, or use start time?\r\n        if(this.drawn && this.hitObject.game.is_hidden && cur_time > this.hitObject.startTime - this.hidden_time){\r\n            this.destroy();\r\n            this.destroyed = true;\r\n        }\r\n\r\n        if(!this.beenHit && this.scoreBreak && this.scoreBreak > cur_time){\r\n            this.hitObject.ScorePoint.displayMiss();\r\n            this.beenHit = true;\r\n        }\r\n        if(!this.beenHit && !this.scoreBreak && cur_time > this.hitObject.endTime){\r\n            switch(this.hitObject.hitType){\r\n                case 'HIT_MISS':\r\n                    this.hitObject.ScorePoint.displayMiss();\r\n                    this.beenHit = true;\r\n                    break;\r\n                case 'HIT_50':\r\n                    this.hitObject.ScorePoint.display50();\r\n                    this.beenHit = true;\r\n                    break;\r\n                case 'HIT_100':\r\n                    this.hitObject.ScorePoint.display100();\r\n                    this.beenHit = true;\r\n                    break;\r\n                case 'HIT_300':\r\n                    this.hitObject.ScorePoint.display300();\r\n                    this.beenHit = true;\r\n                    break;\r\n            }\r\n\r\n        }\r\n\r\n        if(cur_time >= this.hitObject.startTime){\r\n            if(!this.drawnFollow){\r\n                this.hitObject.game.hit_object_container.addChild(this.sliderFollowContainer);\r\n            }\r\n            if(this.repeatCount > 0){\r\n                //TODO: i feel like this is wrong and im overcomplicating it but im tired and this works\r\n                //WTF SLEEPY ME\r\n                var elapsed_time = (cur_time-this.nextRepeatTime) - this.hitObject.startTime;\r\n\r\n                this.displayRepeatArrow();\r\n\r\n                var t = (elapsed_time / this.timePerRepeat);\r\n                if(this.sliderDirectionBackwards){\r\n                    t = 1-t;\r\n                }\r\n                if(t >= 1 || t < 0){\r\n                    this.repeatCount -=1;\r\n                    this.nextRepeatTime += this.timePerRepeat;\r\n                    this.sliderDirectionBackwards = !this.sliderDirectionBackwards;\r\n                    t = 1;\r\n                }\r\n\r\n                var moveTo = this.curves.get_point(t);\r\n\r\n\r\n                if(moveTo){\r\n                    this.sliderFollowContainer.position.x = moveTo.x;\r\n                    this.sliderFollowContainer.position.y = moveTo.y;\r\n                    this.sliderFollowContainer.rotation = moveTo.angle;\r\n                }else{\r\n                    console.log('why u gotta put in dem troll maps');\r\n                }\r\n\r\n\r\n            }else{\r\n                this.hitObject.game.hit_object_container.removeChild(this.sliderFollowContainer);\r\n                //if we alt tab or get a big lag spike some reason the object is not removed so this is a workaround\r\n                this.sliderFollowContainer.visible = false;\r\n                this.followDestroyed = true;\r\n            }\r\n\r\n\r\n        }\r\n\r\n        if(!this.drawn){\r\n            this.hitObject.game.hit_object_container.addChildAt(this.sliderGraphicsContainer,0);\r\n            this.drawn = true;\r\n        }\r\n\r\n        if(!this.destroyed && cur_time > this.hitObject.endTime + 110){\r\n            this.destroy();\r\n            this.destroyed = true;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    destroy(){\r\n        this.destroyed = true;\r\n        this.hitObject.game.hit_object_container.removeChild(this.sliderGraphicsContainer);\r\n\r\n    }\r\n\r\n\r\n\r\n};\r\n\r\n\r\n\r\n/**\r\n * smoke.js\r\n * Created by Ugrend on 23/07/2016.\r\n */\r\n\r\nosu = osu || {};\r\nosu.objects = osu.objects || {};\r\nosu.objects.Smoke = function (x,y) {\r\n    var sprite = new PIXI.Sprite(osu.skins.resources.cursor_smoke.texture);\r\n    sprite.position.x = x;\r\n    sprite.position.y = y;\r\n    sprite.anchor.set(0.5);\r\n    sprite.destroyer = function () {\r\n        var self = this;\r\n        setTimeout(function () {\r\n            self.visible = false;\r\n        }, 3500);\r\n    };\r\n    sprite.destroyer();\r\n    return sprite\r\n\r\n};\r\n/**\r\n * spinner.js\r\n * Created by Ugrend on 11/06/2016.\r\n */\r\n\r\n\r\nosu = osu || {};\r\nosu.objects = osu.objects || {};\r\nosu.objects.Spinner = class Spinner{\r\n    constructor(hitObject){\r\n        this.hitObject = hitObject;\r\n        this.drawn = false;\r\n        this.destroyed = false;\r\n        this.rotations = [];\r\n        this.currentRotation = 0;\r\n    }\r\n\r\n    reset(){\r\n        //Reset the object so that it can be used again\r\n        this.drawn = false;\r\n        this.destroyed = false;\r\n        this.beenHit = false;\r\n        this.isScoreAble = true;\r\n        this.currentRotation = 0;\r\n    }\r\n\r\n    init(){\r\n        this.drawn = false;\r\n        this.destroyed = false;\r\n        this.x = this.hitObject.game.getRenderWidth()/2;\r\n        this.y = this.hitObject.game.getRenderHeight()/2;\r\n        this.spinnerContainer = new PIXI.Container();\r\n        var backgroundSprite = new PIXI.Sprite(osu.skins.resources.spinner_background.texture);\r\n        backgroundSprite.width = this.hitObject.game.getRenderWidth();\r\n        backgroundSprite.height =this.hitObject.game.getRenderHeight();\r\n        this.spinnerCirle = new PIXI.Sprite(osu.skins.resources.spinner_circle.texture);\r\n        this.spinnerCirle.position.x = this.x;\r\n        this.spinnerCirle.position.y = this.y;\r\n        this.spinnerCirle.anchor.set(0.5);\r\n        this.spinnerContainer.addChild(backgroundSprite);\r\n        this.spinnerContainer.addChild(this.spinnerCirle);\r\n    }\r\n    draw(cur_time){\r\n        if(!this.drawn){\r\n            if(cur_time > this.hitObject.startTime){\r\n                this.hitObject.game.hit_object_container.addChild(this.spinnerContainer);\r\n                this.drawn = true;\r\n            }\r\n        }\r\n        if(!this.destroyed){\r\n            if(this.rotations.length === 0){\r\n                this.spinnerCirle.rotation -= 0.1;\r\n            }else{\r\n                for(var i = this.currentRotation; i<this.rotations.length; i++){\r\n                    if(this.rotations[i].t <= cur_time){\r\n                        this.currentRotation = i;\r\n                        this.spinnerCirle.rotation = this.rotations[i].a;\r\n                    }else{\r\n                        break;\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n            if(cur_time > this.hitObject.endTime){\r\n                this.destroy();\r\n                this.destroyed = true;\r\n            }\r\n        }\r\n\r\n        return !this.destroyed;\r\n\r\n    }\r\n    destroy(){\r\n        this.hitObject.game.hit_object_container.removeChild(this.spinnerContainer);\r\n    }\r\n\r\n};\r\n\r\n/**\r\n * score.js\r\n * Created by ugrend on 2/06/2016.\r\n */\r\n\r\nvar osu  = osu || {};\r\nosu.score = {\r\n\r\n\r\n    /*\r\n     Accuracy = Total points of hits / (Total number of hits * 300)\r\n     Total points of hits \t(Number of 50s * 50 + Number of 100s * 100 + Number of 300s * 300)\r\n     Total number of hits \t(Number of misses + Number of 50's + Number of 100's + Number of 300's)\r\n\r\n     For reference: 300 = 6/6, 100 = 2/6, 50 = 1/6, Miss = 0/6.\r\n\r\n     */\r\n    GRADES: Object.freeze({\r\n        SS: {name:\"SS\",small_icn:\"ranking_x_small\",large_icn:\"ranking_x\"},\r\n        S:  {name:\"S\",small_icn:\"ranking_s_small\",large_icn:\"ranking_s\"},\r\n        A:  {name:\"A\",small_icn:\"ranking_a_small\",large_icn:\"ranking_a\"},\r\n        B:  {name:\"B\",small_icn:\"ranking_b_small\",large_icn:\"ranking_b\"},\r\n        C:  {name:\"C\",small_icn:\"ranking_c_small\",large_icn:\"ranking_c\"},\r\n        D:  {name:\"D\",small_icn:\"ranking_d_small\",large_icn:\"ranking_d\"},\r\n        SSH:  {name:\"SSH\",small_icn:\"ranking_xh_small\",large_icn:\"ranking_xh\"},\r\n        SH:  {name:\"SH\",small_icn:\"ranking_sh_small\",large_icn:\"ranking_sh\"}\r\n    }),\r\n\r\n\r\n    /**\r\n     *\r\n     * @param h300  {Number}\r\n     * @param h100  {Number}\r\n     * @param h50   {Number}\r\n     * @param hMisses {Number}\r\n     * @returns\r\n     */\r\n    getGrade: function(h300,h100,h50,hMisses,mods){\r\n        /*\r\n         SS = 100% Accuracy\r\n         S = Over 90% 300s, less than 1% 50s and no misses.\r\n         A = Over 80% 300s and no misses OR over 90% 300s.\r\n         B = Over 70% 300s and no misses OR over 80% 300s.\r\n         C = Over 60% 300s.\r\n         D = Anything else.\r\n\r\n\r\n         Special grades\r\n\r\n         Silver SS (SSH) = Normal grade SS with 'hidden' and/or 'flashlight' mod.\r\n         Silver S (SH) = Normal grade S with 'hidden' and/or 'flashlight' mod.\r\n\r\n         */\r\n        var is_silver = false;\r\n        for(var i =0; i < mods.length ; i++){\r\n            if(mods[i].code == \"FL\" || mods[i].code == \"HD\"){\r\n                is_silver = true;\r\n            }\r\n        }\r\n\r\n\r\n        var total_hits =  h300 + h100 + h50 + hMisses;\r\n        if(h300 == total_hits){\r\n            if(is_silver) return this.GRADES.SSH;else return this.GRADES.SS\r\n        }\r\n        if((h300/total_hits)*100 > 90) {\r\n            if (hMisses > 0 || (h50 / total_hits) * 100 > 1) {\r\n                return this.GRADES.A;\r\n            }\r\n             if(is_silver) return this.GRADES.SH; else return this.GRADES.S;\r\n        }\r\n        if((h300/total_hits)*100 > 80) {\r\n            if (hMisses > 0) {\r\n                return this.GRADES.B;\r\n            }\r\n            return this.GRADES.A;\r\n        }\r\n        if((h300/total_hits)*100 > 70) {\r\n            if (hMisses > 0) {\r\n                return this.GRADES.C;\r\n            }\r\n            return this.GRADES.B;\r\n        }\r\n        if((h300/total_hits)*100 > 60) {\r\n            return this.GRADES.C;\r\n        }\r\n        return this.GRADES.D;\r\n    },\r\n\r\n    getAccuracy: function(h300,h100,h50,hMisses){\r\n        var maxHits = h300 + h100 + h50 + hMisses;\r\n        var percent = (h300 * 300 + h100* 100 + h50 * 50) / (maxHits * 300) * 100;\r\n        return parseFloat(percent).toFixed(2);\r\n    },\r\n\r\n    parseAccuracyFromReplay: function (replay) {\r\n        return this.getAccuracy(replay.h300 + replay.hGekis, replay.h100 + replay.hKatus, replay.h50, replay.hMisses)\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n};\r\n/**\r\n * settings.js\r\n * Created by Ugrend on 9/06/2016.\r\n */\r\n\r\n\r\nosu = osu || {};\r\nosu.settings = {\r\n\r\n    DEFAULTS: Object.freeze({\r\n        background_dim: 0.3,\r\n        master_volume: 1.0,\r\n        music_volume: 0.5,\r\n        sound_effects: 1,\r\n        use_beatmap_skins: false,\r\n        use_beatmap_hitsounds: false,\r\n        song_url: false,\r\n        asset_server: false,\r\n        selected_skin: \"0\",\r\n\r\n    }),\r\n    SETTINGS:{\r\n\r\n\r\n        _background_dim: 0.3,\r\n        _master_volume: 1.0,\r\n        _music_volume: 0.5,\r\n        _sound_effects_volume: 1,\r\n        _use_beatmap_skins: false,\r\n        _use_beatmap_hitsounds: false,\r\n        _song_url: false,\r\n        _asset_server: false,\r\n        _selected_skin: \"0\",\r\n\r\n        get background_dim(){return this._background_dim},\r\n        set background_dim(v) { this._background_dim = v; event_handler.emit(event_handler.EVENTS.SETTINGS_CHANGED);},\r\n        get master_volume(){return this._master_volume;},\r\n        set master_volume(v) { this._master_volume = v; event_handler.emit(event_handler.EVENTS.SETTINGS_CHANGED);},\r\n        get music_volume(){return this._music_volume},\r\n        set music_volume(v) { this._music_volume = v; event_handler.emit(event_handler.EVENTS.SETTINGS_CHANGED);},\r\n        get sound_effects_volume(){return this._sound_effects_volume},\r\n        set sound_effects_volume(v) { this._sound_effects_volume = v; event_handler.emit(event_handler.EVENTS.SETTINGS_CHANGED);},\r\n        get use_beatmap_skins(){return this._use_beatmap_skins},\r\n        set use_beatmap_skins(v) { this._use_beatmap_skins = v; event_handler.emit(event_handler.EVENTS.SETTINGS_CHANGED);},\r\n        get use_beatmap_hitsounds(){return this._use_beatmap_hitsounds},\r\n        set use_beatmap_hitsounds(v) { this._use_beatmap_hitsounds = v; event_handler.emit(event_handler.EVENTS.SETTINGS_CHANGED);},\r\n        get song_url(){return this._song_url},\r\n        set song_url(v) { this._song_url = v; event_handler.emit(event_handler.EVENTS.SETTINGS_CHANGED);},\r\n        get asset_server(){return this._asset_server},\r\n        set asset_server(v) { this._asset_server = v; event_handler.emit(event_handler.EVENTS.SETTINGS_CHANGED);},\r\n        get selected_skin(){return this._selected_skin},\r\n        set selected_skin(v) { this._selected_skin = v; event_handler.emit(event_handler.EVENTS.SETTINGS_CHANGED);},\r\n    },\r\n\r\n\r\n    init: function () {\r\n        var self = this;\r\n        event_handler.on(event_handler.EVENTS.SETTINGS_CHANGED, this.save_settings.bind(this));\r\n\r\n        database.get_data(database.TABLES.OPTIONS,\"options\", function (e) {\r\n            if(e.data){\r\n                for(var k in e.data){\r\n                    if(e.data.hasOwnProperty(k)){\r\n                        if(k.indexOf(\"_\") == 0){\r\n                            self.SETTINGS[k] = e.data[k];\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            self.onloaded();\r\n            event_handler.emit(event_handler.EVENTS.SETTINGS_CHANGED);\r\n        });\r\n    },\r\n    save_settings: function () {\r\n        database.update_data(database.TABLES.OPTIONS,\"options\",this.SETTINGS);\r\n    },\r\n\r\n    onloaded: function () {\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n};\r\n\r\n/**\r\n * main_screen.js\r\n * Created by Ugrend on 20/06/2016.\r\n */\r\nvar osu = osu || {};\r\nosu.ui = osu.ui || {};\r\nosu.ui.interface = osu.ui.interface || {};\r\nosu.ui.interface.mainscreen = {\r\n\r\n    beatmap_count: -1,\r\n    replay_count: -1,\r\n    key_count: 0,\r\n    processed_count: 0,\r\n    displaying_main_screen: false,\r\n    loaded: false,\r\n    beatmap_keys: [],\r\n    beatmaps: [],\r\n    current_selection: false,\r\n    beatmap_selection_template: \"\",\r\n    replay_selection_template: \"\",\r\n    $beatmap_section_html: null,\r\n    $replay_section_html: null,\r\n    cached_dom: false,\r\n    events_bound: false,\r\n    replays: [],\r\n    beatmapSearch: null,\r\n    replaySearch: null,\r\n    $currentSelectionHtml: \"\",\r\n    launched_replay_from_url: false,\r\n\r\n\r\n    init: function () {\r\n        this.cacheDom();\r\n        this.bind_events();\r\n\r\n        this.$master_volume_slider.val(osu.settings.SETTINGS.master_volume * 100);\r\n        this.$music_volume_slider.val(osu.settings.SETTINGS.music_volume * 100);\r\n        this.$sound_volume_slider.val(osu.settings.SETTINGS.sound_effects_volume * 100);\r\n        this.$background_dim_slider.val(osu.settings.SETTINGS.background_dim * 100);\r\n        this.$skin_select.val(osu.settings.SETTINGS.selected_skin);\r\n\r\n        var self = this;\r\n        database.get_count(database.TABLES.BEATMAPS, function (count) {\r\n            self.beatmap_count = count;\r\n            self.show_selection();\r\n        });\r\n        database.get_count(database.TABLES.REPLAYS, function (count) {\r\n            self.replay_count = count;\r\n            self.show_selection();\r\n        });\r\n        event_handler.on(event_handler.EVENTS.BEATMAP_LOADED,this.on_load_file.bind(this));\r\n        //event_handler.on(event_handler.EVENTS.REPLAY_LOADED, this.on_load_file.bind(this)); // we may not care about a new replay\r\n\r\n    },\r\n\r\n    launchReplayFromURL: function () {\r\n        if (window.location.href.match(/\\?./)) {\r\n            var queryDict = getParams();\r\n            if(queryDict.r){\r\n                osu.webapi.replays.loadReplay(queryDict.r);\r\n            }\r\n        }\r\n        else{\r\n            //allow loading replay data from # so can load in replay frame from a iframe\r\n            if(location.hash.replace(/#/,\"\") != \"\"){\r\n\r\n                var replayB64 = decodeURI(location.hash.replace(/#/,\"\"));\r\n                location.hash = \"\";\r\n                ReplayParser(base64ToUint8Array(replayB64), function (replay_data) {\r\n                    replay = replay_data; //TODO: not be essentially global\r\n                    loadBeatMap();\r\n                });\r\n            }\r\n        }\r\n\r\n    },\r\n    cacheDom: function () {\r\n        if(!this.cached_dom){\r\n            this.beatmap_selection_template = document.getElementById(\"beatmap_select_template\").innerHTML;\r\n            this.replay_selection_template = document.getElementById(\"replay_select_template\").innerHTML;\r\n            this.$beatmap_section_html = $(\"#song_selection_area\");\r\n            this.$replay_section_html = $(\"#replay_select_area\");\r\n            this.mapped_by = document.getElementById(\"mapped_by\");\r\n            this.map_length_and_objects = document.getElementById(\"map_length_and_objects\");\r\n            this.map_object_type_counts = document.getElementById(\"map_object_type_counts\");\r\n            this.map_difficulty = document.getElementById(\"map_difficulty\");\r\n            this.map_name = document.getElementById(\"map_name\");\r\n            this.$footer = $(\"#footer\");\r\n            this.$beatmap_search_field = $(\"#filter_maps_search\");\r\n            this.$replay_search_field = $(\"#filter_players_search\");\r\n            this.$title_and_search = $(\"#title_and_search\");\r\n            this.$details_replay_search = $(\"#details_replay_search\");\r\n            this.$asset_server_url = $(\"#asset_server_url\");\r\n            this.$song_server_url = $(\"#song_server_url\");\r\n            this.$save_asset_servers_btn = $(\"#save_asset_servers_btn\");\r\n            this.$master_volume_slider = $(\"#master_volume\");\r\n            this.$music_volume_slider = $(\"#music_volume\");\r\n            this.$sound_volume_slider = $(\"#sound_volume\");\r\n            this.$background_dim_slider = $(\"#background_dim\");\r\n            this.$skin_select = $(\"#skin_select\");\r\n            this.cached_dom = true;\r\n            this.$deleteBeatmapModel = $(\"#delete_beatmap_modal\");\r\n            this.$deleteButton = this.$deleteBeatmapModel.find(\"#deleteMapButton\");\r\n            this.$deleteOtherDifficultiesCheckBox = this.$deleteBeatmapModel.find(\"#delete_other_difficulties\");\r\n            this.$deleteAssetsCheckBox = this.$deleteBeatmapModel.find(\"#delete_assets\");\r\n        }\r\n\r\n    },\r\n\r\n    bind_events: function () {\r\n        //init script can be called multiple times if no maps/replays exist\r\n        if(!this.events_bound){\r\n\r\n\r\n            $(\"#replay_playback_speed\").on('change', function (e) {\r\n                osu.ui.interface.osugame.setPlayBackMulti(e.currentTarget.value);\r\n            });\r\n\r\n            $(\"#open_config_button_other\").on('click', function () {\r\n                osu.ui.interface.osugame.toggle_settings();\r\n            });\r\n\r\n            var self = this;\r\n            this.$save_asset_servers_btn.on('click', function () {\r\n                osu.settings.SETTINGS.asset_server = self.$asset_server_url.val();\r\n                osu.settings.SETTINGS.song_url = self.$song_server_url.val();\r\n            });\r\n\r\n            this.$skin_select.on('change',function () {\r\n                osu.settings.SETTINGS.selected_skin = self.$skin_select.val();\r\n                osu.skins.init();\r\n            });\r\n\r\n\r\n            this.$beatmap_search_field.on('input', function (e) {\r\n                var searchParam = e.currentTarget.value;\r\n                if(self.beatmapSearch && searchParam != \"\"){\r\n                    self.$beatmap_section_html.find(\".beatmap_preview:not([class*='hidden'])\").addClass(\"hidden\");\r\n                    self.beatmapSearch.search(searchParam, function (result) {\r\n                       for(var i = 0; i < result.length ; i++){\r\n                           self.$beatmap_section_html.find(\"#\"+result[i].md5sum).removeClass(\"hidden\");\r\n                       }\r\n                    });\r\n                }else{\r\n                    self.$beatmap_section_html.find(\".beatmap_preview\").removeClass(\"hidden\");\r\n                    self.$currentSelectionHtml[0].scrollIntoViewIfNeeded();\r\n                }\r\n\r\n\r\n            });\r\n\r\n            this.$replay_search_field.on('input', function (e) {\r\n                var searchParam = e.currentTarget.value;\r\n                if(self.replaySearch && searchParam != \"\"){\r\n                    self.$replay_section_html.find(\".replay_preview:not([class*='hidden'])\").addClass(\"hidden\");\r\n                    self.replaySearch.search(searchParam, function (result) {\r\n                        for(var i = 0; i < result.length ; i++){\r\n                            self.$replay_section_html.find(\"#\"+result[i].rMd5Hash).removeClass(\"hidden\");\r\n                        }\r\n                    });\r\n                }else{\r\n                    self.$replay_section_html.find(\".replay_preview\").removeClass(\"hidden\");\r\n                }\r\n            });\r\n\r\n            this.$master_volume_slider.on(\"input\", function (e) {\r\n               osu.settings.SETTINGS.master_volume = e.currentTarget.value / 100;\r\n                osu.audio.sound.play_sound(osu.audio.sound.MENUCLICK);\r\n            });\r\n            this.$music_volume_slider.on(\"input\", function (e) {\r\n                osu.settings.SETTINGS.music_volume = e.currentTarget.value / 100;\r\n                osu.audio.sound.play_sound(osu.audio.sound.MENUCLICK);\r\n            });\r\n            this.$sound_volume_slider.on(\"input\", function (e) {\r\n                osu.settings.SETTINGS.sound_effects_volume = e.currentTarget.value / 100;\r\n                osu.audio.sound.play_sound(osu.audio.sound.MENUCLICK);\r\n            });\r\n            this.$background_dim_slider.on(\"input\", function (e) {\r\n                osu.settings.SETTINGS.background_dim = e.currentTarget.value / 100;\r\n                osu.audio.sound.play_sound(osu.audio.sound.MENUCLICK);\r\n            });\r\n\r\n\r\n            //On beatmap select click highlight the clicked item, and unhighlight any other items\r\n            this.$beatmap_section_html.on(\"click\",\".beatmap_preview\", function (event) {\r\n                osu.audio.sound.play_sound(osu.audio.sound.MENUCLICK);\r\n                var clickedObject = $(this);\r\n                var md5sum = clickedObject.attr(\"id\");\r\n                self.highlight_beatmap(clickedObject);\r\n                self.select_beatmap(md5sum, false);\r\n            });\r\n            //on right click allow deleting of map/etc\r\n            this.$beatmap_section_html.on('contextmenu',\".beatmap_preview\",function (e) {\r\n                e.preventDefault();\r\n                self.deletion_id = $(this).attr(\"id\");\r\n                self.$deleteBeatmapModel.modal('show');\r\n            });\r\n\r\n\r\n            this.$deleteButton.on(\"click\", self.delete_map.bind(self));\r\n\r\n            //on replay click open replay\r\n            $(this.$replay_section_html).on(\"click\",\".replay_preview\", function (event) {\r\n                osu.audio.sound.play_sound(osu.audio.sound.MENUHIT);\r\n                var id = $(this).attr('id');\r\n                for(var i = 0; i < self.replays.length ; i ++){\r\n                    if(self.replays[i].rMd5Hash == id){\r\n                        replay = self.replays[i];\r\n                        break;\r\n                    }\r\n                }\r\n                loadBeatMap();\r\n            });\r\n\r\n            //Escape out of replay back to main screen\r\n            document.onkeyup = function (e) {\r\n                e = e || window.event;\r\n                //27 is Escape\r\n                if(e.keyCode == 27){\r\n                    if(self.loaded && !self.displaying_main_screen){\r\n                        //if a replay is playing we can stop it\r\n                        event_handler.emit(event_handler.EVENTS.STOP_REPLAY);\r\n                        if(!osu.ui.interface.osugame.has_started){\r\n                            self.show_main_screen();\r\n                        }\r\n\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        this.events_bound = true;\r\n\r\n\r\n    },\r\n\r\n    _delete_other_difficulties(id){\r\n        var delete_array = [];\r\n        var self = this;\r\n        var parentMap = false;\r\n        for(var i = 0; i < this.beatmaps.length ; i++){\r\n            var beatmap = this.beatmaps[i];\r\n            if(beatmap.md5sum == id) {\r\n                parentMap = beatmap;\r\n                break;\r\n            }\r\n        }\r\n        if(parentMap){\r\n            var beatmapSet = parentMap.beatmapsetid;\r\n\r\n            for(i = 0; i < this.beatmaps.length ; i++){\r\n                beatmap = this.beatmaps[i];\r\n                if(beatmap.beatmapsetid == beatmapSet) {\r\n                    delete_array.push(beatmap.md5sum);\r\n                }\r\n            }\r\n        }\r\n        for(i = 0 ; i< delete_array.length; i++){\r\n            self.$beatmap_section_html.find(\"#\" +delete_array[i]).hide();\r\n            database.delete_data(database.TABLES.BEATMAPS,delete_array[i]);\r\n        }\r\n    },\r\n\r\n    delete_map(id,other_difficulties,include_assets){\r\n        var self = this;\r\n        //check id if object, if so came from ui not console\r\n        if(typeof id == \"object\"){\r\n            id = this.deletion_id;\r\n            other_difficulties = this.$deleteOtherDifficultiesCheckBox.is(':checked');\r\n            include_assets = this.$deleteAssetsCheckBox.is(':checked');\r\n        }\r\n        self.$beatmap_section_html.find(\"#\" +id).hide();\r\n\r\n\r\n        if(include_assets){\r\n            database.get_data(database.TABLES.BEATMAPS,id,function (result) {\r\n                if(other_difficulties){\r\n                    self._delete_other_difficulties(id);\r\n                }\r\n                var beatmap = result.data;\r\n                for(var i = 0; i<beatmap.files.length; i++){\r\n                    database.delete_data(database.TABLES.ASSETS,beatmap.files[i].md5sum);\r\n                }\r\n                database.delete_data(database.TABLES.BEATMAPS,id)\r\n            });\r\n        }\r\n\r\n\r\n        if(other_difficulties && !include_assets){\r\n            this._delete_other_difficulties(id);\r\n        }\r\n\r\n        if(!other_difficulties && !include_assets){\r\n            database.delete_data(database.TABLES.BEATMAPS,id);\r\n\r\n        }\r\n    },\r\n\r\n    highlight_beatmap($beatmapHtml){\r\n        this.$currentSelectionHtml =$beatmapHtml;\r\n        this.$beatmap_section_html.find(\".song_preview_row\").removeClass('song_preview_unselected').removeClass('song_preview_mouseover').removeClass('song_preview_selected').addClass('song_preview_unselected');\r\n        //resize everything back to unselected size\r\n        this.$beatmap_section_html.find(\".beatmap_preview\").removeClass(\"col-xs-9\").removeClass(\"col-xs-8\").removeClass(\"col-xs-7\")\r\n            .removeClass('col-xs-offset-5').removeClass('col-xs-offset-4').removeClass('col-xs-offset-3')\r\n            .addClass('col-xs-offset-5').addClass('col-xs-7');\r\n        $beatmapHtml.removeClass(\"col-xs-9\").removeClass(\"col-xs-8\").removeClass(\"col-xs-7\")\r\n            .removeClass('col-xs-offset-5').removeClass('col-xs-offset-4').removeClass('col-xs-offset-3')\r\n            .addClass('col-xs-offset-3').addClass('col-xs-9');\r\n        $beatmapHtml.find('.song_preview_row').removeClass('song_preview_unselected').addClass('song_preview_selected');\r\n        $beatmapHtml[0].scrollIntoViewIfNeeded();\r\n\r\n    },\r\n\r\n\r\n    select_beatmap(md5sum,highlight_map){\r\n        this.$replay_section_html.html(\"\"); //clear current replay select\r\n\r\n\r\n\r\n\r\n        var beatmap = null;\r\n        for(var i = 0; i < this.beatmaps.length ; i++){\r\n            if(this.beatmaps[i].md5sum == md5sum){\r\n                beatmap = this.beatmaps[i];\r\n                break;\r\n            }\r\n        }\r\n\r\n        this.map_name.innerHTML = Mustache.render(\"{{source}} \"+\r\n            \"({{#artistunicode}}{{artistunicode}}{{/artistunicode}}{{^artistunicode}}{{artist}}{{/artistunicode}}) - \"+\r\n            \"{{#titleunicode}}{{titleunicode}}{{/titleunicode}}{{^titleunicode}}{{title}}{{/titleunicode}}  [{{version}}]\",beatmap);\r\n        this.mapped_by.innerHTML = \"Mapped by \" + beatmap.creator;\r\n        this.map_length_and_objects.innerHTML =\r\n            \"Length: \" + beatmap.song_length +\r\n            \" BPM: \" +  (beatmap.maxBPM ? beatmap.maxBPM + \" - \" : \"\") + beatmap.minBPM  +\r\n            \" Objects: \" + beatmap.objects;\r\n        this.map_object_type_counts.innerHTML =\r\n            \"Circles: \" +  beatmap.circles  +\r\n            \" Sliders: \"+  beatmap.sliders  +\r\n            \" Spinners \" + beatmap.spinners ;\r\n        this.map_difficulty.innerHTML =\r\n            \"CS: \" + beatmap.circleSize +\r\n            \" AR: \" + beatmap.approachRate +\r\n            \" OD: \" + beatmap.overallDifficulty +\r\n            \" HP: \" + beatmap.HPDrain +\r\n            \" Stars: \" + beatmap.stars;\r\n        beatmap.play_song();\r\n        beatmap.load_background();\r\n        var self = this;\r\n        database.get_data_from_index(database.TABLES.REPLAYS,database.INDEXES.REPLAYS.BEATMAP_ID,beatmap.md5sum, function (replays) {\r\n            self.replays = replays;\r\n            replays.sort(function (a,b) {\r\n                if (a.tScore > b.tScore)\r\n                    return -1;\r\n                if (a.tScore < b.tScore)\r\n                    return 1;\r\n                //if same score (rare but would happen on easier maps) sort by date played\r\n                var aDate = new Date(a.time_played);\r\n                var bDate = new Date(b.time_played);\r\n                if(aDate > bDate){\r\n                    return -1;\r\n                }\r\n                if(aDate < bDate){\r\n                    return 1;\r\n                }\r\n                return 0;\r\n            });\r\n            for(i = 0; i < self.replays.length; i++){\r\n                self.replays[i].grade_img = osu.skins.resources[osu.score.GRADES[self.replays[i].grade].small_icn].url;\r\n            }\r\n\r\n            self.replaySearch = new Bloodhound({\r\n                datumTokenizer: function (datum) {\r\n                    return Bloodhound.tokenizers.whitespace(datum.playerName);\r\n                },\r\n                queryTokenizer: Bloodhound.tokenizers.whitespace,\r\n                local: self.replays\r\n            });\r\n            self.render_replay(self.replays);\r\n\r\n\r\n        });\r\n        this.current_selection = beatmap;\r\n        if(highlight_map){\r\n                this.highlight_beatmap($(\"#\"+md5sum));\r\n        }\r\n    },\r\n    render_replay(replays){\r\n        var content = Mustache.render(this.replay_selection_template, {replays:replays});\r\n        this.$replay_section_html.append(content);\r\n    },\r\n\r\n\r\n    show_selection: function () {\r\n        if(this.beatmap_count > 0 && this.replay_count > 0){\r\n            var self = this;\r\n            database.get_all_keys(database.TABLES.BEATMAPS, function (keys) {\r\n                self.key_count = keys.length; //even though this should be same as beatmap count just to be safe we will check again\r\n                for(var i = 0; i < keys.length ; i++){\r\n                    self.beatmap_keys.push(keys[i]);\r\n                    var beatmap = new osu.beatmaps.BeatmapPreview(keys[i], function () {\r\n                        self.processed_count++;\r\n                        self.songs_processed();\r\n                    });\r\n                    self.beatmaps.push(beatmap);\r\n                }\r\n            });\r\n        }\r\n        if(this.beatmap_count == 0 || this.replay_count == 0){\r\n            document.getElementById(\"loading\").className = \"hidden\";\r\n            this.show_main_screen();\r\n            //document.getElementById(\"no_beatmaps_replays\").className = \"\";\r\n        }\r\n    },\r\n    songs_processed: function () {\r\n        if(this.key_count == this.processed_count){\r\n            this.beatmaps.sort(function (a,b) {\r\n                if (a.title < b.title)\r\n                    return -1;\r\n                if (a.title > b.title)\r\n                    return 1;\r\n                //if same beatmap order by star difficulty\r\n                if(a.stars < b.stars){\r\n                    return -1;\r\n                }\r\n                if(a.stars > b.stars){\r\n                    return 1;\r\n                }\r\n                return 0;\r\n            });\r\n            for(var i =0; i < this.beatmaps.length; i++){\r\n                this.render_song(this.beatmaps[i]);\r\n            }\r\n            this.beatmapSearch = new Bloodhound({\r\n                datumTokenizer: function (datum) {\r\n                    var matchon = datum.title + \" \" + datum.artist + \" \" + datum.tags;\r\n                    return Bloodhound.tokenizers.whitespace(matchon);\r\n                },\r\n                queryTokenizer: Bloodhound.tokenizers.whitespace,\r\n                local: this.beatmaps\r\n            });\r\n            this.show_main_screen();\r\n        }\r\n    },\r\n    show_main_screen: function () {\r\n        osu.ui.interface.replaycontroller.hideBar();\r\n        document.getElementById(\"loading\").className = \"hidden\";\r\n        document.getElementById(\"no_beatmaps_replays\").className = \"hidden\";\r\n        document.getElementById(\"container\").className = \"\";\r\n        document.getElementById(\"main_menu\").className = \"\";\r\n        document.getElementById(\"render_zone\").className = \"hidden\";\r\n        document.getElementById(\"replay_url_area\").className = \"hidden\";\r\n        document.getElementById(\"playback_ratio_area\").className = \"hidden\";\r\n        document.getElementById(\"open_config_button_other\").className = \"hidden\";\r\n\r\n        this.$asset_server_url.val(osu.settings.SETTINGS.asset_server);\r\n        this.$song_server_url.val(osu.settings.SETTINGS.song_url);\r\n\r\n        if(this.$footer.css('display') =='none'){\r\n            this.$footer.toggle(\"slide\", {direction: \"down\"});\r\n        }\r\n\r\n        if(this.$replay_section_html.css('display') == \"none\"){\r\n            this.$replay_section_html.toggle(\"slide\", {direction: \"left\"});\r\n        }\r\n        if(this.$title_and_search.css('display') == \"none\"){\r\n            this.$title_and_search.toggle(\"slide\", {direction: \"up\"});\r\n        }\r\n        if(this.$details_replay_search.css('display') == \"none\"){\r\n            this.$details_replay_search.toggle(\"slide\", {direction: \"up\"});\r\n        }\r\n        if(this.$beatmap_section_html.css('display') == \"none\"){\r\n            this.$beatmap_section_html.toggle(\"slide\", {direction: \"right\"}); //right looks broken\r\n        }\r\n\r\n        this.$skin_select.empty();\r\n        this.$skin_select.append('<option value=\"0\">Default</option>');\r\n        for(var i = 0; i < osu.skins.skins.length; i++){\r\n            this.$skin_select.append('<option value=\"'+ osu.skins.skins[i].md5sum +'\">'+ osu.skins.skins[i].name  +'</option>')\r\n        }\r\n        this.$skin_select.val(osu.settings.SETTINGS.selected_skin);\r\n\r\n\r\n        this.$footer.find('#skin_settings').attr('style','');\r\n        this.$footer.find('#skin_select_field').attr('style','');\r\n        this.loaded = true;\r\n        this.displaying_main_screen = true;\r\n        if(!this.current_selection && this.beatmaps.length){\r\n            //select random beatmap\r\n            this.select_beatmap(this.beatmaps[Math.floor(Math.random()*this.beatmaps.length)].md5sum, true);\r\n        }else if(this.beatmaps.length){\r\n            this.current_selection.load_background();\r\n        }\r\n        this.$beatmap_search_field.focus();\r\n\r\n        if(!this.launched_replay_from_url){\r\n            //We need to wait for mainscreen to load before we try launch replay as it can prevent the replay from every actually loading\r\n            //once we have loaded it atleast once we wont try again\r\n            this.launched_replay_from_url = true;\r\n            this.launchReplayFromURL();\r\n        }\r\n\r\n    },\r\n    hide_main_screen: function () {\r\n        console.log(this.$footer.css('display'));\r\n        if(this.$footer.css('display') !='none'){\r\n            this.$footer.toggle(\"slide\", {direction: \"down\"});\r\n        }\r\n        if(this.$beatmap_section_html.css('display') != \"none\"){\r\n            this.$beatmap_section_html.toggle(\"slide\", {direction: \"right\"});\r\n        }\r\n        if(this.$replay_section_html.css('display') != \"none\"){\r\n            this.$replay_section_html.toggle(\"slide\", {direction: \"left\"});\r\n        }\r\n        if(this.$title_and_search.css('display') != \"none\"){\r\n            this.$title_and_search.toggle(\"slide\", {direction: \"up\"});\r\n        }\r\n        if(this.$details_replay_search.css('display') != \"none\"){\r\n            this.$details_replay_search.toggle(\"slide\", {direction: \"up\"});\r\n        }\r\n        this.displaying_main_screen = false;\r\n    },\r\n\r\n    set_background: function (background_data) {\r\n        document.body.style.background = \"url(\"+background_data+\") no-repeat center fixed\";\r\n        document.body.style.backgroundSize = \"100% 100%\";\r\n    },\r\n    remove_background: function () {\r\n        document.body.style.background = \"\";\r\n    },\r\n    display_new_song: function (md5sum) {\r\n\r\n        if(this.displaying_main_screen){\r\n            //make main selection\r\n\r\n        }\r\n    },\r\n\r\n    load_song: function (md5sum) {\r\n        var self = this;\r\n        var curr_length = this.beatmaps.length;\r\n        var beatmap = new osu.beatmaps.BeatmapPreview(md5sum, function () {\r\n            self.render_song(self.beatmaps[curr_length+1]); //some reason we havent finished loading on this callback ??\r\n            self.display_new_song(md5sum);\r\n        });\r\n        this.beatmaps.push(beatmap);\r\n        this.beatmap_keys.push(md5sum);\r\n    },\r\n\r\n    render_song: function (beatmap) {\r\n        var content = Mustache.render(this.beatmap_selection_template, {beatmaps:beatmap});\r\n        this.$beatmap_section_html.append(content);\r\n    },\r\n\r\n    on_load_file: function (data) {\r\n        if(!this.loaded){\r\n            this.init();\r\n        }\r\n        else {\r\n            for(var i = 0; i < data.md5sums.length; i++){\r\n                if(this.beatmap_keys.indexOf(data.md5sums[i]) == -1){\r\n                    this.load_song(data.md5sums[i])\r\n                }\r\n            };\r\n\r\n        }\r\n    }\r\n\r\n};\r\n\r\n/**\r\n * osu_game.js\r\n * Created by Ugrend on 5/06/2016.\r\n */\r\n\r\n\r\n/*\r\n\r\n Main Game Window AKA: Spaghetti Monster\r\n\r\n x ranges from 0 to 512 (inclusive) and y ranges from 0 to 384 (inclusive).\r\n\r\n\r\n 4:3 aspect ratio\r\n */\r\n\r\n\r\nvar osu = osu || {};\r\nosu.ui = osu.ui || {};\r\nosu.ui.interface = osu.ui.interface || {};\r\nosu.ui.interface.osugame = {\r\n\r\n\r\n    master_container: new PIXI.Container(),\r\n    offSetDetails: null,\r\n    replay_data: [],\r\n    key_1_count: 0,\r\n    key_2_count: 0,\r\n    key_3_count: 0,\r\n    key_4_count: 0,\r\n    key_1_pressed: false,\r\n    key_2_pressed: false,\r\n    key_3_pressed: false,\r\n    key_4_pressed: false,\r\n    beatmap: {},\r\n    expected_replay_movment_time: null,\r\n    gone_over: 0,\r\n    has_started: false,\r\n    audioLeadIn: 0,\r\n    countdown_started: false,\r\n    curr_replay_frame: 0,\r\n    mods: [],\r\n    oldest_object_position: 0,\r\n    oldestReplayFrame:0,\r\n    replay_intro_time: -1,\r\n    end_skip_frame: -1,\r\n    skip_frames: [],\r\n    flash_count: 0,\r\n    warning_arrow_times: [],\r\n    break_times: [],\r\n    replay_played_by_text: \"\",\r\n    hit_objects: [],\r\n    events_bound: false,\r\n    curMapTime:0,\r\n    replayDiff:0,\r\n    delayEnd: 0,\r\n    finished: false,\r\n    keyPresses: [],\r\n    currentKeyPress: 0,\r\n    lasthit_id: 1000,\r\n    paused: false,\r\n    paused_time: 0,\r\n    starting_pos: 0,\r\n    playbackMulti: 1,\r\n    modPlayBackMulti: 1,\r\n\r\n    getPlayBackMulti: function () {\r\n        return this.modPlayBackMulti * this.playbackMulti;\r\n    },\r\n\r\n    currentMap: function () {\r\n        return this.beatmap;\r\n    },\r\n\r\n    currentReplay: function () {\r\n        return this.replay_data;\r\n    },\r\n\r\n    currentHitObjects: function () {\r\n        return this.hit_objects;\r\n    },\r\n\r\n    calculateLetterBox: function () {\r\n        var x = osu.ui.renderer.renderWidth;\r\n        var y = osu.ui.renderer.renderHeight;\r\n        var fixed_ratio_y = (3 / 4) * x;\r\n        var fixed_ratio_x = (4 / 3) * y;\r\n        var details = {\r\n            width: x,\r\n            height: y,\r\n            x_offset: 0,\r\n            y_offset: 0\r\n        };\r\n\r\n        if (fixed_ratio_y > y) {\r\n            //if we increasing y bigger than the screen we need to make x smaller\r\n            details.width = fixed_ratio_x;\r\n        }\r\n        else {\r\n            details.height = fixed_ratio_y;\r\n        }\r\n        details.x_offset = (x - details.width)/2 || 0;\r\n        details.y_offset = (y - details.height)/2 || 0;\r\n        return details;\r\n\r\n    },\r\n\r\n    getRenderWidth: function () {\r\n        return osu.ui.renderer.renderWidth;\r\n    },\r\n    getRenderHeight: function () {\r\n        return osu.ui.renderer.renderHeight;\r\n    },\r\n    create_dimmer: function () {\r\n\r\n\r\n        this.background_dimmer = this.background_dimmer || new PIXI.Container();\r\n        this.background_dimmer.removeChildren();\r\n        var dimmer = new PIXI.Graphics();\r\n        dimmer.beginFill(0x0, osu.settings.SETTINGS.background_dim);\r\n        dimmer.drawRect(0, 0, this.getRenderWidth(), this.getRenderHeight());\r\n        this.background_dimmer.addChild(dimmer);\r\n\r\n\r\n    },\r\n    create_background: function () {\r\n\r\n        this.beatmap.background = this.beatmap.background || \"\"; //prevent pixi breaking on undefined background\r\n        var background = PIXI.Texture.fromImage(this.beatmap.background);\r\n        var background_sprite = new PIXI.Sprite(background);\r\n        background_sprite.width = this.getRenderWidth();\r\n        background_sprite.height = this.getRenderHeight();\r\n        this.master_container.addChild(background_sprite);\r\n\r\n        this.create_dimmer();\r\n        this.master_container.addChild(this.background_dimmer);\r\n\r\n\r\n    },\r\n\r\n    create_pause_screen_container: function () {\r\n        this.pauseScreenContainer = new PIXI.Container();\r\n        this.pauseScreenContainer.visible = false;\r\n        var overlayTexture = osu.skins.resources.pause_overlay.texture;\r\n        this.overlaySprite = new PIXI.Sprite(overlayTexture);\r\n        this.overlaySprite.width = this.getRenderWidth();\r\n        this.overlaySprite.height = this.getRenderHeight();\r\n        this.pauseScreenContainer.addChild(this.overlaySprite);\r\n\r\n\r\n        var resumeButtonTexture = osu.skins.resources.pause_continue.texture;\r\n        this.resumeButtonSprite = new PIXI.Sprite(resumeButtonTexture);\r\n        this.resumeButtonSprite.position.x = this.getRenderWidth() /2;\r\n        this.resumeButtonSprite.position.y = this.getRenderHeight() *.26;\r\n        this.resumeButtonSprite.anchor.set(0.5);\r\n        this.resumeButtonSprite.interactive = true;\r\n        this.resumeButtonSprite.on(\"mouseup\", this.toggle_pause.bind(this));\r\n        this.resumeButtonSprite.on(\"touchend\", this.toggle_pause.bind(this));\r\n        this.pauseScreenContainer.addChild(this.resumeButtonSprite);\r\n\r\n\r\n        var backButtonTexture = osu.skins.resources.pause_back.texture;\r\n        this.backButtonSprite = new PIXI.Sprite(backButtonTexture);\r\n        this.backButtonSprite.position.x = this.getRenderWidth() /2;\r\n        this.backButtonSprite.position.y = this.getRenderHeight() *.74;\r\n        this.backButtonSprite.anchor.set(0.5);\r\n        this.backButtonSprite.interactive = true;\r\n        this.backButtonSprite.on(\"mouseup\", this.end_replay.bind(this));\r\n        this.backButtonSprite.on(\"touchend\", this.end_replay.bind(this));\r\n\r\n        this.pauseScreenContainer.addChild(this.backButtonSprite);\r\n\r\n\r\n\r\n\r\n        this.master_container.addChild(this.pauseScreenContainer);\r\n    },\r\n\r\n    tint_untint_key: function (key, do_tint) {\r\n        if (do_tint) {\r\n            key.scale = {x:1.1,y:1.1};\r\n            key.tint = 0xFFFF00;\r\n        }\r\n        else {\r\n            key.scale = {x:1,y:1};\r\n            key.tint = 0xFFFFFF;\r\n        }\r\n    },\r\n    create_key_press: function () {\r\n        this.keypress_area = new PIXI.Container();\r\n        var keypress_texture = osu.skins.resources.inputoverlay_key.texture;\r\n        this.keypress_1 = new PIXI.Sprite(keypress_texture);\r\n        this.keypress_2 = new PIXI.Sprite(keypress_texture);\r\n        this.keypress_3 = new PIXI.Sprite(keypress_texture);\r\n        this.keypress_4 = new PIXI.Sprite(keypress_texture);\r\n        //TODO: Style text\r\n        var style = {font : '14px Arial'}\r\n        this.keypress_1_Text = new PIXI.Text(this.key_1_count > 0 && this.key_1_count.toString() || \"K1\",style);\r\n        this.keypress_2_Text = new PIXI.Text(this.key_2_count > 0 && this.key_2_count.toString() || \"K2\",style);\r\n        this.keypress_3_Text = new PIXI.Text(this.key_3_count > 0 && this.key_3_count.toString() || \"M1\",style);\r\n        this.keypress_4_Text = new PIXI.Text(this.key_4_count > 0 && this.key_4_count.toString() || \"M2\",style);\r\n\r\n        this.keypress_1.tint = 0xFFFF00;\r\n\r\n\r\n        this.keypress_1.x = this.getRenderWidth() - 40;\r\n        this.keypress_1.y = this.getRenderHeight() / 2 - 55;\r\n        this.keypress_1.anchor.set(0.5);\r\n        this.keypress_1_Text.anchor.set(0.5);\r\n        this.keypress_1_Text.x = this.keypress_1.x;\r\n        this.keypress_1_Text.y = this.keypress_1.y;\r\n\r\n\r\n        this.keypress_2.x = this.getRenderWidth() - 40;\r\n        this.keypress_2.y = this.getRenderHeight() / 2;\r\n        this.keypress_2.anchor.set(0.5);\r\n        this.keypress_2_Text.anchor.set(0.5);\r\n        this.keypress_2_Text.x = this.keypress_2.x;\r\n        this.keypress_2_Text.y = this.keypress_2.y;\r\n\r\n        this.keypress_3.x = this.getRenderWidth() - 40;\r\n        this.keypress_3.y = this.getRenderHeight() / 2 + 55;\r\n        this.keypress_3.anchor.set(0.5);\r\n        this.keypress_3_Text.anchor.set(0.5);\r\n        this.keypress_3_Text.x = this.keypress_3.x;\r\n        this.keypress_3_Text.y = this.keypress_3.y;\r\n\r\n        this.keypress_4.x = this.getRenderWidth() - 40;\r\n        this.keypress_4.y = this.getRenderHeight() / 2 + 110;\r\n        this.keypress_4.anchor.set(0.5);\r\n        this.keypress_4_Text.anchor.set(0.5);\r\n        this.keypress_4_Text.x = this.keypress_4.x;\r\n        this.keypress_4_Text.y = this.keypress_4.y;\r\n\r\n\r\n        this.keypress_area.addChild(this.keypress_1);\r\n        this.keypress_area.addChild(this.keypress_2);\r\n        this.keypress_area.addChild(this.keypress_3);\r\n        this.keypress_area.addChild(this.keypress_4);\r\n        this.keypress_area.addChild(this.keypress_1_Text);\r\n        this.keypress_area.addChild(this.keypress_2_Text);\r\n        this.keypress_area.addChild(this.keypress_3_Text);\r\n        this.keypress_area.addChild(this.keypress_4_Text);\r\n\r\n        this.master_container.addChild(this.keypress_area);\r\n\r\n\r\n    },\r\n    create_cursor: function () {\r\n        this.cursor = new PIXI.Container();\r\n        var cursor_texture = osu.skins.resources.cursor.texture;\r\n        var cursor_middle_texture = osu.skins.resources.cursormiddle.texture;\r\n        var cursor_sprite = new PIXI.Sprite(cursor_texture);\r\n        var cursor_middle_sprite = new PIXI.Sprite(cursor_middle_texture);\r\n\r\n        cursor_sprite.anchor.set(0.5);\r\n        cursor_middle_sprite.anchor.set(0.5);\r\n\r\n        this.cursor.addChild(cursor_sprite);\r\n        this.cursor.addChild(cursor_middle_sprite);\r\n        this.cursor.x = this.getRenderWidth() / 2;\r\n        this.cursor.y = this.getRenderHeight() / 2;\r\n        this.master_container.addChild(this.cursor);\r\n    },\r\n    create_skip_container: function () {\r\n        this.skip_container = new PIXI.Container();\r\n\r\n        var skipFrames = [];\r\n        if(osu.skins.resources.play_skip_0){\r\n            for(var i = 0 ; i< 99; i++){\r\n                if(osu.skins.resources[\"play_skip_\"+i]){\r\n                    skipFrames.push(osu.skins.resources[\"play_skip_\"+i].texture);\r\n                }else{\r\n                    break;\r\n                }\r\n            }\r\n        }else{\r\n            skipFrames.push(osu.skins.resources.play_skip.texture);\r\n        }\r\n\r\n        var skipAnimation = new PIXI.extras.MovieClip(skipFrames);\r\n        skipAnimation.anchor.set(0.5);\r\n        skipAnimation.x = this.calculate_x(512);\r\n        skipAnimation.y = this.calculate_y(384);\r\n        skipAnimation.interactive = true;\r\n        skipAnimation.on(\"mouseup\", this.skip_intro.bind(this));\r\n        skipAnimation.animationSpeed = 0.1;\r\n        skipAnimation.play();\r\n        this.skip_container.visible = false;\r\n\r\n        this.skip_container.addChild(skipAnimation);\r\n        this.master_container.addChild(this.skip_container);\r\n\r\n    },\r\n    create_play_warn_arrows_container: function () {\r\n        this.arrow_container = new PIXI.Container();\r\n        var arrow_texture =  osu.skins.resources.play_warningarrow.texture;\r\n        var skip_arrow_sprite_1 = new PIXI.Sprite(arrow_texture);\r\n        var skip_arrow_sprite_2 = new PIXI.Sprite(arrow_texture);\r\n        var skip_arrow_sprite_3 = new PIXI.Sprite(arrow_texture);\r\n        var skip_arrow_sprite_4 = new PIXI.Sprite(arrow_texture);\r\n        skip_arrow_sprite_1.anchor.set(0.5);\r\n        skip_arrow_sprite_2.anchor.set(0.5);\r\n        skip_arrow_sprite_3.anchor.set(0.5);\r\n        skip_arrow_sprite_4.anchor.set(0.5);\r\n        skip_arrow_sprite_1.x = this.calculate_x(25);\r\n        skip_arrow_sprite_1.y = this.calculate_y(19);\r\n        skip_arrow_sprite_2.scale.x = -1; //flip arrow\r\n        skip_arrow_sprite_2.x = this.calculate_x(487);\r\n        skip_arrow_sprite_2.y = this.calculate_y(19);\r\n\r\n\r\n        skip_arrow_sprite_3.x = this.calculate_x(25);\r\n        skip_arrow_sprite_3.y = this.calculate_y(365);\r\n        skip_arrow_sprite_4.scale.x = -1; //flip arrow\r\n        skip_arrow_sprite_4.x = this.calculate_x(487);\r\n        skip_arrow_sprite_4.y = this.calculate_y(365);\r\n\r\n\r\n        this.arrow_container.addChild(skip_arrow_sprite_1);\r\n        this.arrow_container.addChild(skip_arrow_sprite_2);\r\n        this.arrow_container.addChild(skip_arrow_sprite_3);\r\n        this.arrow_container.addChild(skip_arrow_sprite_4);\r\n        this.arrow_container.visible = false;\r\n        this.master_container.addChild(this.arrow_container);\r\n\r\n    },\r\n    create_success_container: function () {\r\n        this.success_container = new PIXI.Container();\r\n        var success_texture =  osu.skins.resources.section_pass.texture;\r\n        var success_sprite = new PIXI.Sprite(success_texture);\r\n        success_sprite.anchor.set(0.5);\r\n        success_sprite.x = this.getRenderWidth() / 2;\r\n        success_sprite.y = this.getRenderHeight() / 2;\r\n        this.success_container.visible = false;\r\n        this.success_container.addChild(success_sprite);\r\n        this.master_container.addChild(this.success_container);\r\n    },\r\n    create_fail_container: function () {\r\n        this.fail_container = new PIXI.Container();\r\n        var fail_texture = osu.skins.resources.section_fail.texture;\r\n        var fail_sprite = new PIXI.Sprite(fail_texture);\r\n        fail_sprite.anchor.set(0.5);\r\n        fail_sprite.x = this.getRenderWidth() / 2;\r\n        fail_sprite.y = this.getRenderHeight() / 2;\r\n        this.fail_container.visible = false;\r\n        this.fail_container.addChild(fail_sprite);\r\n        this.master_container.addChild(this.fail_container);\r\n    },\r\n    create_replay_by_text: function () {\r\n        this.replay_text = new PIXI.Text(this.replay_played_by_text, {\r\n            font: Math.round((osu.ui.renderer.renderHeight + osu.ui.renderer.renderWidth)/150) +\"px Arial\",\r\n            fill: \"#FFFFFF\"\r\n        });\r\n        this.replay_text.y = this.getRenderHeight() * .18;\r\n        this.replay_text.x = this.getRenderWidth() / 2;\r\n        this.master_container.addChild(this.replay_text);\r\n    },\r\n    create_mod_container: function () {\r\n        for (var i = 0; i < this.mods.length; i++) {\r\n            if (this.mods[i].icon != \"\") {\r\n                var modpng = osu.skins.resources[this.mods[i].icon].texture;\r\n                var modSprite = new PIXI.Sprite(modpng);\r\n                modSprite.position.y = this.getRenderHeight() *.22;\r\n                modSprite.position.x = (this.getRenderWidth() * .95) - (i * 50);\r\n                modSprite.anchor.set(0.5);\r\n                this.master_container.addChild(modSprite);\r\n            }\r\n        }\r\n    },\r\n    create_settings_icon_container: function () {\r\n        this.settingIconContainer = new PIXI.Container();\r\n        var settingsTexture = new PIXI.Texture.fromImage(\"data/settings.png\");\r\n        var settingsSprite = new PIXI.Sprite(settingsTexture);\r\n        settingsSprite.anchor.set(1);\r\n        settingsSprite.x = this.getRenderWidth();\r\n        settingsSprite.y = this.getRenderHeight();\r\n        settingsSprite.alpha = 0.9;\r\n        settingsSprite.interactive = true;\r\n        settingsSprite.on(\"mouseup\", this.toggle_settings.bind(this));\r\n        this.settingIconContainer.addChild(settingsSprite);\r\n\r\n        this.master_container.addChild(this.settingIconContainer);\r\n    },\r\n    create_timer_container: function () {\r\n        this.timerX = this.getRenderWidth() - (this.getRenderWidth()*.115);\r\n        this.timerY = this.getRenderHeight() * .13;\r\n        var timerContainer = new PIXI.Container();\r\n        var baseCircle = new PIXI.Graphics();\r\n        baseCircle.lineStyle(4,0xFFFFFF);\r\n        baseCircle.beginFill(0x0,0);\r\n        baseCircle.drawCircle(0, 0,25);\r\n        baseCircle.beginFill(0xFFFFFF,2);\r\n        baseCircle.drawCircle(0,0,1);\r\n        //seems to be a bug with generateTexture or its now meant to be used differently\r\n        //https://github.com/pixijs/pixi.js/issues/3446\r\n        //changing the location of the graphics fixes it tho so plz no remove this code even though it looks redundant\r\n        baseCircle.x +=1;\r\n        baseCircle.x -=1;\r\n        var baseCircleTexture = baseCircle.generateCanvasTexture();\r\n        var baseCircleSprite = new PIXI.Sprite(baseCircleTexture);\r\n        baseCircleSprite.position.x = this.timerX;\r\n        baseCircleSprite.position.y = this.timerY;\r\n        baseCircleSprite.anchor.set(0.5);\r\n\r\n        this.timerMask = new PIXI.Graphics();\r\n        this.timerPie = new PIXI.Graphics();\r\n        this.timerPie.mask = this.timerMask;\r\n        this.timerPie.beginFill(0xB4B4B2,0.8);\r\n        this.timerPie.drawCircle(this.timerX, this.timerY,25);\r\n        this.timerPie.endFill();\r\n\r\n        timerContainer.addChild(this.timerPie);\r\n        timerContainer.addChild(baseCircleSprite);\r\n        this.master_container.addChild(timerContainer);\r\n\r\n    },\r\n\r\n    update_timer_percentage(percentage, colour){\r\n        //http://jsfiddle.net/asoyaqud/17/\r\n        var createPoint = function(x,y) { return {x:x,y:y}; };\r\n        var rotateXY = function(x,y,angle) {\r\n            var rad = Math.PI * angle/180;\r\n            var cosVal = Math.cos(rad);\r\n            var sinVal = Math.sin(rad);\r\n            return createPoint(cosVal*x - sinVal*y,\r\n                sinVal*x + cosVal*y);\r\n        };\r\n        var computeMaskPolygon = function(x,y,radius,angle) {\r\n            while(angle<0)\r\n                angle += 360;\r\n            angle%=360;\r\n\r\n            var delta = rotateXY(0, -2*radius, angle);\r\n            var pts = [createPoint(x,y-2*radius),\r\n                createPoint(x,y),\r\n                createPoint(x+delta.x, y+delta.y)];\r\n\r\n            if(angle > 270)\r\n                pts.push(createPoint(x-2*radius,y));\r\n            if(angle > 180)\r\n                pts.push(createPoint(x,y+2*radius));\r\n            if(angle > 90)\r\n                pts.push(createPoint(x+2*radius,y));\r\n\r\n            return pts;\r\n        };\r\n        this.timerPie.clear();\r\n        this.timerPie.beginFill(colour,0.8);\r\n        this.timerPie.drawCircle(this.timerX, this.timerY,25);\r\n        this.timerPie.endFill();\r\n\r\n        this.timerMask.clear();\r\n        var angle = percentage*360;\r\n        if(angle >= 360) angle = 359.9;\r\n\r\n        var pts = computeMaskPolygon(this.timerX, this.timerY, 25, angle);\r\n        this.timerMask.beginFill(0xFFFFFF);\r\n        this.timerMask.moveTo(pts[0].x, pts[0].y);\r\n        for(var i=1;i<pts.length;++i) {\r\n            this.timerMask.lineTo(pts[i].x, pts[i].y);\r\n        }\r\n        this.timerMask.lineTo(pts[0].x, pts[0].y);\r\n        this.timerMask.endFill();\r\n    },\r\n\r\n    createSmokeContainer: function () {\r\n        this.smokeContainer = new PIXI.Container();\r\n        this.master_container.addChild(this.smokeContainer);\r\n    },\r\n\r\n    createScoreContainer: function () {\r\n\r\n        var style = { font: 'bold '+Math.round((osu.ui.renderer.renderHeight + osu.ui.renderer.renderWidth)/36)+'px Arial', fill: '#FFFFFF', align: 'center', stroke: '#000000', strokeThickness: 6 };\r\n        this.scoreText = new PIXI.Text(\"0\",style);\r\n        this.scoreText.anchor.set(1,0);\r\n        this.scoreText.y = 0 ;\r\n        this.scoreText.x = this.getRenderWidth()  ;\r\n        this.comboText = new PIXI.Text(\"0X\",style);\r\n        this.comboText.anchor.set(0,1);\r\n        this.comboText.y = this.getRenderHeight() *.95;\r\n\r\n        var style = { font: 'bold 50px Arial', fill: '#FFFFFF', align: 'center', stroke: '#000000', strokeThickness: 6 };\r\n        this.accuracyText = new PIXI.Text(\"0.00%\",style);\r\n        this.accuracyText.anchor.set(1,0.5);\r\n        this.accuracyText.y = this.getRenderHeight() * .13 ;\r\n        this.accuracyText.x = this.getRenderWidth()  ;\r\n\r\n        var scoreContainer = new PIXI.Container();\r\n        scoreContainer.addChild(this.scoreText);\r\n        scoreContainer.addChild(this.comboText);\r\n        scoreContainer.addChild(this.accuracyText);\r\n        this.master_container.addChild(scoreContainer);\r\n    },\r\n\r\n    create_master_container: function () {\r\n\r\n        this.master_container.removeChildren();\r\n        this.hit_object_container = new PIXI.Container();\r\n\r\n        this.create_background();\r\n        this.create_key_press();\r\n        this.create_mod_container();\r\n        this.create_replay_by_text();\r\n        this.create_timer_container();\r\n        this.createSmokeContainer();\r\n        this.createScoreContainer();\r\n        this.master_container.addChild(this.hit_object_container);\r\n        this.create_skip_container();\r\n        this.create_success_container();\r\n        this.create_fail_container();\r\n        this.create_play_warn_arrows_container();\r\n        this.create_cursor();\r\n        this.create_pause_screen_container();\r\n        //this.create_settings_icon_container();\r\n\r\n    },\r\n    flash_warning_arrows: function () {\r\n        if (this.flash_count < 15) {\r\n            var self = this;\r\n            setTimeout(function () {\r\n                self.arrow_container.visible = !self.arrow_container.visible;\r\n                self.flash_count++;\r\n                self.flash_warning_arrows()\r\n            }, 150);\r\n\r\n        } else {\r\n            this.arrow_container.visible = false;\r\n            this.flash_count = 0;\r\n        }\r\n\r\n    },\r\n    show_success: function () {\r\n        this.success_container.visible = true;\r\n        osu.audio.sound.play_sound(osu.audio.sound.SECTIONPASS);\r\n        var self = this;\r\n        setTimeout(function () {\r\n            self.success_container.visible = false;\r\n        }, 4000);\r\n    },\r\n    show_failure: function () {\r\n        this.fail_container.visible = true;\r\n        var self = this;\r\n        setTimeout(function () {\r\n            self.fail_container.visible = false;\r\n        }, 4000);\r\n    },\r\n    end_replay: function () {\r\n        this.finished = true;\r\n        this.has_started = false;\r\n        osu.ui.interface.mainscreen.show_main_screen();\r\n    },\r\n    bind_events: function () {\r\n        if (!this.events_bound) {\r\n            event_handler.on(event_handler.EVENTS.SETTINGS_CHANGED, this.create_dimmer.bind(this));\r\n            event_handler.on(event_handler.EVENTS.STOP_REPLAY, this.toggle_pause.bind(this));\r\n            this.events_bound = true;\r\n        }\r\n\r\n    },\r\n    /*osu coords are 512/384 but we dont want 0,512/etc to appear almost off screen\r\n     So instead will devide by a bigger but same aspect ratio and increase the original x/y by the difference/2\r\n     */\r\n    calculate_x: function (x) {\r\n        x = parseInt(x);\r\n        var result = ((this.offSetDetails.width / 640) * (x + 64)) +this.offSetDetails.x_offset ;\r\n        return result;\r\n    },\r\n    calculate_y: function (y) {\r\n        y = parseInt(y);\r\n        return ((this.offSetDetails.height / 480) * (y + 48)) +this.offSetDetails.y_offset;\r\n    },\r\n    calculate_original_x: function (x) {\r\n        x = parseInt(x);\r\n        return (x + 64) / (this.offSetDetails.width / 640) ;\r\n\r\n    },\r\n    calculate_original_y: function (y) {\r\n        y = parseInt(y);\r\n        return   (y + 48) / (this.getRenderHeight() / 480);\r\n    },\r\n\r\n    toggle_settings(){\r\n        this.$footer.find('#skin_settings').css('display','none');\r\n        this.$footer.find('#skin_select_field').css('display','none');\r\n        this.$footer.css('background', 'rgba(0,0,0,0.6');\r\n        this.$footer.slideToggle();\r\n\r\n    },\r\n    hide_settings(){\r\n        if(this.$footer.css('display') == \"none\"){\r\n            this.$footer.slideToggle();\r\n        }\r\n    },\r\n\r\n    initGame: function () {\r\n        osu.ui.interface.replaycontroller.bindEvents();\r\n        //reset pause so we dont incorrectly think we are paused\r\n        this.playbackMulti = 1;\r\n        $(\"#replay_playback_speed\").val(1);\r\n        this.modPlayBackMulti = 1;\r\n        this.paused = false;\r\n        this.paused_time = 0;\r\n        event_handler.off(event_handler.EVENTS.RENDER, \"replay_text\"); //unsubscrbe incase another replay closed early\r\n        this.currentKeyPress = 0;\r\n        this.key_1_count = 0;\r\n        this.key_2_count = 0;\r\n        this.key_3_count = 0;\r\n        this.key_4_count = 0;\r\n        this.$footer = osu.ui.interface.mainscreen.$footer || $(\"#footer\");\r\n        this.$footer.attr('style','');\r\n        this.$footer.css('display', 'none');\r\n        osu.ui.renderer.start();\r\n        this.offSetDetails = this.calculateLetterBox();\r\n        this.create_master_container();\r\n        osu.ui.renderer.clearStage();\r\n        osu.ui.renderer.addChild(this.master_container);\r\n        this.bind_events();\r\n        this.curMapTime = 0;\r\n        this.has_started = false;\r\n        this.countdown_started = false;\r\n        this.curr_replay_frame = 0;\r\n        this.expected_replay_movment_time = null;\r\n        this.oldest_object_position = 0;\r\n        this.warning_arrow_times = [];\r\n        this.is_hidden = false;\r\n        this.is_hardrock = false;\r\n        this.is_easy = false;\r\n        this.oldestReplayFrame = 0;\r\n        this.is_halftime = false;\r\n        this.is_doubletime = false;\r\n        this.replayDiff = 0;\r\n        this.break_times = [];\r\n        this.warning_arrow_times =[];\r\n        this.delayEnd = 0;\r\n        this.finished = false;\r\n        var modMulti = 1;\r\n        for (var i = 0; i < this.mods.length; i++) {\r\n            var mod = this.mods[i].code;\r\n            modMulti *= this.mods[i].multi;\r\n            if (mod == \"HD\") this.is_hidden = true;\r\n            if (mod == \"HR\") this.is_hardrock = true;\r\n            if (mod == \"EZ\") this.is_easy = true;\r\n            if (mod == \"DT\" || mod == \"NT\") this.is_doubletime = true;\r\n            if (mod == \"HT\") this.is_halftime = true;\r\n\r\n        }\r\n        if(this.is_doubletime){\r\n            this.modPlayBackMulti *= osu.helpers.constants.DOUBLE_TIME_MULTI;\r\n        }\r\n        if(this.is_halftime){\r\n            this.modPlayBackMulti *= osu.helpers.constants.HALF_TIME_MULTI;\r\n        }\r\n\r\n\r\n        for (i = 0; i < this.beatmap.map_data.events.length; i++) {\r\n            //2 looks to be breaks\r\n            if (this.beatmap.map_data.events[i][0] == \"2\") {\r\n                var startTime = parseInt(this.beatmap.map_data.events[i][1]);\r\n                var endTime = parseInt(this.beatmap.map_data.events[i][2]) - 2300;\r\n                this.break_times.push({t:startTime, played:false});\r\n                this.warning_arrow_times.push({t:endTime, played:false});\r\n            }\r\n        }\r\n        var comboNum = 0;\r\n        var comboColour = 0;\r\n        var approachRate = parseInt(this.beatmap.map_data.difficulty.ApproachRate) || 7;\r\n        var overallDifficulty = this.beatmap.map_data.difficulty.OverallDifficulty;\r\n        var difficultyCircleSize = parseInt(this.beatmap.map_data.difficulty.CircleSize);\r\n        var hpDrain = parseInt(this.beatmap.map_data.difficulty.HPDrainRate);\r\n        this.sliderMultiplier = parseFloat(this.beatmap.map_data.difficulty.SliderMultiplier || 1);\r\n        this.sliderTickRate = parseFloat(this.beatmap.map_data.difficulty.SliderTickRate || 1);\r\n        this.performance = new osu.game.Perforamnce(overallDifficulty+difficultyCircleSize+hpDrain,modMulti,hpDrain);\r\n\r\n\r\n        if (this.is_hardrock) {\r\n            approachRate *=  osu.helpers.constants.HR_DIFFICULTY_MULTI;\r\n            overallDifficulty *= osu.helpers.constants.HR_DIFFICULTY_MULTI;\r\n        }\r\n        if (this.is_easy){\r\n            approachRate *= osu.helpers.constants.EZ_DIFFICULTY_MULTI;\r\n            overallDifficulty *= osu.helpers.constants.EZ_DIFFICULTY_MULTI;\r\n        }\r\n        approachRate = Math.min(approachRate,10);\r\n        overallDifficulty = Math.min(overallDifficulty,10);\r\n\r\n\r\n\r\n\r\n\r\n        if (this.is_hardrock && difficultyCircleSize < 7) difficultyCircleSize += 1;\r\n        if (this.is_easy && difficultyCircleSize > 1) difficultyCircleSize -= 1; //TODO: work out if that's correct\r\n        //TODO: try work this out, osu is registering hits but this size i get misses, so my circles must be slightly smaller or some other calculation (this calc is from opsu)\r\n        var unScaledDiameter = (108.848 - (difficultyCircleSize * 8.9646)) ;\r\n        var circleSize = (this.offSetDetails.width / 640) * unScaledDiameter;\r\n\r\n        this.approachTime = 0;\r\n        if (approachRate < 5) {\r\n            this.approachTime = (1800 - (approachRate * 120))\r\n        } else {\r\n            this.approachTime = (1200 - ((approachRate - 5) * 150));\r\n        }\r\n        if(!this.beatmap.been_rendered){\r\n            this.keyPresses = [];\r\n            this.hit_objects = [];\r\n            for (i = 0; i < this.beatmap.map_data.hit_objects.length; i++){\r\n\r\n                var hitObject = new osu.objects.HitObject(this.beatmap.map_data.hit_objects[i], circleSize, this.approachTime, this);\r\n                if (comboNum == 0 || hitObject.newCombo) {\r\n                    comboNum = 1;\r\n                    if (comboColour == osu.skins.COMBO_COLOURS.length - 1) {\r\n                        comboColour = 0;\r\n                    }\r\n                    else {\r\n                        comboColour++;\r\n                    }\r\n                } else {\r\n                    comboNum++;\r\n                }\r\n                hitObject.colour = osu.skins.COMBO_COLOURS[comboColour];\r\n                hitObject.combo = comboNum;\r\n                //https://osu.ppy.sh/wiki/Song_Setup#Overall_Difficulty\r\n                hitObject.hitOffset = {\r\n                    HIT_300: 79.5 - (overallDifficulty * 6),\r\n                    HIT_100: 139.5 - (overallDifficulty * 8),\r\n                    HIT_50: 199.5 - (overallDifficulty * 10),\r\n                    HIT_MISS: 500 - (overallDifficulty * 10)\r\n                };\r\n\r\n                this.hit_objects.push(hitObject);\r\n            }\r\n            osu.objects.HitObjectParser.create_stacks(this.hit_objects, parseFloat(this.beatmap.map_data.general.StackLeniency) || 0.7, unScaledDiameter, this.is_hardrock);\r\n            this.keyPresses = osu.calculateReplay(this.hit_objects,this.replay_data, unScaledDiameter);\r\n            osu.objects.HitObjectParser.initialiseHitObjects(this.hit_objects);\r\n            osu.objects.HitObjectParser.calculate_follow_points(this.hit_objects, this);\r\n\r\n            this.beatmap.been_rendered = true;\r\n        }else{\r\n            for(var i = 0; i < this.hit_objects.length; i++){\r\n                this.hit_objects[i].reset();\r\n            }\r\n\r\n        }\r\n\r\n\r\n\r\n\r\n\r\n\r\n        this.audioLeadIn = parseInt(this.beatmap.map_data.general.AudioLeadIn);\r\n\r\n\r\n        //calculate x,y prior as processing slowly casues it to get out of sync\r\n        //might have to calculate replay times as time passed, as it is starting to get out of sync\r\n\r\n        if (!replay.been_rendered) {\r\n            for (var i = 0; i < this.replay_data.length; i++) {\r\n                //This is a workaround yay :D\r\n                this.replay_data[i].orig_x = this.replay_data[i].x;\r\n                this.replay_data[i].orig_y = this.replay_data[i].y;\r\n                this.replay_data[i].orig_t = this.replay_data[i].t;\r\n\r\n                this.replay_data[i].x = this.calculate_x(this.replay_data[i].x);\r\n                this.replay_data[i].y = this.calculate_y(this.replay_data[i].y);\r\n\r\n\r\n            }\r\n            replay.been_rendered = true;\r\n        }\r\n\r\n        this.skip_frames = [];\r\n\r\n\r\n\r\n        var skipFrame = this.replay_data[1];\r\n\r\n        this.skipTime = -1;\r\n\r\n        if(skipFrame.t > 0){\r\n            //im not sure how this works anymore but this fixed a problem so yeh\r\n            if (this.replay_data[2].t > 0) {\r\n                this.replayDiff = this.replay_data[2].t * -1;\r\n            }\r\n            this.skipTime = parseInt(skipFrame.t);\r\n            this.warning_arrow_times.push({t:this.skipTime, played:false});\r\n        }\r\n        else{\r\n            if (this.replay_data[2].t < 0) {\r\n                this.replayDiff = this.replay_data[2].t * -1;\r\n                if (this.audioLeadIn == 0) {\r\n                    this.audioLeadIn =  this.replayDiff;\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n        osu.ui.interface.replaycontroller.set_duration(this.beatmap.map_data.time_length+2000);\r\n        this.delayEnd = this.beatmap.map_data.time_length + 2500;\r\n        osu.ui.interface.replaycontroller.enable_progressbar();\r\n        osu.ui.interface.replaycontroller.showPauseIcon();\r\n        event_handler.on(event_handler.EVENTS.RENDER, this.move_replay_text.bind(this), \"replay_text\")\r\n\r\n\r\n    },\r\n\r\n    move_replay_text: function () {\r\n        if(!this.paused){\r\n            if (this.replay_text.x < (-this.replay_text.width + 5)) {\r\n                this.replay_text.x = this.getRenderWidth();\r\n            }\r\n            this.replay_text.x -= 2;\r\n        }\r\n\r\n    },\r\n\r\n    renderKeyPress: function () {\r\n        for(var i = this.currentKeyPress; i < this.keyPresses.length; i++){\r\n            //is this getting looped over when we skip?\r\n            if(this.paused){\r\n                break;\r\n            }\r\n            var keyPress = this.keyPresses[i];\r\n            var t = keyPress.t;\r\n            if(t <= this.curMapTime){\r\n                var tint_1 = keyPress.K1;\r\n                var tint_2 = keyPress.K2;\r\n                var tint_3 = keyPress.M1;\r\n                var tint_4 = keyPress.M2;\r\n                this.tint_untint_key(this.keypress_1,tint_1);\r\n                this.tint_untint_key(this.keypress_2,tint_2);\r\n                this.tint_untint_key(this.keypress_3,tint_3);\r\n                this.tint_untint_key(this.keypress_4,tint_4);\r\n                this.currentKeyPress = i;\r\n                if(keyPress.REPLAYHIT && this.lasthit_id != keyPress.ID){\r\n                    if(keyPress.K1){\r\n                        this.key_1_count++;\r\n                    }\r\n                    if(keyPress.K2){\r\n                        this.key_2_count++;\r\n                    }\r\n                    if(keyPress.M1){\r\n                        this.key_3_count++;\r\n                    }\r\n                    if(keyPress.M2){\r\n                        this.key_4_count++;\r\n                    }\r\n                    this.keypress_1_Text.text = (this.key_1_count > 0 && this.key_1_count.toString() || \"K1\");\r\n                    this.keypress_2_Text.text = (this.key_2_count > 0 && this.key_2_count.toString() || \"K2\");\r\n                    this.keypress_3_Text.text = (this.key_3_count > 0 && this.key_3_count.toString() || \"M1\");\r\n                    this.keypress_4_Text.text = (this.key_4_count > 0 && this.key_4_count.toString() || \"M2\");\r\n                    this.lasthit_id = keyPress.ID;\r\n                }\r\n\r\n                if(keyPress.SMOKE){\r\n                    var pos = this.getCursorPos();\r\n                    //set pos in frame so we can check distance next frame;\r\n                    keyPress.x = pos.x;\r\n                    keyPress.y = pos.y;\r\n                    //draw smoke to current pos so that its not patchy\r\n                    if(i>0){\r\n                        var lastKey = this.keyPresses[i-1];\r\n                        if(lastKey.SMOKE){\r\n\r\n                            var xDiff = keyPress.x - lastKey.x;\r\n                            var yDiff = keyPress.y - lastKey.y;\r\n                            \r\n                            var distance = osu.helpers.math.distance(keyPress.x, keyPress.y, lastKey.x, lastKey.y);\r\n                            var numPoints = Math.round(distance / 20);\r\n                            var steps = 1/(numPoints+1);\r\n                            var nextStep = steps;\r\n                            for(var j = 0 ; j < numPoints; j++){\r\n                                var posX = keyPress.x + (xDiff * nextStep);\r\n                                var posY = keyPress.y + (yDiff * nextStep);\r\n                                var smoke = osu.objects.Smoke(posX,posY);\r\n                                this.smokeContainer.addChild(smoke);\r\n                                nextStep += steps;\r\n                            }\r\n                        }\r\n                    }\r\n                    var smoke = osu.objects.Smoke(pos.x,pos.y);\r\n                    //smoke will be set to invisible after 2.5seconds im not sure if its worth the effort to remove from container\r\n                    this.smokeContainer.addChild(smoke);\r\n                }\r\n            }else{\r\n                break;\r\n            }\r\n\r\n        }\r\n\r\n    },\r\n\r\n\r\n    render_object: function () {\r\n\r\n\r\n\r\n        var time = this.curMapTime;\r\n\r\n\r\n        for (var x = 0; x < this.warning_arrow_times.length; x++) {\r\n            if (time > this.warning_arrow_times[x].t + 2000 && !this.warning_arrow_times[x].played) {\r\n                this.warning_arrow_times[x].played = true;\r\n                this.flash_warning_arrows();\r\n                break;\r\n            }\r\n        }\r\n        for (var x = 0; x < this.break_times.length; x++) {\r\n            if (time > this.break_times[x].t + 1000 && !this.break_times[x].played) {\r\n                this.break_times[x].played = true;\r\n                //TODO: check performance to toggle correct break screen\r\n                this.show_success();\r\n                break;\r\n            }\r\n        }\r\n\r\n        for (var i = this.oldest_object_position; i < this.hit_objects.length; i++) {\r\n            if (this.hit_objects[i].startTime - this.approachTime > time) {\r\n                break;\r\n            }\r\n            //draw will return false if the object has been destroyed\r\n            //if it has been destroyed we will set the last object count to that pos so we don't iterate over all the objects later on\r\n            if (!this.hit_objects[i].draw(time)) {\r\n                //only allow this to icrement by 1 in case a object is still drawing like a slider.\r\n                if (this.oldest_object_position + 1 == i) {\r\n                    this.oldest_object_position = i;\r\n                }\r\n\r\n            }\r\n        }\r\n        osu.ui.interface.replaycontroller.set_position(this.curMapTime);\r\n\r\n        if(this.curMapTime - this.skipTime > 0){\r\n            this.update_timer_percentage(this.curMapTime/this.beatmap.map_data.time_length, osu.helpers.constants.TIMER_SONG_COLOUR);\r\n        }\r\n        \r\n        if(this.oldest_object_position == this.hit_objects.length -1){\r\n           if(this.curMapTime >= this.delayEnd){\r\n               this.finished = true;\r\n\r\n               event_handler.off(event_handler.EVENTS.RENDER, \"replay_text\");\r\n               osu.ui.interface.scorescreen.renderScoreScreen();\r\n           }\r\n        }\r\n\r\n        this.comboText.text = this.performance.combo + \"X\";\r\n        this.accuracyText.text = this.performance.accuracy + \"%\";\r\n        this.scoreText.text = this.performance.score;\r\n\r\n    },\r\n\r\n    skip_intro: function () {\r\n        if(this.skipTime && this.curMapTime < this.skipTime){\r\n            osu.audio.sound.play_sound(osu.audio.sound.MENUHIT);\r\n            this.go_to(this.skipTime);\r\n        }\r\n\r\n    },\r\n\r\n    getCursorPos: function () {\r\n        return {\r\n            x: this.cursor.x,\r\n            y:this.cursor.y\r\n        }\r\n    },\r\n\r\n    render_replay_frame(){\r\n        var curTime = this.curMapTime;\r\n        if(this.skipTime>0) curTime += this.skipTime;\r\n        for(var i = this.oldestReplayFrame; i < this.replay_data.length; i++){\r\n            var t = this.replay_data[i].t - this.replayDiff;\r\n\r\n            if(t <= 0){\r\n                var x =this.replay_data[i].x;\r\n                var y = this.replay_data[i].y;\r\n                if(x > 0 && y > 0){\r\n                    this.cursor.x = x;\r\n                    this.cursor.y = y;\r\n                    i++;\r\n                    this.oldestReplayFrame =i;\r\n                    break;\r\n                }\r\n            }\r\n            if(curTime >= t){\r\n                var x =this.replay_data[i].x;\r\n                var y = this.replay_data[i].y;\r\n                if(x > 0 && y > 0){\r\n                    this.cursor.x = x;\r\n                    this.cursor.y = y;\r\n                    i++;\r\n                    this.oldestReplayFrame =i;\r\n                }\r\n            }else{\r\n                break;\r\n            }\r\n\r\n        }\r\n\r\n    },\r\n\r\n    toggle_pause: function () {\r\n        if(!this.paused){\r\n            osu.ui.interface.replaycontroller.showPlayIcon();\r\n\r\n            this.paused = true;\r\n            this.pauseScreenContainer.visible = true;\r\n            if(this.has_started){\r\n                this.paused_time = Date.now();\r\n                osu.audio.music.pause();\r\n            }\r\n            return;\r\n        }\r\n        osu.ui.interface.replaycontroller.showPauseIcon();\r\n        this.pauseScreenContainer.visible = false;\r\n        this.paused = false;\r\n        if(this.has_started){\r\n            osu.audio.music.play();\r\n        }\r\n\r\n    },\r\n\r\n\r\n    go_to: function (t) {\r\n        //this will take a time in ms and then go to that point in the map\r\n        //we need to remove everything from the hitobject container\r\n        //we then need to destroy every object prior to the point we are skiping to so that it does not get rendered\r\n        //we then need to reset any object past the point we are skiping to so that if they have already been drawn it wont break things\r\n        //we then need to set the replay frame position to the correct point in time\r\n        //we then need to set the date_started time to be at a point where the calculations work as normal\r\n\r\n        t = parseInt(t);\r\n\r\n        var waspaused = this.paused;\r\n\r\n\r\n        this.smokeContainer.removeChildren(0);\r\n        this.paused = true; //pause game to prevent weird stuff from happening\r\n        osu.audio.music.pause();\r\n        osu.audio.music.set_position(t/1000);\r\n        //\r\n\r\n        //reset break screens / warning arrows\r\n        for(var i = 0; i< this.break_times.length; i++){\r\n                this.break_times[i].played = (t>this.break_times[i].t);\r\n        }\r\n        for(i = 0; i< this.warning_arrow_times.length; i++){\r\n            this.warning_arrow_times[i].played = (t>this.warning_arrow_times[i].t);\r\n        }\r\n\r\n        //reset score/combo\r\n\r\n        this.performance.totalHits = 0;\r\n        this.performance.h300 = 0;\r\n        this.performance.h100 = 0;\r\n        this.performance.h50 = 0;\r\n        this.performance.hMiss  = 0;\r\n        this.performance.combo  = 0;\r\n        this.performance.score  = 0;\r\n        this.performance.accuracy = 100;\r\n\r\n        var addScore = function (hitobject, performance) {\r\n            switch(hitobject.hitType){\r\n                case 'HIT_MISS':\r\n                    performance.addMiss();\r\n                    break;\r\n                case 'HIT_50':\r\n                    performance.add50();\r\n                    break;\r\n                case 'HIT_100':\r\n                    performance.add100();\r\n                    break;\r\n                case 'HIT_300':\r\n                    performance.add300();\r\n                    break;\r\n            }\r\n\r\n        };\r\n\r\n\r\n        //Reset Hitobjects\r\n\r\n        this.hit_object_container.removeChildren(0);\r\n        this.oldest_object_position = 0; //should sync it self back up\r\n        for(i = 0; i< this.hit_objects.length; i++){\r\n            var hitobject = this.hit_objects[i];\r\n            if(hitobject.is_circle){\r\n                if(hitobject.hitTime < t){\r\n                    hitobject.destroy();\r\n                    addScore(hitobject, this.performance)\r\n                }else{\r\n                    hitobject.reset();\r\n                }\r\n\r\n            }else{\r\n                if(hitobject.endTime < t){\r\n                    hitobject.destroy();\r\n                    if(hitobject.is_slider){\r\n                        addScore(hitobject, this.performance)\r\n                    }\r\n\r\n                }else{\r\n                    hitobject.reset();\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        //reset Replay frames\r\n        var curMapTime = parseInt(t);\r\n        if(this.skipTime>0) curMapTime += this.skipTime;\r\n        for(i=0; i < this.replay_data.length; i++){\r\n            var repT = this.replay_data[i].t - this.replayDiff;\r\n            if(curMapTime >= repT){\r\n\r\n                if(this.replay_data[i].x > 0 && this.replay_data[i].y > 0){\r\n                    i++;\r\n                    this.oldestReplayFrame =i;\r\n                }\r\n            }else{\r\n                break;\r\n            }\r\n        }\r\n\r\n        //reset keypresses\r\n\r\n        this.key_1_count = 0;\r\n        this.key_2_count = 0;\r\n        this.key_3_count = 0;\r\n        this.key_4_count = 0;\r\n        this.lasthit_id = -1;\r\n        this.currentKeyPress = 0;\r\n\r\n        for(i=0;  i<this.keyPresses.length; i++){\r\n            var keyPress = this.keyPresses[i];\r\n            if(keyPress.t <= curMapTime){\r\n                this.currentKeyPress = i;\r\n                if(keyPress.REPLAYHIT && this.lasthit_id != keyPress.ID){\r\n                    if(keyPress.K1){\r\n                        this.key_1_count++;\r\n                    }\r\n                    if(keyPress.K2){\r\n                        this.key_2_count++;\r\n                    }\r\n                    if(keyPress.M1){\r\n                        this.key_3_count++;\r\n                    }\r\n                    if(keyPress.M2){\r\n                        this.key_4_count++;\r\n                    }\r\n\r\n                    this.lasthit_id = keyPress.ID;\r\n                }\r\n\r\n\r\n            }\r\n            else{\r\n                break;\r\n            }\r\n\r\n\r\n        }\r\n        this.keypress_1_Text.text = (this.key_1_count > 0 && this.key_1_count.toString() || \"K1\");\r\n        this.keypress_2_Text.text = (this.key_2_count > 0 && this.key_2_count.toString() || \"K2\");\r\n        this.keypress_3_Text.text = (this.key_3_count > 0 && this.key_3_count.toString() || \"M1\");\r\n        this.keypress_4_Text.text = (this.key_4_count > 0 && this.key_4_count.toString() || \"M2\");\r\n\r\n\r\n        this.date_started = Date.now() - (t/ this.getPlayBackMulti());\r\n        this.curMapTime = t;\r\n\r\n\r\n\r\n\r\n        if(!waspaused){\r\n            this.paused = false;\r\n            osu.audio.music.play();\r\n        }\r\n\r\n\r\n\r\n    },\r\n    setPlayBackMulti: function (rate) {\r\n        if(rate <= 0) return; //dont allow 0 or less time as it will break everything;\r\n        var waspaused = this.paused;\r\n        this.paused = true;\r\n        var curTime = (Date.now() - this.date_started - this.paused_time);\r\n        var oldTime = curTime * this.getPlayBackMulti();\r\n        this.playbackMulti = rate;\r\n        var newTime = curTime * this.getPlayBackMulti();;\r\n\r\n        var difference = (oldTime - newTime)/this.getPlayBackMulti() || 0;\r\n\r\n        this.date_started = this.date_started - difference;\r\n\r\n        osu.audio.music.set_playback_speed(this.getPlayBackMulti());\r\n        this.paused = waspaused;\r\n    },\r\n\r\n    game_loop: function () {\r\n\r\n        if(!this.has_started && !this.countdown_started){\r\n            this.date_started = Date.now();\r\n        }\r\n\r\n\r\n        var curTime = (Date.now() - this.date_started - this.paused_time) * this.getPlayBackMulti();\r\n        if(!this.paused){\r\n            if(this.paused_time>0){\r\n                //Increase the date started time by the amount of time it has been paused for this should make everything remain insync\r\n                this.date_started += Date.now() - this.paused_time;\r\n                this.paused_time = 0;\r\n                curTime = (Date.now() - this.date_started - this.paused_time) * this.getPlayBackMulti();\r\n            }\r\n\r\n            this.render_replay_frame();\r\n            this.renderKeyPress();\r\n            if (!this.has_started && curTime > this.audioLeadIn && !this.finished) {\r\n                osu.audio.music.set_playback_speed(this.getPlayBackMulti());\r\n                osu.audio.music.start();\r\n                this.has_started = true;\r\n                this.date_started = Date.now();\r\n                curTime = (Date.now() - this.date_started - this.paused_time) * this.getPlayBackMulti();\r\n                if(this.starting_pos > 0){\r\n                    this.go_to(this.starting_pos);\r\n                }\r\n            } else {\r\n                this.countdown_started = true;\r\n                this.update_timer_percentage(curTime/this.audioLeadIn, osu.helpers.constants.TIMER_INTRO_COLOUR);\r\n            }\r\n\r\n            if (this.has_started) {\r\n\r\n                this.curMapTime = curTime;\r\n                this.paused_time = 0;\r\n                if (this.skipTime ==-1 || this.skipTime > -1 && this.skipTime < this.curMapTime) {\r\n                    this.skip_container.visible = false;\r\n                }else{\r\n                    this.update_timer_percentage(this.curMapTime/this.skipTime, osu.helpers.constants.TIMER_INTRO_COLOUR);\r\n                    this.skip_container.visible = true;\r\n                }\r\n                this.render_object();\r\n\r\n            }\r\n        }\r\n\r\n\r\n        if(!this.finished) window.requestAnimationFrame(this.game_loop.bind(this));\r\n\r\n    }\r\n\r\n\r\n};\r\n\r\n/**\r\n * osu_performance.js\r\n * Created by Ugrend on 23/07/2016.\r\n */\r\nvar osu = osu || {};\r\nosu.game = osu.game || {};\r\nosu.game.Perforamnce = class Performance{\r\n    //https://osu.ppy.sh/wiki/Score\r\n    //Score = Hit Value + Hit Value * (Combo multiplier * Difficulty multiplier * Mod multiplier) / 25\r\n    //Circle Size, HP Drain and Overall Difficulty are giving for each tick a \"diffculty point\";\r\n    // e.g. the maximum a map can give is 27 difficulty points with CS7, OD10 and HP10;\r\n    // the minimum a map can give is 2 difficulty points with CS2, OD0 and HP0. CS cannot normally go below 2 or above 7.\r\n    // Note that mods won't change the Difficulty multiplier. The original values are counting.\r\n    constructor(difficultyRating, modMulti, hpDrain){\r\n        this.combo = 0;\r\n        this.score = 0;\r\n        this.lifebar = 1;\r\n        this._difficultyRating = difficultyRating;\r\n        this._modMulti = modMulti;\r\n\r\n\r\n        this.totalHits = 0;\r\n        this.h300 = 0;\r\n        this.h100 =0;\r\n        this.h50 = 0;\r\n        this.hMiss  = 0;\r\n        this.accuracy = 100;\r\n    }\r\n\r\n    add300(){\r\n        this.h300++;\r\n        this.addPoints(300);\r\n\r\n    }\r\n    add100(){\r\n        this.h100++;\r\n        this.addPoints(100);\r\n\r\n    }\r\n    add50(){\r\n        this.h50++;\r\n        this.addPoints(50);\r\n\r\n    }\r\n    addMiss(){\r\n        this.hMiss++;\r\n        console.log('ayy');\r\n        this.resetCombo();\r\n    }\r\n\r\n    addPoints(p){\r\n        this.score += Math.round(p + p * (this.combo * this._difficultyRating * this._modMulti) / 25);\r\n        this.accuracy = osu.score.getAccuracy(this.h300,this.h100,this.h50,this.hMiss);\r\n        this.combo++;\r\n    }\r\n    resetCombo(){\r\n        if(this.combo > 10){\r\n            osu.audio.sound.play_sound(osu.audio.sound.COMBOBREAK);\r\n        }\r\n        this.combo = 0;\r\n        this.accuracy = osu.score.getAccuracy(this.h300,this.h100,this.h50,this.hMiss);\r\n    }\r\n\r\n\r\n};\r\n/**\r\n * scorescreen.js\r\n * Created by Ugrend on 4/06/2016.\r\n */\r\n\r\n\r\nvar osu = osu || {};\r\nosu.ui = osu.ui || {};\r\nosu.ui.interface = osu.ui.interface || {};\r\nosu.ui.interface.scorescreen = {\r\n    replayStarted: false,\r\n    background: \"\",\r\n    made_by: \"\",\r\n    played_by: \"\",\r\n    date_played: \"\",\r\n    total_score: 0,\r\n    t300Hits: 0,\r\n    t300gHits: 0,\r\n    t100Hits: 0,\r\n    t100kHits: 0,\r\n    t50Hits: 0,\r\n    tMissHits: 0,\r\n    maxCombo: 0,\r\n    accuracy: \"0.00\",\r\n    grade: \"\",\r\n    mods: [],\r\n    beatmap: {},\r\n    master_container: new PIXI.Container(),\r\n    loading: false,\r\n\r\n    getRenderWidth: function(){\r\n        return osu.ui.renderer.renderWidth;\r\n    },\r\n\r\n    getRenderHeight: function(){\r\n        return osu.ui.renderer.renderHeight;\r\n    },\r\n\r\n    map_details_heading_style : {\r\n\r\n        font:  Math.round((osu.ui.renderer.renderHeight + osu.ui.renderer.renderWidth)/100).toString() + 'px Lucida Sans Unicode',\r\n        fill: '#FFFFFF'\r\n    },\r\n\r\n    map_details_style: {\r\n        font: Math.round((osu.ui.renderer.renderHeight + osu.ui.renderer.renderWidth)/150).toString() +'px Lucida Sans Unicode',\r\n        fill: '#FFFFFF'\r\n    },\r\n\r\n    score_font_style: {\r\n        font: 'bold ' + Math.round((osu.ui.renderer.renderHeight + osu.ui.renderer.renderWidth)/36).toString() + 'px  Lucida Sans Unicode',\r\n        fill: '#FFFFFF'\r\n    },\r\n\r\n\r\n\r\n\r\n    create_background_container: function(){\r\n\r\n        this.beatmap.background = this.beatmap.background || \"\"; //prevent pixi breaking on undefined background\r\n        var background = PIXI.Texture.fromImage(this.beatmap.background);\r\n        var background_sprite = new PIXI.Sprite(background);\r\n        background_sprite.width = this.getRenderWidth();\r\n        background_sprite.height = this.getRenderHeight();\r\n        this.master_container.addChild(background_sprite);\r\n\r\n\r\n\r\n        var background_dimmer = new PIXI.Graphics();\r\n        background_dimmer.beginFill(0x0, 0.5);\r\n        background_dimmer.drawRect(0, 0, this.getRenderWidth(), this.getRenderHeight());\r\n\r\n        this.master_container.addChild(background_dimmer);\r\n\r\n\r\n    },\r\n\r\n    create_map_details_container: function(){\r\n        var map_details_area = new PIXI.Graphics();\r\n\r\n        map_details_area.beginFill(0x0,0.8);\r\n        map_details_area.drawRect(0, 0, this.getRenderWidth(), this.getRenderHeight() *.13);\r\n        map_details_area.lineStyle(this.getRenderHeight() *.006,0xE6E6E6,1);\r\n        map_details_area.drawRect(0,this.getRenderHeight() *.13,this.getRenderWidth(),1);\r\n\r\n        this.map_name_text = new PIXI.Text(this.beatmap.map_name, this.map_details_heading_style);\r\n        this.map_name_text.x = 5;\r\n        this.map_name_text.y = this.getRenderHeight() *0.01;\r\n\r\n        this.map_made_by = new PIXI.Text(\"Beatmap by \" + this.beatmap.author, this.map_details_style);\r\n        this.map_made_by.x = 5;\r\n        this.map_made_by.y = this.map_name_text.y + (this.getRenderHeight() * 0.04);\r\n\r\n        this.map_played_by = new PIXI.Text(\"Played by \"+ this.played_by  +\" on \" + this.date_played + \".\", this.map_details_style);\r\n        this.map_played_by.x = 5;\r\n        this.map_played_by.y = this.map_made_by.y + (this.getRenderHeight() * 0.03);\r\n\r\n        this.master_container.addChild(map_details_area);\r\n        this.master_container.addChild(this.map_name_text);\r\n        this.master_container.addChild(this.map_made_by);\r\n        this.master_container.addChild(this.map_played_by);\r\n    },\r\n\r\n    create_total_score_details_container: function () {\r\n        var scoreBox = new PIXI.Graphics();\r\n\r\n        scoreBox.beginFill(0x0,0.7);\r\n        scoreBox.lineStyle(5,0xFFFFFF,1);\r\n        scoreBox.drawRect(this.getRenderWidth() *.015, this.getRenderHeight() *.15, this.getRenderWidth() *.46, this.getRenderHeight() *.1);\r\n\r\n        var scoreLabel = new PIXI.Text(\"Score\", this.map_details_heading_style);\r\n        scoreLabel.x = this.getRenderWidth() *.02;\r\n        scoreLabel.y = this.getRenderHeight() *.215;\r\n\r\n        this.totalScoreText = new PIXI.Text(this.total_score.toString(),this.score_font_style);\r\n        this.totalScoreText.x = this.getRenderWidth() *.30;\r\n        this.totalScoreText.y = this.getRenderHeight() *.2;\r\n        this.totalScoreText.anchor.set(0.5);\r\n\r\n        this.master_container.addChild(scoreBox);\r\n        this.master_container.addChild(scoreLabel);\r\n        this.master_container.addChild(this.totalScoreText);\r\n    },\r\n\r\n    create_hit300_details_container: function () {\r\n        var scoreBox300 = new PIXI.Graphics();\r\n\r\n        scoreBox300.beginFill(0x0,0.7);\r\n        scoreBox300.lineStyle(5,0xFFFFFF,1);\r\n        scoreBox300.drawRect(this.getRenderWidth() *.015, this.getRenderHeight() *.3, this.getRenderWidth() *.46, this.getRenderHeight() *.1);\r\n\r\n        this.total300hitsText = new PIXI.Text(this.t300Hits.toString() + \"x\", this.score_font_style);\r\n        this.total300hitsText.x = this.getRenderWidth() *.16;\r\n        this.total300hitsText.y = this.getRenderHeight() *.35;\r\n        this.total300hitsText.anchor.set(0.5);\r\n\r\n        this.total300ghitsText = new PIXI.Text(this.t300gHits.toString() + \"x\", this.score_font_style);\r\n        this.total300ghitsText.x = this.getRenderWidth() *.39;\r\n        this.total300ghitsText.y = this.getRenderHeight() *.35;\r\n        this.total300ghitsText.anchor.set(0.5);\r\n\r\n\r\n        var hit300png = osu.skins.resources.hit300.texture;\r\n        var hit300gpng = osu.skins.resources.hit300g.texture;\r\n        var hit300Sprite = new PIXI.Sprite(hit300png);\r\n        var hit300gSprite = new PIXI.Sprite(hit300gpng);\r\n\r\n        hit300Sprite.position.x = this.getRenderWidth() *.05;\r\n        hit300Sprite.position.y = this.getRenderHeight() *.35;\r\n        hit300Sprite.width = this.getRenderWidth() *.05;\r\n        hit300Sprite.height = this.getRenderHeight() *.09;\r\n        hit300Sprite.anchor.set(0.5);\r\n\r\n        hit300gSprite.position.x = this.getRenderWidth() *.29;\r\n        hit300gSprite.position.y = this.getRenderHeight() *.35;\r\n        hit300gSprite.width = this.getRenderWidth() *.05;\r\n        hit300gSprite.height = this.getRenderHeight() *.09;\r\n        hit300gSprite.anchor.set(0.5);\r\n\r\n        this.master_container.addChild(scoreBox300);\r\n        this.master_container.addChild(this.total300hitsText);\r\n        this.master_container.addChild(this.total300ghitsText);\r\n        this.master_container.addChild(hit300Sprite);\r\n        this.master_container.addChild(hit300gSprite);\r\n    },\r\n\r\n    create_hit100_details_container: function () {\r\n        var scoreBox100 = new PIXI.Graphics();\r\n\r\n        scoreBox100.beginFill(0x0,0.7);\r\n        scoreBox100.lineStyle(5,0xFFFFFF,1);\r\n        scoreBox100.drawRect(this.getRenderWidth() *.015, this.getRenderHeight() *.43, this.getRenderWidth() *.46, this.getRenderHeight() *.1);\r\n\r\n        this.total100hitsText = new PIXI.Text(this.t100Hits.toString() + \"x\", this.score_font_style);\r\n        this.total100hitsText.x = this.getRenderWidth() *.16;\r\n        this.total100hitsText.y = this.getRenderHeight() *.48;\r\n        this.total100hitsText.anchor.set(0.5);\r\n\r\n        this.total100khitsText = new PIXI.Text(this.t100kHits.toString() + \"x\", this.score_font_style);\r\n        this.total100khitsText.x = this.getRenderWidth() *.39;\r\n        this.total100khitsText.y = this.getRenderHeight() *.48;\r\n        this.total100khitsText.anchor.set(0.5);\r\n\r\n\r\n        var hit100png = osu.skins.resources.hit100.texture;\r\n        var hit100kpng = osu.skins.resources.hit100k.texture;\r\n        var hit100Sprite = new PIXI.Sprite(hit100png);\r\n        var hit100kSprite = new PIXI.Sprite(hit100kpng);\r\n\r\n        hit100Sprite.position.x = this.getRenderWidth() *.05;\r\n        hit100Sprite.position.y = this.getRenderHeight() *.48;\r\n        hit100Sprite.width = this.getRenderWidth() *.05;\r\n        hit100Sprite.height = this.getRenderHeight() *.09;\r\n        hit100Sprite.anchor.set(0.5);\r\n\r\n        hit100kSprite.position.x = this.getRenderWidth() *.29;\r\n        hit100kSprite.position.y = this.getRenderHeight() *.48;\r\n        hit100kSprite.width = this.getRenderWidth() *.05;\r\n        hit100kSprite.height = this.getRenderHeight() *.09;\r\n        hit100kSprite.anchor.set(0.5);\r\n\r\n        this.master_container.addChild(scoreBox100);\r\n        this.master_container.addChild(this.total100hitsText);\r\n        this.master_container.addChild(this.total100khitsText);\r\n        this.master_container.addChild(hit100Sprite);\r\n        this.master_container.addChild(hit100kSprite);\r\n    },\r\n\r\n    create_hit50Misses_details_container: function () {\r\n        var container = new PIXI.Container();\r\n        var scoreBox50 = new PIXI.Graphics();\r\n\r\n        scoreBox50.beginFill(0x0,0.7);\r\n        scoreBox50.lineStyle(5,0xFFFFFF,1);\r\n        scoreBox50.drawRect(this.getRenderWidth() *.015, this.getRenderHeight() *.56, this.getRenderWidth() *.46, this.getRenderHeight() *.1);\r\n\r\n        this.total50hitsText = new PIXI.Text(this.t50Hits.toString() + \"x\", this.score_font_style);\r\n        this.total50hitsText.x = this.getRenderWidth() *.16;\r\n        this.total50hitsText.y = this.getRenderHeight() *.61;\r\n        this.total50hitsText.anchor.set(0.5);\r\n\r\n        this.totalMissesText = new PIXI.Text(this.tMissHits.toString() + \"x\", this.score_font_style);\r\n        this.totalMissesText.x = this.getRenderWidth() *.39;\r\n        this.totalMissesText.y = this.getRenderHeight() *.61;\r\n        this.totalMissesText.anchor.set(0.5);\r\n\r\n\r\n        var hit50png = osu.skins.resources.hit50.texture;\r\n        var hit0png = osu.skins.resources.hit0.texture;\r\n        var hit50Sprite = new PIXI.Sprite(hit50png);\r\n        var hit0Sprite = new PIXI.Sprite(hit0png);\r\n\r\n\r\n        hit50Sprite.position.x = this.getRenderWidth() *.05;\r\n        hit50Sprite.position.y = this.getRenderHeight() *.61;\r\n        hit50Sprite.width = this.getRenderWidth() *.05;\r\n        hit50Sprite.height = this.getRenderHeight() *.09;\r\n        hit50Sprite.anchor.set(0.5);\r\n\r\n        hit0Sprite.position.x = this.getRenderWidth() *.29;\r\n        hit0Sprite.position.y = this.getRenderHeight() *.61;\r\n        hit0Sprite.width = this.getRenderWidth() *.05;\r\n        hit0Sprite.height = this.getRenderHeight() *.09;\r\n        hit0Sprite.anchor.set(0.5);\r\n\r\n\r\n\r\n        this.master_container.addChild(scoreBox50);\r\n        this.master_container.addChild(this.total50hitsText);\r\n        this.master_container.addChild(this.totalMissesText);\r\n        this.master_container.addChild(hit50Sprite);\r\n        this.master_container.addChild(hit0Sprite);\r\n\r\n\r\n    },\r\n\r\n    create_combo_accuracy_details_container: function () {\r\n        var scoreBoxCombo = new PIXI.Graphics();\r\n\r\n        var maxComboLabel = new PIXI.Text(\"Max Combo\", this.map_details_heading_style);\r\n        maxComboLabel.x = this.getRenderWidth() *.02;\r\n        maxComboLabel.y = this.getRenderHeight() *.68;\r\n\r\n        var accuracyLabel = new PIXI.Text(\"Accuracy\", this.map_details_heading_style);\r\n        accuracyLabel.x = this.getRenderWidth() *.3;\r\n        accuracyLabel.y = this.getRenderHeight() *.68;\r\n\r\n\r\n        this.maxComboText = new PIXI.Text(this.maxCombo.toString() + \"x\", this.score_font_style);\r\n        this.maxComboText.x = this.getRenderWidth() *.02;\r\n        this.maxComboText.y = this.getRenderHeight() *.705;\r\n\r\n        this.accuracyText = new PIXI.Text(this.accuracy + \"%\", this.score_font_style);\r\n        this.accuracyText.x = this.getRenderWidth() *.27;\r\n        this.accuracyText.y = this.getRenderHeight() *.705;\r\n\r\n\r\n        scoreBoxCombo.beginFill(0x0,0.7);\r\n        scoreBoxCombo.lineStyle(5,0xFFFFFF,1);\r\n        scoreBoxCombo.drawRect(this.getRenderWidth() *.015, this.getRenderHeight() *.71, this.getRenderWidth() *.46, this.getRenderHeight() *.1);\r\n\r\n        this.master_container.addChild(maxComboLabel);\r\n        this.master_container.addChild(accuracyLabel);\r\n        this.master_container.addChild(scoreBoxCombo);\r\n        this.master_container.addChild(this.maxComboText);\r\n        this.master_container.addChild(this.accuracyText);\r\n\r\n    },\r\n\r\n    create_grade_details_container: function () {\r\n        var gradepng = osu.skins.resources[osu.score.GRADES[this.grade].large_icn].texture;\r\n        var gradeSprite = new PIXI.Sprite(gradepng);\r\n\r\n        gradeSprite.position.x = this.getRenderWidth() *.8;\r\n        gradeSprite.position.y = this.getRenderHeight() *.4;\r\n        gradeSprite.width = this.getRenderWidth() *.3;\r\n        gradeSprite.height = this.getRenderHeight() *.5;\r\n        gradeSprite.anchor.set(0.5);\r\n\r\n\r\n\r\n\r\n\r\n        var replaypng = osu.skins.resources.pause_replay.texture;\r\n        var replay_Sprite = new PIXI.Sprite(replaypng);\r\n        replay_Sprite.position.x = this.getRenderWidth() *.8;\r\n        replay_Sprite.position.y = this.getRenderHeight() *.8;\r\n        replay_Sprite.width = this.getRenderWidth() *.2;\r\n        replay_Sprite.height = this.getRenderHeight() *.2;\r\n        replay_Sprite.anchor.set(0.5);\r\n        replay_Sprite.interactive = true;\r\n        replay_Sprite.on(\"mouseup\", this.start_replay.bind(this));\r\n        replay_Sprite.on(\"touchend\", this.start_replay.bind(this));\r\n\r\n\r\n        var backFrames = [];\r\n\r\n\r\n        if(osu.skins.resources.menu_back_0){\r\n            for(var i = 0; i < 99; i++){\r\n                if(osu.skins.resources[\"menu_back_\"+i]){\r\n                    backFrames.push(osu.skins.resources[\"menu_back_\"+i].texture);\r\n                }else{\r\n                    break;\r\n                }\r\n            }\r\n        }else{\r\n            backFrames.push(osu.skins.resources.menu_back.texture);\r\n        }\r\n\r\n\r\n        var backAnimation = new PIXI.extras.MovieClip(backFrames);\r\n        backAnimation.position.x = this.getRenderWidth() *.05;\r\n        backAnimation.position.y = this.getRenderHeight() - 50;\r\n        backAnimation.interactive = true;\r\n        //backAnimation.width = this.getRenderWidth() *.2;\r\n        //backAnimation.height = this.getRenderHeight() *.2;\r\n        backAnimation.anchor.set(0.5,1);\r\n        backAnimation.on(\"mouseup\", this.exit.bind(this));\r\n        backAnimation.on(\"touchend\", this.exit.bind(this));\r\n        backAnimation.animationSpeed = 0.1;\r\n        backAnimation.play();\r\n\r\n        this.master_container.addChild(gradeSprite);\r\n        for(i = 0; i < this.mods.length ; i++ ){\r\n            if(this.mods[i].icon != \"\"){\r\n                var modpng = osu.skins.resources[this.mods[i].icon].texture;\r\n                var modSprite = new PIXI.Sprite(modpng);\r\n                modSprite.position.y = this.getRenderHeight() *.7;\r\n                modSprite.position.x = (this.getRenderWidth() *.9) - (i*50);\r\n                modSprite.anchor.set(0.5);\r\n                this.master_container.addChild(modSprite);\r\n            }\r\n        }\r\n\r\n        this.master_container.addChild(replay_Sprite);\r\n        this.master_container.addChild(backAnimation);\r\n\r\n    },\r\n    exit: function () {\r\n        osu.audio.sound.play_sound(osu.audio.sound.MENUBACK);\r\n        osu.ui.interface.mainscreen.show_main_screen();\r\n    },\r\n\r\n    start_replay: function(){\r\n        var self = this;\r\n\r\n        if(replay.type != \"0\"){\r\n            new PNotify({\r\n                title: 'Game mode unsupported',\r\n                text: \"Currently only osu! game mode is supported :(\",\r\n                type: 'error'\r\n            });\r\n            return;\r\n        }\r\n\r\n        var params = getParams();\r\n        if('t' in params){\r\n            var time = 0;\r\n            var hourRegex = /([0-9]+)h/g;\r\n            var minRegex = /([0-9]+)m/g;\r\n            var secRegex = /([0-9]+)s/g;\r\n            var hourMatch = hourRegex.exec(params.t);\r\n            var minMatch = minRegex.exec(params.t);\r\n            var secMatch = secRegex.exec(params.t);\r\n            if(hourMatch && hourMatch[1]){\r\n                time += hourMatch[1] * 3600000;\r\n            }\r\n            if(hourMatch && hourMatch[1]){\r\n                time += hourMatch[1] * 3600000;\r\n            }\r\n            if(minMatch && minMatch[1]){\r\n                time += minMatch[1] * 60000;\r\n            }\r\n            if(secMatch && secMatch[1]){\r\n                time += secMatch[1] * 1000;\r\n            }\r\n            osu.ui.interface.osugame.starting_pos = time;\r\n        }\r\n\r\n        if(!osu.audio.music.loaded()){\r\n            setTimeout(function () {\r\n                if(!self.loading){\r\n\r\n                    osu.audio.sound.play_sound(osu.audio.sound.MENUHIT);\r\n                    self.loading = new PNotify({\r\n                        title: 'Loading song',\r\n                        type: 'info',\r\n                        hide: false\r\n                    });\r\n                }\r\n                self.start_replay();\r\n\r\n            },1000);\r\n            return;\r\n        }\r\n        if(self.loading){\r\n\r\n            self.loading.remove()\r\n        }else{\r\n            osu.audio.sound.play_sound(osu.audio.sound.MENUHIT);\r\n        }\r\n\r\n        if(this.replayStarted) return; // prevent multi clicks\r\n        this.replayStarted = true;\r\n        setTimeout(function () {\r\n            //ghetto fix to play menu sound\r\n            osu.audio.music.preview_screen = false;\r\n\r\n            osu.ui.interface.osugame.replay_data = replay.replayData;\r\n            osu.ui.interface.osugame.beatmap = self.beatmap;\r\n            osu.ui.interface.osugame.mods = self.mods;\r\n            osu.ui.interface.osugame.replay_played_by_text = \"REPLAY MODE - Watching \" + replay.playerName + \" play \" + self.beatmap.map_name;\r\n            osu.ui.interface.osugame.initGame();\r\n            osu.audio.music.stop();\r\n            osu.ui.interface.osugame.game_loop();\r\n        },2000);\r\n\r\n    },\r\n\r\n\r\n    create_master_container: function () {\r\n        this.master_container.removeChildren();\r\n        this.create_background_container();\r\n        this.create_map_details_container();\r\n        this.create_total_score_details_container();\r\n        this.create_hit300_details_container();\r\n        this.create_hit100_details_container();\r\n        this.create_hit50Misses_details_container();\r\n        this.create_combo_accuracy_details_container();\r\n        this.create_grade_details_container();\r\n\r\n    },\r\n\r\n    onRender: function(){\r\n\r\n    },\r\n\r\n    renderScoreScreen: function(){\r\n        osu.ui.interface.replaycontroller.bindEvents();\r\n        osu.ui.interface.replaycontroller.showPlayIcon();\r\n        osu.ui.interface.replaycontroller.set_position(0);\r\n        osu.ui.interface.replaycontroller.set_duration(this.beatmap.map_data.time_length+2000);\r\n        osu.ui.interface.replaycontroller.disable_progressbar();\r\n        osu.ui.interface.replaycontroller.showBar();\r\n        this.$footer = osu.ui.interface.mainscreen.$footer || $(\"#footer\");\r\n        this.$footer.attr('style','');\r\n        this.$footer.css('display', 'none');\r\n        this.replayStarted = false;\r\n        osu.ui.renderer.fixed_aspect = false;\r\n        osu.ui.renderer.start();\r\n        this.create_master_container();\r\n        osu.ui.renderer.clearStage();\r\n        osu.ui.renderer.addChild(this.master_container);\r\n        var $replayURL = $(\"#replay_url\");\r\n        $replayURL.val(\"\");\r\n        var paramURL = \"\";\r\n        var params = getParams();\r\n\r\n        var autoplay = false;\r\n\r\n\r\n        if('ap' in params){\r\n            if(params.ap == \"1\" || params.ap == \"t\"){\r\n                autoplay = true;\r\n            }\r\n        }\r\n\r\n        for(var k in params){\r\n            if(params.hasOwnProperty(k)){\r\n                if(k != \"r\" && k != 'ap'){\r\n                    paramURL += \"&\"+k+ '=' + params[k];\r\n                }\r\n            }\r\n        }\r\n        $.ajax({\r\n            url : APIURL + \"replays\",\r\n            type: 'GET',\r\n            data: {'replay_id': replay.b64md5sum, 'validate_only':true},\r\n            dataType: 'json',\r\n            success: function (data) {\r\n                if(data){\r\n                    if(data.status  != \"error\"){\r\n                       $replayURL.val(window.location.href.split('?')[0] + \"?r=\" + data + paramURL);window.history.pushState(data, 'osu Replays', '?r='+data + paramURL);\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n        });\r\n\r\n        osu.audio.music.init(this.beatmap.song, this.beatmap.song_md5sum);\r\n        osu.audio.music.preview_screen = true;\r\n        if(osu.audio.music.__audio && osu.audio.music.__audio.readyState != 4 && (osu.audio.music.__audio.src != \"\" || !osu.audio.music.__audio.error)){\r\n            //if it is external we want to reset the position to 0 so it doesnt break bufffering\r\n            osu.audio.music.set_position(0);\r\n            osu.audio.music.preview_screen = false;\r\n        }\r\n\r\n\r\n        osu.audio.music.preview_time = this.beatmap.map_data.general.PreviewTime / 1000;\r\n        osu.audio.music.start();\r\n        document.getElementById(\"replay_url_area\").className = \"\";\r\n        document.getElementById(\"open_config_button_other\").className = \"\";\r\n        document.getElementById(\"playback_ratio_area\").className = \"col-lg-1\";\r\n            if(autoplay){\r\n                this.start_replay();\r\n            }\r\n    }\r\n\r\n};\r\n/**\r\n *\r\n *\r\n * Created by Ugrend on 6/08/2016.\r\n */\r\n\r\nosu = osu || {};\r\nosu.webapi = osu.webapi || {};\r\nosu.webapi.audio = {\r\n    findAudio: function (beatmap, callback, checkedLocal, checkLocalStatus) {\r\n\r\n        var songFound = false;\r\n        if(!osu.settings.SETTINGS.asset_server && !osu.settings.SETTINGS.song_url){\r\n            callback(beatmap);\r\n        }\r\n\r\n        if(!checkedLocal && osu.settings.SETTINGS.asset_server){\r\n            var a = new Audio();\r\n            var song = osu.settings.SETTINGS.asset_server +\"/\" + beatmap.song_md5sum;\r\n            a.src = song;\r\n            a.onloadedmetadata = function () {\r\n                osu.webapi.audio.findAudio(beatmap, callback, true, true);\r\n            };\r\n            a.onerror = function () {\r\n                osu.webapi.audio.findAudio(beatmap, callback, true,false);\r\n            } ;\r\n            return;\r\n        }\r\n\r\n        if(checkedLocal){\r\n            if(checkLocalStatus){\r\n                songFound = true;\r\n                beatmap.song = osu.settings.SETTINGS.asset_server +\"/\" + beatmap.song_md5sum;\r\n                callback(beatmap);\r\n            }\r\n        }\r\n\r\n\r\n        if(osu.settings.SETTINGS.song_url && (!(osu.settings.SETTINGS.asset_server && checkedLocal && songFound))){\r\n            if(beatmap.__beatmap.beatmapid){\r\n                beatmap.song = osu.settings.SETTINGS.song_url+ \"/\" +beatmap.__beatmap.beatmapid;\r\n                callback(beatmap);\r\n            }\r\n            else{\r\n                $.ajax({\r\n                    url: APIURL + \"beatmaps\",\r\n                    type: 'GET',\r\n                    data: {bmhash: beatmap.md5sum, validate_only: true},\r\n                    dataType: 'json',\r\n                    success: function (data) {\r\n                        if (data) {\r\n                            var beatmap_id = data.data.beatmap_id;\r\n                            beatmap.song = osu.settings.SETTINGS.song_url+ \"/\" +beatmap_id;\r\n                            callback(beatmap);\r\n                        }\r\n                    },\r\n                    error: function () {\r\n                        callback(beatmap);\r\n                    }\r\n                });\r\n            }\r\n\r\n\r\n        }\r\n\r\n        if(!osu.settings.SETTINGS.song_url && !songFound){\r\n            callback(beatmap);\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n};\r\n\r\n\r\n/**\r\n * webapi/beatmaps.js\r\n * Created by Ugrend on 4/08/2016.\r\n */\r\n\r\nosu = osu || {};\r\nosu.webapi = osu.webapi || {};\r\nosu.webapi.beatmaps = {\r\n\r\n    /*\r\n     upload beatmap object to server\r\n     */\r\n    uploadBeatMap: function (beatmap) {\r\n\r\n        var beatmapFile = beatmap.data;\r\n        var assets = beatmap.files;\r\n        var beatmapMD5 = beatmap.md5sum;\r\n\r\n        $.ajax({\r\n            url: APIURL + \"beatmaps\",\r\n            type: 'GET',\r\n            data: {id: beatmapMD5, validate_only: true},\r\n            dataType: 'json',\r\n            success: function (data) {\r\n                //only upload beatmap if server doesnt have it else just update assets\r\n                if (data) {\r\n                    //TODO PUT\r\n\r\n                } else {\r\n                    $.ajax({\r\n                        url: APIURL + \"beatmaps\",\r\n                        type: 'POST',\r\n                        data: {beatmap: beatmapFile, assets: JSON.stringify(assets)},\r\n                        dataType: 'json',\r\n                        success: function (data) {\r\n\r\n                        }\r\n                    });\r\n                }\r\n\r\n            }\r\n        });\r\n\r\n    },\r\n\r\n    loadBeatMap: function (id, callback) {\r\n        $.ajax({\r\n            url: APIURL + \"beatmaps\",\r\n            type: 'GET',\r\n            data: {bmhash: id},\r\n            dataType: 'json',\r\n            success: function (data) {\r\n\r\n                if(data.status == \"error\"){\r\n                    callback(false);\r\n                    return;\r\n                }\r\n                var beatmap = {};\r\n\r\n                //TODO: rewrite parser so im not duplicating code here\r\n                beatmap.parsed = parse_osu_map_data(data.data.beatmap);\r\n                var difficultyCalc = new osu.beatmaps.DifficultyCalculator(beatmap.parsed);\r\n                beatmap.stars = difficultyCalc.calculate();\r\n                for (var k in beatmap.parsed.metadata) {\r\n                    beatmap[k.toLocaleLowerCase()] = beatmap.parsed.metadata[k];\r\n                }\r\n                var background_file_name = beatmap.parsed.events[0][2].replace(/\"/g, '');\r\n                beatmap.files = data.data.assets;\r\n                for (var i = 0; i < beatmap.files.length; i++) {\r\n                    if(beatmap.files[i].filename == background_file_name){\r\n                        beatmap.background = beatmap.files[i].md5sum;\r\n                    }\r\n                    if(beatmap.files[i].filename == beatmap.parsed.general.AudioFilename){\r\n                        beatmap.song = beatmap.files[i].md5sum;\r\n                    }\r\n                }\r\n                beatmap.thumbnail = \"NOT_CALCULATED\";\r\n                beatmap.md5sum = id;\r\n                database.insert_data(database.TABLES.BEATMAPS, beatmap.md5sum, beatmap, function () {\r\n                    //when calling for a map the server does not have, the server will first find the osu file over other files for the client\r\n                    //It will give us a task id which we can watch to see if we have got the assets\r\n                    //Once the task is done we can then update the map with the correct assets\r\n\r\n                    if(!data.data.assets.length && data.data.task_id){\r\n                        osu.webapi.tasks.checkForMapAssets(beatmap.md5sum,  data.data.task_id)\r\n                    }\r\n\r\n\r\n                    callback(true);\r\n                }, function () {\r\n                    callback(true);\r\n                });\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n};\r\n/**\r\n * webapi/replays.js\r\n * Created by Ugrend on 4/08/2016.\r\n */\r\n\r\nosu = osu || {};\r\nosu.webapi = osu.webapi || {};\r\nosu.webapi.replays = {\r\n    \r\n    uploadReplay: function (file,base64md5) {\r\n        var formData = new FormData();\r\n        formData.append('replay', file);\r\n        // We don't want to upload the replay if its already there, so we will check first before uploading.\r\n        $.ajax({\r\n            url : APIURL + \"replays\",\r\n            type: 'GET',\r\n            data: {'replay_id': base64md5,'validate_only':true},\r\n            dataType: 'json',\r\n            success: function (data) {\r\n                if(!data){\r\n                    $.ajax({\r\n                        url : APIURL + \"replays\",\r\n                        type : 'POST',\r\n                        data : formData,\r\n                        processData: false,  // tell jQuery not to process the data\r\n                        contentType: false,  // tell jQuery not to set contentType\r\n                        success : function(data) {\r\n\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        })\r\n\r\n\r\n    },\r\n\r\n    loadReplay: function(id){\r\n\r\n\r\n        $.ajax({\r\n            url : APIURL + \"replays\",\r\n            type : 'GET',\r\n            data : {'replay_id': id},\r\n            dataType: 'json',\r\n            success : function(data) {\r\n                if(data.status == \"success\"){\r\n                    ReplayParser(base64ToUint8Array(data.data), function (replay_data) {\r\n                        replay = replay_data; //TODO: not be essentially global\r\n                        loadBeatMap();\r\n                    });\r\n                }else{\r\n                    new PNotify({\r\n                        title: 'Replay not found',\r\n                        text: data.msg,\r\n                        type: 'error'\r\n                    });\r\n\r\n                }\r\n\r\n            }\r\n        });\r\n    }\r\n    \r\n    \r\n};\r\n/**\r\n * webapi/tasks\r\n * Created by Ugrend on 13/12/2016.\r\n */\r\n\r\nosu = osu || {};\r\nosu.webapi = osu.webapi || {};\r\nosu.webapi.tasks = {\r\n\r\n    _joinAssetsToMap: function(map,assets){\r\n        //dont add if already there\r\n        for(var i = 0; i < assets.length; i++){\r\n            for(var j =0; j< map.files.length ; j++){\r\n                if(assets[i]['filename'] == map.files[j]['filename']){\r\n                    assets.splice(i,1);\r\n                }\r\n            }\r\n        }\r\n        for(i =0 ; i< assets.length; i++ ){\r\n            map.files.push(assets[i]);\r\n        }\r\n\r\n        if(!map.song){\r\n            var filename = map.parsed.general.AudioFilename;\r\n            var trustedFile = false;\r\n            for(i = 0; i< map.files.length ; i++){\r\n                if(filename == map.files[i]['filename']){\r\n                    if(map.files[i]['trusted']){\r\n                        trustedFile = i;\r\n                    }\r\n                    map.song = map.files[i]['md5sum']\r\n                }\r\n            }\r\n            if(trustedFile === 0 || trustedFile){\r\n                map.song = map.files[trustedFile]['md5sum']\r\n            }\r\n        }\r\n        if(!map.background){\r\n            filename = map.parsed.events[0][2].replace(/\"/g, '');\r\n            trustedFile = false;\r\n            for(i = 0; i< map.files.length ; i++){\r\n                if(filename == map.files[i]['filename']){\r\n                    if(map.files[i]['trusted']){\r\n                        trustedFile = i;\r\n                    }\r\n                    map.background = map.files[i]['md5sum']\r\n                }\r\n            }\r\n            if(trustedFile === 0 || trustedFile){\r\n                map.background = map.files[trustedFile]['md5sum']\r\n            }\r\n        }\r\n    },\r\n\r\n    checkForMapAssets: function (map_hash, task_id, attempt) {\r\n        if(!attempt){\r\n            attempt = 0;\r\n        }\r\n        attempt++;\r\n\r\n        if(task_id){\r\n            $.ajax({\r\n                url: APIURL + \"tasks\",\r\n                type: 'GET',\r\n                data: {task_id: task_id},\r\n                dataType: 'json',\r\n                success: function (data) {\r\n                    if(data.data.state == \"SUCCESS\"){\r\n                        database.get_data(database.TABLES.BEATMAPS,map_hash, function (d) {\r\n                            var map = d.data;\r\n                            var assets = data.data.result;\r\n                            osu.webapi.tasks._joinAssetsToMap(map, assets);\r\n                            database.update_data(database.TABLES.BEATMAPS,map_hash,map)\r\n                        });\r\n\r\n\r\n\r\n                    }else if(data.data.state == \"PENDING\"){\r\n                        //only try this 10times as if somehow we get wrong task id the task will always be in pending\r\n                        if(attempt < 10){\r\n                            //try again later\r\n                            setTimeout(function () {\r\n                                osu.webapi.tasks.checkForMapAssets(map_hash,task_id,attempt)\r\n                            },60000)\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n\r\n\r\n        }else{\r\n            //TODO: we are just checking for assets for map\r\n\r\n            $.ajax({\r\n                type: 'GET',\r\n                data: {'bmhash': map_hash, 'assets_only': true},\r\n                dataType: 'json',\r\n                success: function (data) {\r\n                    if(data.status == 'success'){\r\n                        if(data.data.assets && data.data.assets.length){\r\n                            database.get_data(database.TABLES.BEATMAPS,map_hash, function (d) {\r\n                                var map = d.data;\r\n                                var assets = data.data.assets;\r\n                                osu.webapi.tasks._joinAssetsToMap(map, assets);\r\n                                database.update_data(database.TABLES.BEATMAPS,map_hash,map)\r\n                            });\r\n\r\n\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n};\r\n/**\r\n * launcher.js\r\n * Created by Ugrend on 22/06/2016.\r\n */\r\n\r\nif (!window.indexedDB) {\r\n    console.log(\"no index db = no storage \")\r\n}\r\nelse {\r\n    database.init(function () {\r\n        osu.settings.onloaded = function () {\r\n            osu.skins.init();\r\n\r\n            osu.skins.onloaded = function () {\r\n                osu.ui.interface.mainscreen.init();\r\n            };\r\n\r\n\r\n        };\r\n        osu.settings.init();\r\n    });\r\n}\r\n"]}