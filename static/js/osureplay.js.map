{"version":3,"sources":["../../src/osureplay-es6.js"],"names":["DEBUG","APIURL","hidePrototypeWarning","document","getElementById","className","Uint8ToString","u8a","CHUNK_SZ","c","i","length","push","String","fromCharCode","apply","subarray","join","getParams","queryDict","location","search","substr","split","forEach","item","base64ToUint8Array","base64","binary_string","window","atob","len","bytes","Uint8Array","charCodeAt","mainArea","dragDropZone","dragDropLabel","replay","beatmap","zip","workerScriptsPath","prototype","slice","Element","scrollIntoViewIfNeeded","centerIfNeeded","arguments","parent","parentNode","parentComputedStyle","getComputedStyle","parentBorderTopWidth","parseInt","getPropertyValue","parentBorderLeftWidth","overTop","offsetTop","scrollTop","overBottom","clientHeight","overLeft","offsetLeft","scrollLeft","overRight","clientWidth","alignWithTop","scrollIntoView","osu","skins","COMBO_COLOURS","DEFAULT_COLOURS","loaded","resources","DEFAULT_RESOURCES","name","url","init","self","database","getAll","result","md5sum","current_skin","settings","SETTINGS","selected_skin","get_data","TABLES","SKINS","data","colours","_loadAssetsFromIDB","assets","loadSkin","bind","cb","_length","_loaded","fileExt","filename","pop","toLowerCase","replace","ASSETS","audio","skin","skinArray","k","hasOwnProperty","loader","PIXI","loaders","Loader","add","on","loadProgressHandler","load","console","log","onloaded","event_handler","emit","EVENTS","RESOURCES_LOADED","sound","applause","combobreak","count1s","count2s","count3s","drum_hitclap","drum_hitfinish","drum_hitfinish2","drum_hitnormal","drum_hitnormal19","drum_hitnormal2","drum_hitwhistle","drum_sliderslide","drum_slidertick","drum_sliderwhistle","failsound","gos","menuback","menuclick","menuhit","normal_hitclap","normal_hitfinish","normal_hitnormal","normal_hitwhistle","normal_sliderslide","normal_slidertick","normal_sliderwhistle","readys","sectionfail","sectionpass","shutter","soft_hitclap","soft_hitclap19","soft_hitfinish","soft_hitnormal","soft_hitwhistle","soft_sliderslide","soft_sliderslide2","soft_slidertick","soft_sliderwhistle","spinnerbonus","spinner_osu","spinnerspin","loadBeatMap","BEATMAPS","bmMd5Hash","e","beatmaps","BeatmapLoader","showReplayData","loading","PNotify","title","text","type","hide","webapi","remove","ui","interface","mainscreen","hide_main_screen","scorescreen","mods","been_rendered","played_by","playerName","date_played","time_played","total_score","tScore","t300Hits","h300","t300gHits","hGekis","t100Hits","h100","t100kHits","hKatus","t50Hits","h50","tMissHits","hMisses","maxCombo","tCombo","grade","accuracy","setTimeout","renderScoreScreen","renderer","renderWidth","innerWidth","renderHeight","innerHeight","masterStage","Container","render_zone","fixed_aspect","addChild","child","removeChild","clearStage","removeChildren","animate","RENDER","render","requestAnimationFrame","resize","x","y","fixed_ratio_y","fixed_ratio_x","view","style","width","height","start","autoDetectRenderer","appendChild","onresize","innerHTML","show","replaycontroller","__$controlBar","$","__$togglePlayButton","__$progressBar","__$volume","__$configButton","__$replayCurTime","__$replayDuration","__eventsBound","__ignoreUpdates","_currentDuration","_currentPosition","showBar","slideDown","hideBar","slideUp","convertMs","t","seconds","minutes","hours","set_duration","prop","max","set_position","val","__setVolume","master_volume","showPauseIcon","src","showPlayIcon","disable_progressbar","enable_progressbar","bindEvents","replayStarted","osugame","toggle_pause","start_replay","SETTINGS_CHANGED","go_to","toggle_settings","Object","freeze","BEATMAP_LOADING","BEATMAP_LOADED","BEATMAP_LOADING_FAILED","REPLAY_LOADING","REPLAY_LOADED","REPLAY_LOAD_FAILED","BEATMAP_NOTFOUND","DB_ERROR","ASSET_NOT_FOUND","UNKNOWN_FILE_ERROR","INVALID_FILE","BEATMAP_SELECTED","STOP_REPLAY","SKIN_LOADING","SKIN_LOADED","SKIN_LOADING_FAILED","RESOURCES_LOADING","__events","eventName","fn","alias","parent_object","off","splice","obj","Date","now","toString","data_loaded","options","update","removeAll","parse_osu_map_data","beatmap_config","version","general","metadata","difficulty","events","timing_points","hit_objects","minBPM","maxBPM","circles","sliders","spinners","time_length","lines","current_setting","parentBPMS","line","trim","indexOf","parseFloat","parts","timingPoint","offset","millisecondsPerBeat","meter","sampleType","sampleSet","volume","inherited","kaiMode","multiplier","Math","abs","round","hit_object","objects","HitObjectParser","parse_line","SliderMultiplier","TYPES","CIRCLE","SLIDER","SPINNER","lastHitObject","endTime","startTime","BeatmapReader","beatmap_zip_file","callback","beatMap","maps","md5sums","zip_length","extracted","beatmaps_loaded","beatmap_loaded","create_thumbnail","img_data","MAX_WIDTH","MAX_HEIGHT","canvas","createElement","img","ctx","getContext","drawImage","toDataURL","processing_complete","parsed","toLocaleLowerCase","files","background_file_name","thumbnail","insert_data","background","AudioFilename","song","thumbnail_md5sum","md5","difficultyCalc","DifficultyCalculator","stars","calculate","uploadBeatMap","createReader","BlobReader","reader","getEntries","entries","extract_data","getData","TextWriter","current","total","Data64URIWriter","error","FileReader","body","ondragover","ondragend","ondrop","preventDefault","file","dataTransfer","onloadend","event","target","readyState","constructor","replay_data","b64encoded","btoa","replays","uploadReplay","ReplayParser","insertResult","readAsArrayBuffer","locked","bm","SkinReader","readAsDataURL","indexedDB","mozIndexedDB","webkitIndexedDB","msIndexedDB","IDBTransaction","webkitIDBTransaction","msIDBTransaction","IDBKeyRange","webkitIDBKeyRange","msIDBKeyRange","__db","__started","indexeddb_available","REPLAYS","OPTIONS","INDEXES","BEATMAP_ID","PLAYER","onsucess","createDatabase","open","onupgradeneeded","thisDB","objectStoreNames","contains","table","createObjectStore","createIndex","unique","onsuccess","onerror","transaction","objectStore","query","get","get_count","countReq","count","delete_data","key","request","delete","get_all_keys","openCursor","cursor","continue","get_data_from_index","index","param","only","value","update_data","put","delete_database","deleteDatabase","clear_table","table_name","objectStoreRequest","clear","b64EncodedMd5","RP","replay_bytes","byte_index","getByte","getShort","getInteger","getLong","getULEB128","s","byte","getString","startByte","rMd5Hash","fullClear","getMods","lifeBar","replayByteLength","b64md5sum","epoch","date_time","toLocaleString","score","getGrade","getAccuracy","LZMA","decompress","replayData","lastTimeFrame","splitData","time","replayFrame","keys","keypress","get_keys","skin_zip","author","process_count","RGBToHex","r","g","b","bin","h","Array","toUpperCase","extension","j","setting","rgb","HitSound","HIT_SOUNDS","SOUND_NORMAL","SOUND_WHISTLE","SOUND_FINISH","SOUND_CLAP","HIT_ADDITIONS","NORMAL","SOFT","DRUM","getHitSounds","hitSoundArray","timing","noNormals","soundArray","hitAdditons","music","preview_screen","preview_time","__audio","playing","events_bound","using_howl","set_volume","startsWith","Howl","unload","Audio","pause","onend","repeat","onended","set_playback_speed","music_volume","stop","currentTime","seek","play","rate","playbackRate","APPLAUSE","COMBOBREAK","COUNT1S","COUNT2S","COUNT3S","DRUM_HITCLAP","DRUM_HITFINISH","DRUM_HITNORMAL","DRUM_HITWHISTLE","DRUM_SLIDERSLIDE","DRUM_SLIDERTICK","DRUM_SLIDERWHISTLE","FAILSOUND","GOS","MENUBACK","MENUCLICK","MENUHIT","NORMAL_HITCLAP","NORMAL_HITFINISH","NORMAL_HITNORMAL","NORMAL_HITWHISTLE","NORMAL_SLIDERSLIDE","NORMAL_SLIDERTICK","NORMAL_SLIDERWHISTLE","READYS","SECTIONFAIL","SECTIONPASS","SHUTTER","SOFT_HITCLAP","SOFT_HITFINISH","SOFT_HITNORMAL","SOFT_HITWHISTLE","SOFT_SLIDERSLIDE","SOFT_SLIDERTICK","SOFT_SLIDERWHISTLE","SPINNERBONUS","SPINNER_OSU","SPINNERSPIN","initialised","play_sound","effect","sound_effects_volume","BeatmapPreview","artist","artistunicode","beatmapid","beatmapsetid","creator","source","tags","thumbnail_data","titleunicode","preview_song_time","approachRate","circleSize","overallDifficulty","HPDrain","bpm","song_length","PreviewTime","ApproachRate","CircleSize","OverallDifficulty","HPDrainRate","display_stars","ceil","w","star_img","star","milliseconds","pad","substring","set_background","beatmap_found","map_name","required_files","map_data","__beatmap","__files_needed","song_md5sum","__beatmap_loaded","__look_in_db","__load_bm_from_db","file_to_get","__load_assets_from_db","tasks","checkForMapAssets","__process_beatmap","__lookup_file_md5","__get_asset_from_md5","Artist","Title","Version","Creator","findAudio","SPEED","AIM","parsedBeatmapData","TpHitObject","hitObject","TpSlider","sliderTime","repeatCount","curve","Curve","floor","get_point","DECAY_BASE","ALMOST_DIAMETER","STREAM_SPACING_TRESHOLD","SINGLE_SPACING_TRESHOLD","SPACING_WEIGHT_SCALING","LAZY_SLIDER_STEP_LENGTH","lazySliderLengthFirst","lazySliderLengthSubsequent","strains","scalingFactor","size","normalizedStartPosition","is_slider","slider","sliderFollowCircleRadius","segmentLength","segmentEndTime","cursorPos","sliderPos","getPosAtTime","difference","distance","sqrt","normalizedEndPosition","previousHitObject","calculateSpecificStrain","DifficultyType","weight","pow","addition","timeElapsed","decay","is_spinner","spacingWeight","distanceTo","spaceWeight1","spaceWeight2","is_circle","prevHitObject","STAR_SCALING_FACTOR","EXTREME_SCALING_FACTOR","STRAIN_STEP","DECAY_WEIGHT","tpHitObjects","starRating","difficulties","helpers","constants","OSU_GAME_WIDTH","HitObject","calculateStrainValues","calculateDifficulty","toFixed","currentHitObject","nextHitObject","calculateStrains","highestStrains","intervalEndTime","maximumStrain","getStrain","sortNum","a","sort","strain","calculateReplay","hitobjects","replayframes","unscaledCircleSize","isIn","objectPos","curPos","radius","hypot","orig_x","orig_y","replayOffset","orig_t","lastFrame","keyPresses","K1M1Down","K2M2Down","keyDown","M1","M2","K1","K2","SMOKE","hitTime","IS_HIT","sliderPoints","object","ticks","currentRepeat","startPoint","hitCount","timesHit","endPoint","curves","points","z","REPLAYHIT","hitOffset","HIT_50","isClick","KEYS","circleHit","HIT_300","hitType","HIT_100","HIT_MISS","ID","scoreBreak","duration","sliderBreak","centerPoint","OSU_GAME_HEIGHT","angle","atan2","rotations","GAMETYPES","TAIKO","CTB","MANIA","DOUBLE_TIME_MULTI","HALF_TIME_MULTI","SLIDER_STEP_DISTANCE","TIMER_SONG_COLOUR","TIMER_INTRO_COLOUR","HR_DIFFICULTY_MULTI","EZ_DIFFICULTY_MULTI","math","x1","y1","x2","y2","v1","v2","vectorDistance","angleVector","p1","p2","xDiff","yDiff","NONE","keys_int","bit","__mods","multi","code","icon","NO_FAIL","EASY","NO_VIDEO","HIDDEN","HARD_ROCK","SUDDEN_DEATH","DOUBLE_TIME","RELAX","HALF_TIME","NIGHT_CORE","FLASH_LIGHT","AUTO_PLAY","SPUN_OUT","RELAX_2","PERFECT","mod_bit_int","getModFromVal","mod_int","Circle","last_draw_time","drawn","destroyed","hidden_time","beenHit","isScoreAble","missArray","hit_numbers","num_0","default_0","texture","num_1","default_1","num_2","default_2","num_3","default_3","num_4","default_4","num_5","default_5","num_6","default_6","num_7","default_7","num_8","default_8","num_9","default_9","circleContainer","endCircleSprite","Sprite","hitcircle","tint","colour","anchor","set","game","is_hidden","approchCircleSprite","approachcircle","circleOverlaySprite","hitcicleoverlay","comboString","combo","comboNumSprites","charAt","comboSprite1","comboSprite2","hitSounds","cur_time","hit","ScorePoint","displayMiss","destroy","time_diff","scale","hit_object_container","addChildAt","pos","hitCirclePos","display50","playHitSound","display100","display300","BEZIER","LINEAR","PASSTHROUGH","CATMULL","controllPoints","sliderType","__generate_linear","__generate_beizer","__generate_passthrough","currentPoint","nextPoint","point","unshift","beziers","cP","lastP","tPos","Bezier","compute_value","startingPoint","compute","p","concat","getPoint","cos","sin","lerp","ang1","ang2","isMidBetween","circumcircle","p3","A","B","C","D","E","F","G","minx","miny","dx","dy","min","centerCircle","startAngle","middleAngle","endAngle","TWO_PI","PI","FollowPoint","hitObject1","hitObject2","endX","endY","drawTime","numPoints","steps","nextStep","followPointContainer","arrowTexture","followpoint","arrowSprite","rotation","position","NEW_COMBO","parse_type","hitObjectInt","newCombo","new_combo","sliderMulti","get_timing_point","parse_additions","strAdditions","additions","adds","sample","additionalSample","customSampleIndex","hitSoundVolume","hitsound","hitArray","soundByte","sliderData","pixelLength","edges","sounds","edge","beats","create_stacks","stackLeniency","hardrock","hitObjectI","stack","n","hitObjectN","timeI","timeN","initialiseHitObjects","calculate_follow_points","startX","calculate_original_x","startY","calculate_original_y","followPoint","hitObjectData","_x","_y","extend","is_hardrock","Slider","Spinner","calculate_x","calculate_y","reset","getContainer","followResult","draw","drawResult","v","updatePositions","hit300Sprite","hit300_0","hit300","hit100Sprite","hit100_0","hit100","hit50Sprite","hit50_0","hit50","hitMissSprite","hit0_0","hit0","visible","hitContainer","performance","add300","add100","add50","addMiss","ballTextures","sliderb0","originalX","originalY","sliderDirectionBackwards","drawnFollow","followDestroyed","totalTime","timePerRepeat","nextRepeatTime","tickPositions","tickLengthDiv","sliderMultiplier","sliderTickRate","sliderDuration","tickCount","tickTOffset","tickLoc","sliderFollowContainer","startCircle","displayRepeatArrow","sliderGraphics","Graphics","beginFill","lineStyle","final_x","final_y","endFill","lastPoint","drawCircle","drawPoint","finalPoint","bounds","getBounds","generateCanvasTexture","sprite","alpha","cacheAsBitmap","sliderGraphicsContainer","startCircleSprite","arrowSliderEnd","reversearrow","arrowSliderStart","tickSprite","sliderscorepoint","sliderFollowSprite","sliderfollowcircle","sliderBall","extras","MovieClip","animationSpeed","moveX","moveY","playSound","shift","elapsed_time","moveTo","Smoke","cursor_smoke","destroyer","currentRotation","getRenderWidth","getRenderHeight","spinnerContainer","backgroundSprite","spinner_background","spinnerCirle","spinner_circle","GRADES","SS","small_icn","large_icn","S","SSH","SH","is_silver","total_hits","maxHits","percent","parseAccuracyFromReplay","DEFAULTS","background_dim","sound_effects","use_beatmap_skins","use_beatmap_hitsounds","song_url","asset_server","_background_dim","_master_volume","_music_volume","_sound_effects_volume","_use_beatmap_skins","_use_beatmap_hitsounds","_song_url","_asset_server","_selected_skin","save_settings","beatmap_count","replay_count","key_count","processed_count","displaying_main_screen","beatmap_keys","current_selection","beatmap_selection_template","replay_selection_template","$beatmap_section_html","$replay_section_html","cached_dom","beatmapSearch","replaySearch","$currentSelectionHtml","launched_replay_from_url","cacheDom","bind_events","$master_volume_slider","$music_volume_slider","$sound_volume_slider","$background_dim_slider","$skin_select","show_selection","on_load_file","launchReplayFromURL","href","match","loadReplay","hash","replayB64","decodeURI","mapped_by","map_length_and_objects","map_object_type_counts","map_difficulty","$footer","$beatmap_search_field","$replay_search_field","$title_and_search","$details_replay_search","$asset_server_url","$song_server_url","$save_asset_servers_btn","$deleteBeatmapModel","$deleteButton","find","$deleteOtherDifficultiesCheckBox","$deleteAssetsCheckBox","setPlayBackMulti","currentTarget","searchParam","addClass","removeClass","clickedObject","attr","highlight_beatmap","select_beatmap","deletion_id","modal","delete_map","id","onkeyup","keyCode","has_started","show_main_screen","_delete_other_difficulties","delete_array","parentMap","beatmapSet","other_difficulties","include_assets","is","$beatmapHtml","highlight_map","html","Mustache","play_song","load_background","aDate","bDate","grade_img","Bloodhound","datumTokenizer","datum","tokenizers","whitespace","queryTokenizer","local","render_replay","content","append","songs_processed","render_song","matchon","css","toggle","direction","empty","random","focus","background_data","backgroundSize","remove_background","display_new_song","load_song","curr_length","master_container","offSetDetails","key_1_count","key_2_count","key_3_count","key_4_count","key_1_pressed","key_2_pressed","key_3_pressed","key_4_pressed","expected_replay_movment_time","gone_over","audioLeadIn","countdown_started","curr_replay_frame","oldest_object_position","oldestReplayFrame","replay_intro_time","end_skip_frame","skip_frames","flash_count","warning_arrow_times","break_times","replay_played_by_text","curMapTime","replayDiff","delayEnd","finished","currentKeyPress","lasthit_id","paused","paused_time","starting_pos","playbackMulti","modPlayBackMulti","getPlayBackMulti","currentMap","currentReplay","currentHitObjects","calculateLetterBox","details","x_offset","y_offset","create_dimmer","background_dimmer","dimmer","drawRect","create_background","Texture","fromImage","background_sprite","create_pause_screen_container","pauseScreenContainer","overlayTexture","pause_overlay","overlaySprite","resumeButtonTexture","pause_continue","resumeButtonSprite","interactive","backButtonTexture","pause_back","backButtonSprite","end_replay","tint_untint_key","do_tint","create_key_press","keypress_area","keypress_texture","inputoverlay_key","keypress_1","keypress_2","keypress_3","keypress_4","font","keypress_1_Text","Text","keypress_2_Text","keypress_3_Text","keypress_4_Text","create_cursor","cursor_texture","cursor_middle_texture","cursormiddle","cursor_sprite","cursor_middle_sprite","create_skip_container","skip_container","skipFrames","play_skip_0","play_skip","skipAnimation","skip_intro","create_play_warn_arrows_container","arrow_container","arrow_texture","play_warningarrow","skip_arrow_sprite_1","skip_arrow_sprite_2","skip_arrow_sprite_3","skip_arrow_sprite_4","create_success_container","success_container","success_texture","section_pass","success_sprite","create_fail_container","fail_container","fail_texture","section_fail","fail_sprite","create_replay_by_text","replay_text","fill","create_mod_container","modpng","modSprite","create_settings_icon_container","settingIconContainer","settingsTexture","settingsSprite","create_timer_container","timerX","timerY","timerContainer","baseCircle","baseCircleTexture","generateTexture","baseCircleSprite","timerMask","timerPie","mask","update_timer_percentage","percentage","createPoint","rotateXY","rad","cosVal","sinVal","computeMaskPolygon","delta","pts","lineTo","createSmokeContainer","smokeContainer","createScoreContainer","align","stroke","strokeThickness","scoreText","comboText","accuracyText","scoreContainer","create_master_container","flash_warning_arrows","show_success","show_failure","slideToggle","hide_settings","initGame","is_easy","is_halftime","is_doubletime","modMulti","mod","played","comboNum","comboColour","difficultyCircleSize","hpDrain","SliderTickRate","Perforamnce","unScaledDiameter","approachTime","StackLeniency","AudioLeadIn","skipFrame","skipTime","move_replay_text","renderKeyPress","keyPress","tint_1","tint_2","tint_3","tint_4","getCursorPos","lastKey","posX","posY","smoke","render_object","render_replay_frame","curTime","waspaused","totalHits","hMiss","addScore","hitobject","repT","date_started","oldTime","newTime","game_loop","difficultyRating","lifebar","_difficultyRating","_modMulti","addPoints","resetCombo","made_by","map_details_heading_style","map_details_style","score_font_style","create_background_container","create_map_details_container","map_details_area","map_name_text","map_made_by","map_played_by","create_total_score_details_container","scoreBox","scoreLabel","totalScoreText","create_hit300_details_container","scoreBox300","total300hitsText","total300ghitsText","hit300png","hit300gpng","hit300g","hit300gSprite","create_hit100_details_container","scoreBox100","total100hitsText","total100khitsText","hit100png","hit100kpng","hit100k","hit100kSprite","create_hit50Misses_details_container","container","scoreBox50","total50hitsText","totalMissesText","hit50png","hit0png","hit0Sprite","create_combo_accuracy_details_container","scoreBoxCombo","maxComboLabel","accuracyLabel","maxComboText","create_grade_details_container","gradepng","gradeSprite","replaypng","pause_replay","replay_Sprite","backFrames","menu_back_0","menu_back","backAnimation","exit","params","hourRegex","minRegex","secRegex","hourMatch","exec","minMatch","secMatch","onRender","$replayURL","paramURL","autoplay","ap","ajax","dataType","success","status","history","pushState","checkedLocal","checkLocalStatus","songFound","onloadedmetadata","bmhash","validate_only","beatmap_id","beatmapFile","beatmapMD5","JSON","stringify","task_id","base64md5","formData","FormData","processData","contentType","msg","_joinAssetsToMap","map","trustedFile","map_hash","attempt","state","d"],"mappings":"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","file":"osureplay.js","sourcesContent":["/**\n * main.js\n * Created by Ugrend on 2/06/2016.\n */\n\nvar DEBUG = true;\nvar APIURL = \"https://ugrend.com/osu/api/\";\n//var APIURL = \"http://localhost:8080/api/\";\n\nfunction hidePrototypeWarning() {\n    document.getElementById('prototype-warning').className = \"hidden\";\n}\n\n//From http://stackoverflow.com/questions/12710001/how-to-convert-uint8-array-to-base64-encoded-string\n//fixes RangeError: Maximum call stack size exceeded on chrome\nfunction Uint8ToString(u8a){\n    var CHUNK_SZ = 0x8000;\n    var c = [];\n    for (var i=0; i < u8a.length; i+=CHUNK_SZ) {\n        c.push(String.fromCharCode.apply(null, u8a.subarray(i, i+CHUNK_SZ)));\n    }\n    return c.join(\"\");\n}\n\nvar getParams = function () {\n    var queryDict = {};\n    //http://stackoverflow.com/questions/5448545/how-to-retrieve-get-parameters-from-javascript\n    location.search.substr(1).split(\"&\")\n        .forEach(function(item) {\n            if(item != \"\"){\n                queryDict[item.split(\"=\")[0]] = item.split(\"=\")[1]\n            }\n\n        });\n    return queryDict;\n};\n\n\nvar base64ToUint8Array = function(base64) {\n    var binary_string =  window.atob(base64);\n    var len = binary_string.length;\n    var bytes = new Uint8Array( len );\n    for (var i = 0; i < len; i++)        {\n        bytes[i] = binary_string.charCodeAt(i);\n    }\n    return bytes\n};\n\nvar mainArea = document.getElementById('main_zone');\nvar dragDropZone = document.getElementById('dragdrop');\nvar dragDropLabel = document.getElementById('drag_label');\nvar replay = \"\";\nvar beatmap =null;\nzip.workerScriptsPath = \"static/libs/js/\";\n\n//IE FIXES BELOW (I don't know why I care about IE though)\nif (!Uint8Array.prototype.slice && 'subarray' in Uint8Array.prototype)\n    Uint8Array.prototype.slice = Uint8Array.prototype.subarray;\n//https://gist.github.com/hsablonniere/2581101\nif (!Element.prototype.scrollIntoViewIfNeeded) {\n    Element.prototype.scrollIntoViewIfNeeded = function (centerIfNeeded) {\n        centerIfNeeded = arguments.length === 0 ? true : !!centerIfNeeded;\n\n        var parent = this.parentNode,\n            parentComputedStyle = window.getComputedStyle(parent, null),\n            parentBorderTopWidth = parseInt(parentComputedStyle.getPropertyValue('border-top-width')),\n            parentBorderLeftWidth = parseInt(parentComputedStyle.getPropertyValue('border-left-width')),\n            overTop = this.offsetTop - parent.offsetTop < parent.scrollTop,\n            overBottom = (this.offsetTop - parent.offsetTop + this.clientHeight - parentBorderTopWidth) > (parent.scrollTop + parent.clientHeight),\n            overLeft = this.offsetLeft - parent.offsetLeft < parent.scrollLeft,\n            overRight = (this.offsetLeft - parent.offsetLeft + this.clientWidth - parentBorderLeftWidth) > (parent.scrollLeft + parent.clientWidth),\n            alignWithTop = overTop && !overBottom;\n\n        if ((overTop || overBottom) && centerIfNeeded) {\n            parent.scrollTop = this.offsetTop - parent.offsetTop - parent.clientHeight / 2 - parentBorderTopWidth + this.clientHeight / 2;\n        }\n\n        if ((overLeft || overRight) && centerIfNeeded) {\n            parent.scrollLeft = this.offsetLeft - parent.offsetLeft - parent.clientWidth / 2 - parentBorderLeftWidth + this.clientWidth / 2;\n        }\n\n        if ((overTop || overBottom || overLeft || overRight) && !centerIfNeeded) {\n            this.scrollIntoView(alignWithTop);\n        }\n    };\n}\r\n/**\n * skins.js\n * Created by Ugrend on 4/06/2016.\n */\nvar osu = osu || {};\nosu.skins = {\n\n    //https://osu.ppy.sh/wiki/Skinning_Standard\n    //https://osu.ppy.sh/wiki/Skinning_Interface\n\n    COMBO_COLOURS: [],\n    DEFAULT_COLOURS: [0xFFC000,0x00CA00,0x127CFF,0xF21839],\n    loaded: false,\n    resources: {\n\n\n    },\n    DEFAULT_RESOURCES:[\n        //hitbursts\n        {name: 'hit300', url: \"resources/hit300.png\"},\n        {name: 'hit300g', url: \"resources/hit300g.png\"},\n        {name: 'hit300k', url: \"resources/hit300k.png\"},\n        {name: 'hit100',  url: \"resources/hit100.png\"},\n        {name: 'hit100k', url: \"resources/hit100k.png\"},\n        {name: 'hit50', url: \"resources/hit50.png\"},\n        {name: 'hit0', url: \"resources/hit0.png\"},\n\n        //Ranking Grades\n        {name: 'ranking_xh',  url:\"resources/ranking-XH.png\"},\n        {name: 'ranking_sh',  url:\"resources/ranking-SH.png\"},\n        {name: 'ranking_x', url:\"resources/ranking-X.png\"},\n        {name: 'ranking_s', url:\"resources/ranking-S.png\"},\n        {name: 'ranking_a', url:\"resources/ranking-A.png\"},\n        {name: 'ranking_b', url:\"resources/ranking-B.png\"},\n        {name: 'ranking_c', url:\"resources/ranking-C.png\"},\n        {name: 'ranking_d', url:\"resources/ranking-D.png\"},\n        {name: 'ranking_xh_small', url:\"resources/ranking-XH.png\"},\n        {name: 'ranking_sh_small', url:\"resources/ranking-SH.png\"},\n        {name: 'ranking_x_small', url:\"resources/ranking-X.png\"},\n        {name: 'ranking_s_small', url:\"resources/ranking-S.png\"},\n        {name: 'ranking_a_small', url:\"resources/ranking-A.png\"},\n        {name: 'ranking_b_small', url:\"resources/ranking-B.png\"},\n        {name: 'ranking_c_small', url:\"resources/ranking-C.png\"},\n        {name: 'ranking_d_small', url:\"resources/ranking-D.png\"},\n\n\n        //Interface\n        {name: 'pause_replay', url:\"resources/pause-replay.png\"},\n        {name: 'menu_back', url:\"resources/menu-back.png\"},\n        {name: 'cursor', url:\"resources/cursor.png\"},\n        {name: 'cursortrail', url:\"resources/cursortrail.png\"},\n        {name: 'cursormiddle', url:\"resources/cursormiddle.png\"},\n        {name: 'cursor_smoke', url:\"resources/cursor-smoke.png\"},\n        {name: 'inputoverlay_key', url:\"resources/inputoverlay-key.png\"},\n        {name: 'star', url:\"resources/star.png\"},\n\n        //Playfield\n        {name: 'section_fail', url:\"resources/section-fail.png\"},\n        {name: 'section_pass', url:\"resources/section-pass.png\"},\n        {name: 'play_warningarrow', url:\"resources/play-warningarrow.png\"},\n        {name: 'play_skip', url:\"resources/play-skip.png\"},\n\n        {name: 'hitcircle',  url:\"resources/hitcircle.png\"},\n        {name: 'hitcicleoverlay',  url:\"resources/hitcircleoverlay.png\"},\n        {name: 'approachcircle',  url:\"resources/approachcircle.png\"},\n        {name: 'followpoint',  url:\"resources/followpoint.png\"},\n        {name: 'sliderfollowcircle',  url:\"resources/sliderfollowcircle.png\"},\n        {name: 'reversearrow',  url:\"resources/reversearrow.png\"},\n        {name: 'sliderscorepoint',  url:\"resources/sliderscorepoint.png\"},\n        {name: 'sliderb0', url:\"resources/sliderb0.png\"},\n\n        {name: 'spinner_approachcircle',url:\"resources/spinner-approachcircle.png\"},\n        {name: 'spinner_background',url:\"resources/spinner-background.png\"},\n        {name: 'spinner_bottom',url:\"resources/spinner-bottom.png\"},\n        {name: 'spinner_circle',url:\"resources/spinner-circle.png\"},\n        {name: 'spinner_clear',url:\"resources/spinner-clear.png\"},\n        {name: 'spinner_glow',url:\"resources/spinner-glow.png\"},\n        {name: 'spinner_metre',url:\"resources/spinner-metre.png\"},\n        {name: 'spinner_middle',url:\"resources/spinner-middle.png\"},\n        {name: 'spinner_middle2',url:\"resources/spinner-middle2.png\"},\n        {name: 'spinner_osu',url:\"resources/spinner-osu.png\"},\n        {name: 'spinner_rpm',url:\"resources/spinner-rpm.png\"},\n        {name: 'spinner_spin',url:\"resources/spinner-spin.png\"},\n        {name: 'spinner_top',url:\"resources/spinner-top.png\"},\n        {name: 'spinner_warning',url:\"resources/spinner-warning.png\"},\n\n\n\n        {name: 'default_0', url:\"resources/default-0.png\"},\n        {name: 'default_1', url:\"resources/default-1.png\"},\n        {name: 'default_2', url:\"resources/default-2.png\"},\n        {name: 'default_3', url:\"resources/default-3.png\"},\n        {name: 'default_4', url:\"resources/default-4.png\"},\n        {name: 'default_5', url:\"resources/default-5.png\"},\n        {name: 'default_6', url:\"resources/default-6.png\"},\n        {name: 'default_7', url:\"resources/default-7.png\"},\n        {name: 'default_8', url:\"resources/default-8.png\"},\n        {name: 'default_9', url:\"resources/default-9.png\"},\n        //Mods\n\n        {name: 'selection_mod_doubletime', url:\"resources/selection-mod-doubletime.png\"},\n        {name: 'selection_mod_easy', url:\"resources/selection-mod-easy.png\"},\n        {name: 'selection_mod_flashlight', url:\"resources/selection-mod-flashlight.png\"},\n        {name: 'selection_mod_halftime', url:\"resources/selection-mod-halftime.png\"},\n        {name: 'selection_mod_hardrock', url:\"resources/selection-mod-hardrock.png\"},\n        {name: 'selection_mod_hidden', url:\"resources/selection-mod-hidden.png\"},\n        {name: 'selection_mod_nightcore', url:\"resources/selection-mod-nightcore.png\"},\n        {name: 'selection_mod_nofail', url:\"resources/selection-mod-nofail.png\"},\n        {name: 'selection_mod_perfect', url:\"resources/selection-mod-perfect.png\"},\n        {name: 'selection_mod_spunout', url:\"resources/selection-mod-spunout.png\"},\n        {name: 'selection_mod_suddendeath', url:\"resources/selection-mod-suddendeath.png\"},\n\n        {name: 'pause_overlay', url:\"resources/pause-overlay.png\"},\n        {name: 'pause_continue', url:\"resources/pause-continue.png\"},\n        {name: 'pause_back', url:\"resources/pause-back.png\"},\n\n    ],\n\n    skins: [],\n\n    init: function () {\n        var self = this;\n        this.skins = []; //clear existing skins incase this is a refresh\n        database.getAll('skins',function (result) {\n            for(var i=0; i < result.length; i++ ){\n                self.skins.push({\n                    md5sum: result[i].md5sum,\n                    name: result[i].name\n                });\n            }\n            var current_skin = {};\n            self.COMBO_COLOURS = [];\n\n\n            //clone default then override with custom values\n            for(i = 0; i < self.DEFAULT_RESOURCES.length; i++){\n                current_skin[self.DEFAULT_RESOURCES[i].name] = self.DEFAULT_RESOURCES[i].url;\n            }\n            if(osu.settings.SETTINGS.selected_skin != \"0\"){\n                database.get_data(database.TABLES.SKINS, osu.settings.SETTINGS.selected_skin,function (data) {\n                    if(data.data.colours) {\n                        for (i = 0; i < data.data.colours.length; i++) {\n                            self.COMBO_COLOURS.push(data.data.colours[i]);\n                        }\n                    }\n                    self._loadAssetsFromIDB(current_skin,data.data.assets,self.loadSkin.bind(self));\n                });\n            }\n            else{\n                for(i = 0; i<self.DEFAULT_COLOURS.length;i++){\n                    self.COMBO_COLOURS.push(self.DEFAULT_COLOURS[i]);\n                }\n                self.loadSkin(current_skin);\n            }\n\n        });\n    },\n    _loadAssetsFromIDB: function (current_skin,assets,cb) {\n\n        var _length = assets.length;\n        var _loaded = 0;\n        for(var i = 0; i < _length; i++){\n            var fileExt = assets[i].filename.split('.').pop();\n            var name = assets[i].filename.split('.')[0].toLowerCase().replace(/-|@/g,\"_\");\n            if(fileExt.toLowerCase() == \"png\"){\n                (function (name) {\n                    database.get_data(database.TABLES.ASSETS,assets[i].md5sum, function (result) {\n                        _loaded++;\n                        current_skin[name] = result.data;\n                        if(_loaded >= _length){\n                            cb(current_skin);\n                        }\n                    }, function () {\n                        _loaded++;\n                        if(_loaded >= _length){\n                            cb(current_skin);\n                        }\n                    });\n                })(name);\n            }else if(fileExt.toLowerCase() == \"wav\" || fileExt.toLowerCase() == \"mp3\"){\n                (function (name) {\n                    database.get_data(database.TABLES.ASSETS,assets[i].md5sum, function (result) {\n                        _loaded++;\n                        osu.skins.audio[name] = result.data;\n                        if(_loaded >= _length){\n                            cb(current_skin);\n                        }\n                    }, function () {\n                        _loaded++;\n                        if(_loaded >= _length){\n                            cb(current_skin);\n                        }\n                    });\n                })(name);\n            }\n            else{\n                _loaded++;\n                if(_loaded >= _length){\n                    cb(current_skin);\n                }\n            }\n        }\n        if(_loaded >= _length){\n            cb(current_skin);\n        }\n\n    },\n    loadSkin: function (skin) {\n        var self = this;\n        var skinArray = [];\n        for(var k in skin){\n            if(skin.hasOwnProperty(k)){\n                skinArray.push({\n                    name: k,\n                    url: skin[k]\n                });\n            }\n\n        }\n        var loader = new PIXI.loaders.Loader();\n        loader.add(skinArray).on(\"progress\",self.loadProgressHandler.bind(self)).load(self._loaded.bind(self));\n    },\n\n    loadProgressHandler: function (loader, resources) {\n       if(resources.name == \"ranking-sh\"){\n           console.log(resources);\n       }\n    },\n\n    onloaded: function () {\n\n    },\n\n    _loaded: function (loader, resources) {\n        this.resources = resources;\n        event_handler.emit(event_handler.EVENTS.RESOURCES_LOADED);\n        this.loaded = true;\n        osu.skins.onloaded();\n        osu.audio.sound.init();\n        //quick hack to prevent skin changing doing weird things.\n        osu.skins.onloaded = function () {\n\n        };\n    },\n    //AUDIO\n\n    audio: {\n        applause: 'resources/applause.wav',\n        combobreak: 'resources/combobreak.wav',\n        count1s: 'resources/count1s.wav',\n        count2s: 'resources/count2s.wav',\n        count3s: 'resources/count3s.wav',\n        drum_hitclap: 'resources/drum-hitclap.wav',\n        drum_hitfinish: 'resources/drum-hitfinish.wav',\n        drum_hitfinish2: 'resources/drum-hitfinish2.wav',\n        drum_hitnormal: 'resources/drum-hitnormal.wav',\n        drum_hitnormal19: 'resources/drum-hitnormal19.wav',\n        drum_hitnormal2: 'resources/drum-hitnormal2.wav',\n        drum_hitwhistle: 'resources/drum-hitwhistle.wav',\n        drum_sliderslide: 'resources/drum-sliderslide.wav',\n        drum_slidertick: 'resources/drum-slidertick.wav',\n        drum_sliderwhistle: 'resources/drum-sliderwhistle.wav',\n        failsound: 'resources/failsound.wav',\n        gos: 'resources/gos.wav',\n        menuback: 'resources/menuback.wav',\n        menuclick: 'resources/menuclick.wav',\n        menuhit: 'resources/menuhit.wav',\n        normal_hitclap: 'resources/normal-hitclap.wav',\n        normal_hitfinish: 'resources/normal-hitfinish.wav',\n        normal_hitnormal: 'resources/normal-hitnormal.wav',\n        normal_hitwhistle: 'resources/normal-hitwhistle.wav',\n        normal_sliderslide: 'resources/normal-sliderslide.wav',\n        normal_slidertick: 'resources/normal-slidertick.wav',\n        normal_sliderwhistle: 'resources/normal-sliderwhistle.wav',\n        readys: 'resources/readys.wav',\n        sectionfail: 'resources/sectionfail.wav',\n        sectionpass: 'resources/sectionpass.wav',\n        shutter: 'resources/shutter.wav',\n        soft_hitclap: 'resources/soft-hitclap.wav',\n        soft_hitclap19: 'resources/soft-hitclap19.wav',\n        soft_hitfinish: 'resources/soft-hitfinish.wav',\n        soft_hitnormal: 'resources/soft-hitnormal.wav',\n        soft_hitwhistle: 'resources/soft-hitwhistle.wav',\n        soft_sliderslide: 'resources/soft-sliderslide.wav',\n        soft_sliderslide2: 'resources/soft-sliderslide2.wav',\n        soft_slidertick: 'resources/soft-slidertick.wav',\n        soft_sliderwhistle: 'resources/soft-sliderwhistle.wav',\n        spinnerbonus: 'resources/spinnerbonus.wav',\n        spinner_osu: 'resources/spinner-osu.wav',\n        spinnerspin: 'resources/spinnerspin.wav',\n\n\n    }\n\n\n};\r\n/**\n * replay_details.js\n * Created by Ugrend on 6/2/2016.\n */\n\n/*\nJust adding this for testing will prob remove\n\n */\n\nfunction loadBeatMap(){\n\n    database.get_data(database.TABLES.BEATMAPS,replay.bmMd5Hash, function(e){\n\n        if(typeof e.data != 'undefined'){\n            osu.beatmaps.BeatmapLoader.load(replay.bmMd5Hash, showReplayData);\n        }else{\n            var loading =   new PNotify({\n                title: 'Downloading Beatmap',\n                text: \"Loading \\n\" + replay.bmMd5Hash,\n                type: 'info',\n                hide: false\n            });\n            osu.webapi.beatmaps.loadBeatMap(replay.bmMd5Hash, function (e) {\n                loading.remove();\n                osu.beatmaps.BeatmapLoader.load(replay.bmMd5Hash, showReplayData);\n            })\n        }\n\n\n    });\n\n\n}\n\n\nfunction showReplayData(beatmap){\n    osu.ui.interface.mainscreen.hide_main_screen();\n    osu.ui.interface.scorescreen.mods = replay.mods;\n    beatmap.been_rendered = false;\n    osu.ui.interface.scorescreen.beatmap = beatmap;\n    osu.ui.interface.scorescreen.played_by = replay.playerName;\n    osu.ui.interface.scorescreen.date_played = replay.time_played;\n    osu.ui.interface.scorescreen.total_score = replay.tScore;\n    osu.ui.interface.scorescreen.t300Hits = replay.h300;\n    osu.ui.interface.scorescreen.t300gHits = replay.hGekis;\n    osu.ui.interface.scorescreen.t100Hits = replay.h100;\n    osu.ui.interface.scorescreen.t100kHits = replay.hKatus;\n    osu.ui.interface.scorescreen.t50Hits = replay.h50;\n    osu.ui.interface.scorescreen.tMissHits = replay.hMisses ;\n    osu.ui.interface.scorescreen.maxCombo = replay.tCombo;\n    osu.ui.interface.scorescreen.grade = replay.grade;\n    osu.ui.interface.scorescreen.accuracy = replay.accuracy;\n    setTimeout(function () {\n        document.getElementById(\"render_zone\").className = \"\";\n        osu.ui.interface.scorescreen.renderScoreScreen();\n    }, 500);\n}\r\n/**\n * render.js\n * Created by Ugrend on 4/06/2016.\n */\n\n\nvar osu = osu || {};\nosu.ui = osu.ui || {};\nosu.ui.renderer = {\n\n\n\n    renderWidth: window.innerWidth,\n    renderHeight: window.innerHeight,\n    renderer: null,\n    masterStage: new PIXI.Container(),\n    render_zone: document.getElementById(\"render_zone\"),\n    fixed_aspect: false,\n\n\n    /**\n     *\n     * @param child add to renderer stage\n     */\n    addChild: function(child){\n        this.masterStage.addChild(child);\n    },\n    removeChild: function(child){\n        this.masterStage.removeChild(child);\n    },\n\n    clearStage: function(){\n        this.masterStage.removeChildren();\n    },\n    animate: function () {\n        event_handler.emit(event_handler.EVENTS.RENDER);\n        this.renderer.render(this.masterStage);\n        requestAnimationFrame(this.animate.bind(this));\n    },\n    resize: function(){\n        var x = window.innerWidth;\n        var y = window.innerHeight;\n\n        //just to make my life easier fix the render ratio for game play\n        if(this.fixed_aspect && false) {\n            var fixed_ratio_y = (3 / 4) * x;\n            var fixed_ratio_x = (4 / 3) * y;\n\n            if (fixed_ratio_y > y) {\n                //if we increasing y bigger than the screen we need to make x smaller\n                x = fixed_ratio_x;\n            }\n            else {\n                y = fixed_ratio_y;\n            }\n        }\n        this.renderWidth =  x;\n        this.renderHeight = y;\n        if(this.renderer != null) {\n            this.renderer.view.style.width = this.renderWidth + 'px';\n            this.renderer.view.style.height = this.renderHeight + 'px';\n        }\n    },\n    start: function () {\n        this.resize();\n        if(this.renderer == null) {\n            this.renderer = PIXI.autoDetectRenderer(this.renderWidth, this.renderHeight);\n            this.render_zone.appendChild(this.renderer.view);\n            this.animate();\n            window.onresize = this.resize.bind(this);\n        }else{\n            console.log(\"renderer already started resizing instead\");\n            this.renderer.width =  this.renderWidth;\n            this.renderer.height = this.renderHeight;\n            this.renderer.view.width = this.renderWidth;\n            this.renderer.view.height = this.renderHeight;\n        }\n\n    },\n    hide: function () {\n        this.render_zone.innerHTML = \"\";\n    },\n    show: function(){\n        this.render_zone.appendChild(this.renderer.view);\n    }\n};\n\n\n\r\n/**\n *\n * replay_control.js\n * Created by Ugrend on 18/11/2016.\n *\n * For pausing/playing/positioning of replay\n */\n\nvar osu = osu || {};\nosu.ui = osu.ui || {};\nosu.ui.interface = osu.ui.interface || {};\nosu.ui.interface.replaycontroller = {\n\n\n    __$controlBar: $(\"#replay_control_zone\"),\n    __$togglePlayButton: $(\"#toggle_play_replay\"),\n    __$progressBar: $(\"#replay_progress\"),\n    __$volume: $(\"#replay_master_volume\"),\n    __$configButton: $(\"#open_config_button\"),\n    __$replayCurTime: $(\"#replay_current_time\"),\n    __$replayDuration: $(\"#replay_duration\"),\n    __eventsBound: false,\n    __ignoreUpdates: false,\n    _currentDuration: 0,\n    _currentPosition: 0,\n\n    showBar: function () {\n            this.__$controlBar.slideDown();\n    },\n    hideBar: function () {\n        this.__$controlBar.slideUp();\n    },\n\n    convertMs: function (t) {\n;\n        var seconds = parseInt((t/1000)%60);\n        var minutes = parseInt((t/(1000*60))%60);\n        var hours = parseInt((t/(1000*60*60))%24);\n\n        hours = (hours < 10) ? \"0\" + hours : hours;\n        minutes = (minutes < 10) ? \"0\" + minutes : minutes;\n        seconds = (seconds < 10) ? \"0\" + seconds : seconds;\n        return (hours > 0) ? hours + \":\" + minutes + \":\" + seconds  : minutes + \":\" + seconds;\n\n    },\n\n    set_duration: function(t){\n        this.__$replayDuration.text(this.convertMs(t));\n        this.__$progressBar.prop({max: t});\n    },\n\n    set_position: function (t) {\n        if(!this.__ignoreUpdates){\n            this.__$progressBar.val(t);\n        }\n\n        this.__$replayCurTime.text(this.convertMs(t));\n    },\n\n    __setVolume: function () {\n        this.__$volume.val(osu.settings.SETTINGS.master_volume * 100);\n    },\n\n    showPauseIcon: function () {\n        this.__$togglePlayButton.prop({src: 'data/player-pause-icon.png'})\n    },\n    showPlayIcon: function () {\n        this.__$togglePlayButton.prop({src: 'data/player-play-icon.png'})\n    },\n\n    disable_progressbar: function () {\n        this.__$progressBar.prop('disabled', true)\n\n    },\n    enable_progressbar: function () {\n        this.__$progressBar.prop('disabled', false)\n    },\n\n\n    bindEvents: function () {\n\n        if(!this.__eventsBound){\n            var self = this;\n            this.__setVolume();\n            this.__$togglePlayButton.on('click', function () {\n               if(osu.ui.interface.scorescreen.replayStarted){\n                   osu.ui.interface.osugame.toggle_pause();\n               }else{\n                   osu.ui.interface.scorescreen.start_replay();\n               }\n\n\n            });\n            event_handler.on(event_handler.EVENTS.SETTINGS_CHANGED, this.__setVolume.bind(this));\n            this.__$volume.on('input', function () {\n                osu.settings.SETTINGS.master_volume = self.__$volume.val() /100;\n            });\n            this.__$progressBar.on('input', function () {\n               osu.ui.interface.osugame.go_to(self.__$progressBar.val());\n            });\n\n            this.__$configButton.on('click', function () {\n                osu.ui.interface.osugame.toggle_settings();\n            });\n\n            this.__eventsBound = true;\n        }\n\n\n    }\n\n};\n\n\r\n/**\n * eventhandler.js\n * Created by Ugrend on 10/06/2016.\n */\nvar event_handler = {\n\n    EVENTS: Object.freeze({\n        BEATMAP_LOADING: 1,\n        BEATMAP_LOADED: 2,\n        BEATMAP_LOADING_FAILED: 3,\n        REPLAY_LOADING: 4,\n        REPLAY_LOADED: 5,\n        REPLAY_LOAD_FAILED:6,\n        BEATMAP_NOTFOUND: 7,\n        DB_ERROR: 8,\n        ASSET_NOT_FOUND:9,\n        RENDER:10,\n        UNKNOWN_FILE_ERROR:11,\n        INVALID_FILE: 12,\n        BEATMAP_SELECTED: 13,\n        STOP_REPLAY: 14,\n        SETTINGS_CHANGED: 15,\n        SKIN_LOADING: 16,\n        SKIN_LOADED: 17,\n        SKIN_LOADING_FAILED: 18,\n        RESOURCES_LOADING: 19,\n        RESOURCES_LOADED: 20\n    }),\n\n    __events: {},\n    on: function (eventName, fn, alias, parent_object) {\n        this.__events[eventName] = this.__events[eventName] || [];\n        this.__events[eventName].push({fn: fn, alias: alias, parent: parent_object});\n    },\n    off: function (eventName, alias,fn) {\n        if (this.__events[eventName]) {\n            for (var i = 0; i < this.__events[eventName].length; i++) {\n                if (this.__events[eventName][i].fn === fn) {\n                    this.__events[eventName].splice(i, 1);\n                    break;\n                }\n                if(this.__events[eventName][i].alias == alias){\n                    this.__events[eventName].splice(i,1);\n                    break;\n                }\n            }\n        }\n    },\n    emit: function (eventName, data) {\n        if(DEBUG && eventName != event_handler.EVENTS.RENDER){\n            console.log(\"EVENT: \" + eventName);\n            console.log(data);\n        }\n        if (this.__events[eventName]) {\n            this.__events[eventName].forEach(function (obj) {\n                if (obj.parent) {\n                    obj.parent[obj.fn](data);\n                } else {\n                    obj.fn(data);\n                }\n\n            });\n        }\n    }\n};\n\n\n\nevent_handler.on(event_handler.EVENTS.SKIN_LOADING, function (data) {\n    var loading =   new PNotify({\n        title: 'Loading skin',\n        text: \"Loading \\n\" + data,\n        type: 'info',\n        hide: 'false'\n    });\n    var alias = Date.now().toString();\n    event_handler.on(event_handler.EVENTS.SKIN_LOADED, function (data_loaded) {\n        var options = {\n            type: \"success\",\n            title: \"Skin Loaded\",\n            text: data_loaded.name + \"\\n has been successfully processed\",\n            hide: \"true\"\n        };\n        loading.update(options);\n        //one time only event\n        event_handler.off(event_handler.EVENTS.SKIN_LOADED, alias);\n    }, alias);\n});\n\n\nevent_handler.on(event_handler.EVENTS.BEATMAP_LOADING, function (data) {\n    var loading =   new PNotify({\n        title: 'Loading beatmap',\n        text: \"Loading \\n\" + data,\n        type: 'info',\n        hide: 'false'\n    });\n    var alias = Date.now().toString();\n    event_handler.on(event_handler.EVENTS.BEATMAP_LOADED, function (data_loaded) {\n        var options = {\n            type: \"success\",\n            title: \"Beatmap Loaded\",\n            text: data_loaded.filename + \"\\n has been successfully processed\",\n            hide: \"true\"\n        };\n        loading.update(options);\n        //one time only event\n        event_handler.off(event_handler.EVENTS.BEATMAP_LOADED, alias);\n    }, alias);\n});\n\n\nevent_handler.on(event_handler.EVENTS.BEATMAP_LOADING_FAILED, function (data) {\n    PNotify.removeAll();\n    new PNotify({\n        title: 'Beatmap Loading Failed',\n        text: \"Failed to load beatmap: \" + data,\n        type: 'error'\n    });\n});\n\nevent_handler.on(event_handler.EVENTS.BEATMAP_LOADING_FAILED, function (data) {\n    new PNotify({\n        title: 'Beatmap Loading Failed',\n        text: \"Failed to load beatmap: \" + data,\n        type: 'error'\n    });\n});\n\nevent_handler.on(event_handler.EVENTS.BEATMAP_NOTFOUND, function (data) {\n    new PNotify({\n        title: 'Beatmap not found',\n        text: \"Beatmap not found for replay, \\n beatmap md5sum:\\n\" + data,\n        type: 'error'\n    });\n});\r\n/**\n * beatmap_reader.js\n * Created by Ugrend on 6/06/2016.\n */\n\n\n/**\n * Converts osu data/beatmap config file into a JS object\n * @param data\n * @returns {{version: string, general: {}, metadata: {}, difficulty: {}, events: Array, timing_points: Array, colours: {}, hit_objects: Array}}\n */\nvar parse_osu_map_data = function (data) {\n    var beatmap_config = {\n        version: \"\",\n        name: \"\",\n        general: {},\n        metadata: {},\n        difficulty: {},\n        events: [],\n        timing_points: [],\n        colours: {},\n        hit_objects: [],\n        minBPM: -1,\n        maxBPM: -1,\n        circles: 0,\n        sliders: 0,\n        spinners: 0,\n        time_length: 0,\n    };\n    var lines = data.replace(\"\\r\", \"\").split(\"\\n\");\n    beatmap_config.version = lines[0];\n    var current_setting = null;\n    var parentBPMS = 500;\n    for (var i = 0; i < lines.length; i++) {\n        var line = lines[i].trim();\n        if (line === \"\") {\n            continue;\n        }\n        if (line.indexOf(\"//\") == 0) {\n            continue;\n        }\n        if (line.indexOf(\"[\") == 0) {\n            current_setting = line.toLowerCase();\n            continue;\n        }\n        switch (current_setting) {\n            case \"[general]\":\n                var settings = line.split(\":\");\n                if (settings.length == 2) {\n                    beatmap_config.general[settings[0]] = settings[1].trim();\n                }\n                break;\n            case \"[editor]\":\n                break;\n            case \"[metadata]\":\n                var settings = line.split(\":\");\n                if (settings.length > 1) {\n                    // Im not sure if title/creator/etc can have : in them but just to be safe ill assume it can\n                    beatmap_config.metadata[settings[0]] = settings.splice(1).join(\":\").trim()\n                }\n                break;\n            case \"[difficulty]\":\n                var settings = line.split(\":\");\n                if (settings.length == 2) {\n                    beatmap_config.difficulty[settings[0]] = parseFloat(settings[1]);\n                }\n                break;\n            case \"[events]\":\n                beatmap_config.events.push(line.split(\",\"));\n                break;\n            case \"[timingpoints]\":\n                var parts = line.split(\",\");\n\n                var timingPoint = {\n                    offset: +parts[0],\n                    millisecondsPerBeat: +parts[1],\n                    meter: +parts[2],\n                    sampleType: +parts[3],\n                    sampleSet: +parts[4],\n                    volume: +parts[5],\n                    inherited: +parts[6],\n                    kaiMode: +parts[7]\n                };\n\n                if(timingPoint.inherited == 1){\n                    parentBPMS = timingPoint.millisecondsPerBeat;\n                    if(parentBPMS < beatmap_config.minBPM || beatmap_config.minBPM === -1){\n                        if(beatmap_config.minBPM > beatmap_config.maxBPM){\n                            beatmap_config.maxBPM = beatmap_config.minBPM;\n                        }\n                        beatmap_config.minBPM = parentBPMS;\n                    }\n                }\n                else{\n                    //if inherited and postive we should ignore and multiply by 1\n                    //You cant do this in the editor so shouldnt happen, but this is how the game seems to handle it.\n                    if(timingPoint.millisecondsPerBeat >= 0){\n                        timingPoint.millisecondsPerBeat = parentBPMS;\n                    }\n                    else{\n                        var multiplier = Math.abs(100/timingPoint.millisecondsPerBeat);\n                        timingPoint.millisecondsPerBeat = parentBPMS / multiplier;\n                    }\n                }\n                beatmap_config.minBPM = Math.round(60000 / beatmap_config.minBPM);\n                if(beatmap_config.maxBPM !=-1) beatmap_config.maxBPM = Math.round(60000 / beatmap_config.maxBPM);\n\n                beatmap_config.timing_points.push(timingPoint);\n                break;\n            case \"[colours]\":\n                var settings = line.split(\":\");\n                if (settings.length == 2) {\n                    beatmap_config.colours[settings[0]] = settings[1].split(\",\");\n                }\n                break;\n            case \"[hitobjects]\":\n                var hit_object = osu.objects.HitObjectParser.parse_line(line, beatmap_config.timing_points, beatmap_config.difficulty.SliderMultiplier || 1);\n                switch(hit_object.type) {\n                    case osu.objects.HitObjectParser.TYPES.CIRCLE:\n                        beatmap_config.circles++;\n                        break;\n                    case osu.objects.HitObjectParser.TYPES.SLIDER:\n                        beatmap_config.sliders++;\n                        break;\n                    case osu.objects.HitObjectParser.TYPES.SPINNER:\n                        beatmap_config.spinners++;\n                }\n                beatmap_config.hit_objects.push(hit_object);\n                break;\n\n        }\n\n\n    }\n    var lastHitObject = beatmap_config.hit_objects[beatmap_config.hit_objects.length-1];\n    beatmap_config.time_length = lastHitObject.endTime || lastHitObject.startTime;\n    return beatmap_config;\n};\n\n\n\nvar BeatmapReader = function (beatmap_zip_file, callback) {\n    var beatMap = {\n        maps: [],\n        assets: []\n    };\n    var md5sums = [];\n    event_handler.emit(event_handler.EVENTS.BEATMAP_LOADING, beatmap_zip_file.name);\n    var zip_length = 0;\n    var extracted = 0;\n    var beatmaps = 0;\n    var beatmaps_loaded = 0;\n\n\n\n    var beatmap_loaded = function () {\n        if (beatmaps_loaded == beatmaps) {\n\n\n            event_handler.emit(event_handler.EVENTS.BEATMAP_LOADED, {md5sums: md5sums, filename: beatmap_zip_file.name});\n            callback(beatMap);\n        }\n    };\n\n    var create_thumbnail = function (img_data) {\n        var MAX_WIDTH = 232;\n        var MAX_HEIGHT = 130;\n        var canvas = document.createElement(\"canvas\");\n        var img = document.createElement(\"img\");\n        img.src = img_data;\n        var width = img.width;\n        var height = img.height;\n        if (width > height) {\n            if (width > MAX_WIDTH) {\n                height *= MAX_WIDTH / width;\n                width = MAX_WIDTH;\n            }\n        } else {\n            if (height > MAX_HEIGHT) {\n                width *= MAX_HEIGHT / height;\n                height = MAX_HEIGHT;\n            }\n        }\n        canvas.width = width;\n        canvas.height = height;\n        var ctx = canvas.getContext(\"2d\");\n        ctx.drawImage(img, 0, 0, width, height);\n        return canvas.toDataURL(\"image/jpeg\");\n    };\n\n    var processing_complete = function () {\n        if (extracted == zip_length) {\n\n            beatmaps = beatMap.maps.length;\n            for (var i = 0; i < beatMap.maps.length; i++) {\n                var beatmap = beatMap.maps[i];\n\n                beatmap.parsed = parse_osu_map_data(beatmap.data);\n                for (var k in beatmap.parsed.metadata) {\n                    beatmap[k.toLocaleLowerCase()] = beatmap.parsed.metadata[k];\n                }\n                beatmap.files = [];\n                var background_file_name = beatmap.parsed.events[0][2].replace(/\"/g, '');\n                var thumbnail = \"\";\n                for (var x = 0; x < beatMap.assets.length; x++) {\n                    if (beatMap.assets[x].filename == background_file_name) {\n                        beatmap.files.push(\n                            {\n                                md5sum: beatMap.assets[x].md5sum,\n                                filename: beatMap.assets[x].filename\n                            }\n                        );\n                        //i know this is async but im hoping it shouldn't cause problems also duplicate insertions wont break anything\n                        database.insert_data(database.TABLES.ASSETS, beatMap.assets[x].md5sum, beatMap.assets[x].data);\n                        beatmap.background = beatMap.assets[x].md5sum;\n                        thumbnail = create_thumbnail(beatMap.assets[x].data);\n                    }\n                    if(beatMap.assets[x].filename == beatmap.parsed.general.AudioFilename){\n                        beatmap.files.push(\n                            {\n                                md5sum: beatMap.assets[x].md5sum,\n                                filename: beatMap.assets[x].filename\n                            }\n                        );\n                        database.insert_data(database.TABLES.ASSETS, beatMap.assets[x].md5sum, beatMap.assets[x].data);\n                        beatmap.song = beatMap.assets[x].md5sum;\n                    }\n\n                }\n                var thumbnail_md5sum = md5(thumbnail);\n                beatmap.thumbnail = thumbnail_md5sum;\n                var difficultyCalc = new osu.beatmaps.DifficultyCalculator(beatmap.parsed);\n                beatmap.stars = difficultyCalc.calculate();\n                md5sums.push(beatmap.md5sum);\n                database.insert_data(database.TABLES.ASSETS, thumbnail_md5sum, thumbnail, function () {}, function () {});//TODO actually callback properly\n                osu.webapi.beatmaps.uploadBeatMap(beatmap);\n                database.insert_data(database.TABLES.BEATMAPS, beatmap.md5sum, beatmap, function () {\n                    beatmaps_loaded++;\n                    beatmap_loaded();\n                }, function () {\n                    beatmaps_loaded++;\n                    beatmap_loaded();\n                });\n\n            }\n\n\n        }\n    };\n\n\n    zip.createReader(new zip.BlobReader(beatmap_zip_file), function (reader) {\n\n        // get all entries from the zip\n        reader.getEntries(function (entries) {\n            if (entries.length) {\n                zip_length = entries.length;\n                for (var i = 0; i < entries.length; i++) {\n\n                    if (entries[i].filename.split(\".\").pop() == \"osu\") {\n                        var extract_data = function (i) {\n                            entries[i].getData(new zip.TextWriter(), function (text) {\n                                var filename = entries[i].filename;\n                                extracted++;\n                                var md5sum = md5(text);\n                                beatMap.maps.push({\n                                    filename: filename,\n                                    data: text,\n                                    md5sum: md5sum\n                                });\n                                //we add beatmaps to the db last to join to all the assets\n                                processing_complete();\n                            }, function (current, total) {\n\n                            });\n                        };\n                        extract_data(i);\n                    }\n\n                    else if (entries[i].filename.split(\".\").pop() == \"png\") {\n                        var extract_data = function (i) {\n                            entries[i].getData(new zip.Data64URIWriter('image/png'), function (data) {\n                                var filename = entries[i].filename;\n                                extracted++;\n                                var md5sum = md5(data);\n                                beatMap.assets.push({\n                                    filename: filename,\n                                    data: data,\n                                    md5sum: md5sum,\n                                });\n                                processing_complete();\n                            }, function (current, total) {\n\n                            });\n                        };\n                        extract_data(i);\n                    }\n                    else if (entries[i].filename.split(\".\").pop() == \"wav\") {\n                        var extract_data = function (i) {\n                            entries[i].getData(new zip.Data64URIWriter('audio/wav'), function (data) {\n                                var filename = entries[i].filename;\n                                extracted++;\n                                var md5sum = md5(data);\n                                beatMap.assets.push({\n                                    filename: filename,\n                                    data: data,\n                                    md5sum: md5sum\n                                });\n                                processing_complete();\n                            }, function (current, total) {\n\n                            });\n                        };\n                        extract_data(i)\n                    }\n\n                    else if (entries[i].filename.split(\".\").pop() == \"jpg\" || entries[i].filename.split(\".\").pop() == \"jpeg\") {\n                        var extract_data = function (i) {\n                            entries[i].getData(new zip.Data64URIWriter('image/jpeg'), function (data) {\n                                var filename = entries[i].filename;\n                                extracted++;\n                                var md5sum = md5(data);\n                                beatMap.assets.push({\n                                    filename: filename,\n                                    data: data,\n                                    md5sum: md5sum\n                                });\n                                processing_complete();\n\n                            }, function (current, total) {\n\n                            });\n                        };\n                        extract_data(i)\n                    }\n\n                    else if (entries[i].filename.split(\".\").pop() == \"mp3\") {\n                        var extract_data = function (i) {\n                            entries[i].getData(new zip.Data64URIWriter('audio/mpeg'), function (data) {\n                                var filename = entries[i].filename;\n                                extracted++;\n                                var md5sum = md5(data);\n                                beatMap.assets.push({\n                                    filename: filename,\n                                    data: data,\n                                    md5sum: md5sum\n                                });\n                                processing_complete();\n                            }, function (current, total) {\n\n                            });\n                        };\n                        extract_data(i)\n                    }\n                    else {\n                        extracted++;\n                        processing_complete();\n                    }\n\n                }\n\n\n            }\n\n        });\n    }, function (error) {\n        console.log(error);\n    });\n\n};\n\r\n/**\n * filereader.js\n * Created by Ugrend on 6/2/2016.\n */\n\n\nif(typeof window.FileReader === \"undefined\"){\n    dragDropLabel.innerHTML = \"Shit won't work on this browser :(\"\n}\nelse {\n    document.body.ondragover = function () {\n        return false;\n    };\n    document.body.ondragend = function () {\n        return false;\n    };\n    document.body.ondrop = function (e) {\n        e.preventDefault();\n\n        var file = e.dataTransfer.files[0];\n        var reader = new FileReader();\n        reader.onloadend = function (event) {\n\n            console.log(event);\n\n            if(event.target.readyState === 2){\n\n                if(event.target.result.constructor.name == \"ArrayBuffer\" ){\n                    var replay_data = new Uint8Array(event.target.result);\n                    //This explodes on chrome\n                    //var b64encoded = btoa(String.fromCharCode.apply(null, replay_data));\n                    var b64encoded = btoa(Uint8ToString(replay_data));\n\n                    osu.webapi.replays.uploadReplay(file,md5(b64encoded));\n                    ReplayParser(replay_data, function (replay_data) {\n                        replay = replay_data; //TODO: not be essentially global\n                        loadBeatMap();\n                    });\n                }\n                else{\n                    //We want it to be mpeg not mp3 (firefox is mpeg chrome is mp3)\n                    //this used to just replace itself eg: event.target.result = event.target.result.replace('audio/mp3','audio/mpeg');\n                    //However this just stoped working on chrome for no good reason, the string would never get replaced\n                    //I have to clone the string for this to work on chrome\n                    var insertResult = event.target.result.replace('audio/mp3','audio/mpeg');\n                    var md5sum = md5(insertResult);\n                    database.insert_data(database.TABLES.ASSETS, md5sum, insertResult, function () {}, function () {});\n                }\n\n            }else{\n                event_handler.emit(event_handler.EVENTS.UNKNOWN_FILE_ERROR);\n            }\n\n        };\n\n            if(file.name.split(\".\").pop() == \"osr\") {\n\n\n\n                reader.readAsArrayBuffer(file);\n            }else if(file.name.split(\".\").pop() == \"osz\"){\n                //beatmap\n                if(beatmap &&  beatmap.locked){\n                    event_handler.emit(event_handler.EVENTS.BEATMAP_LOADING_FAILED, \"beatmap is locked\")\n                }else{\n                    BeatmapReader(file, function (bm) {\n                            beatmap = bm;\n                    });\n                }\n\n            }else if(file.name.split(\".\").pop() == \"osk\"){\n                //skin\n                SkinReader(file,function (skin) {\n                    event_handler.emit(event_handler.EVENTS.SKIN_LOADED, skin);\n                });\n            }else{\n\n                //asset\n                reader.readAsDataURL(file);\n            }\n\n        return false;\n    };\n}\r\n/**\n * indexeddb.js\n * Created by Ugrend on 6/06/2016.\n */\nwindow.indexedDB = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB;\nwindow.IDBTransaction = window.IDBTransaction || window.webkitIDBTransaction || window.msIDBTransaction;\nwindow.IDBKeyRange = window.IDBKeyRange || window.webkitIDBKeyRange || window.msIDBKeyRange;\n\n\nvar database = {\n\n    __db: null,\n    __started: false,\n    indexeddb_available: false,\n\n    TABLES: Object.freeze({\n        BEATMAPS: \"beatmaps\",\n        REPLAYS: \"replays\",\n        SKINS: \"skins\",\n        ASSETS: \"assets\",\n        OPTIONS: \"options\"\n\n    }),\n\n    INDEXES: Object.freeze({\n        REPLAYS: {\n            BEATMAP_ID: 'beatmap_id',\n            PLAYER: 'player'\n        }\n\n    }),\n\n\n    init: function (onsucess) {\n        var self = this;\n        var createDatabase = indexedDB.open(\"osu\", 1);\n        createDatabase.onupgradeneeded = function (e) {\n            var thisDB = e.target.result;\n            for(var k in database.TABLES){\n                if (!thisDB.objectStoreNames.contains(database.TABLES[k])) {\n                    var table = thisDB.createObjectStore(database.TABLES[k]);\n                    if(database.TABLES[k] == database.TABLES.BEATMAPS){\n                        table.createIndex(\"beatmapsetid\", \"beatmapsetid\", {unique: false});\n                        table.createIndex(\"title\", \"title\", {unique: false});\n                        table.createIndex(\"titleunicode\", \"titleunicode\", {unique: false});\n                        table.createIndex(\"artist\", \"artist\", {unique: false});\n                        table.createIndex(\"artistunicode\", \"artistunicode\", {unique: false});\n                        table.createIndex(\"creator\", \"creator\", {unique: false});\n                        table.createIndex(\"tags\", \"tags\", {unique: false});\n                    }\n                    if(database.TABLES[k] == database.TABLES.REPLAYS){\n                        table.createIndex(\"beatmap_id\", \"bmMd5Hash\", {unique: false});\n                        table.createIndex(\"player\", \"playerName\", {unique: false});\n\n                    }\n                }\n            }\n        };\n        createDatabase.onsuccess = function (e) {\n            self.__db = e.target.result;\n            self.__started = true;\n            this.indexeddb_available = true;\n            onsucess();\n        };\n        createDatabase.onerror = function (e) {\n            console.log(e);\n        };\n\n\n\n\n\n    },\n\n    insert_data: function (table, md5sum, data, onsuccess, onerror) {\n        if (this.__started) {\n            var transaction = this.__db.transaction([table], \"readwrite\").objectStore(table).add(data, md5sum);\n            transaction.onsuccess =   onsuccess || function () {};\n            transaction.onerror = function(e){\n                console.log(e.target.error);\n                if(onerror){\n                    onerror(e);\n                }\n\n            };\n        }\n        else {\n            onerror(\"db not started\");\n        }\n\n    },\n    get_data: function (table, md5sum, onsuccess, onerror) {\n        if (this.__started) {\n            var query = this.__db.transaction([table], \"readonly\").objectStore(table).get(md5sum);\n            query.onsuccess = function (e) {\n              onsuccess({md5sum: md5sum, data:e.target.result});\n            };\n            query.onerror = onerror;\n        } else {\n             onerror(\"db not started\");\n        }\n    },\n    get_count: function (table, onsuccess) {\n        var countReq = this.__db.transaction([table], \"readonly\").objectStore(table).count();\n        countReq.onsuccess = function () {\n            onsuccess(countReq.result);\n        }\n    },\n    delete_data: function (table,key, onsuccess) {\n        var request = this.__db.transaction([table], \"readwrite\").objectStore(table).delete(key);\n        request.onsuccess = onsuccess;\n    },\n\n    get_all_keys: function (table,callback) {\n        var request = this.__db.transaction([table], \"readonly\").objectStore(table);\n        var result = [];\n        request.openCursor().onsuccess = function (event) {\n\n\n            var cursor = event.target.result;\n            if(cursor){\n                result.push(cursor.key);\n                cursor.continue();\n            }else{\n                callback(result);\n            }\n\n\n        }\n    },\n    get_data_from_index(table, index, param, onsuccess, onerror){\n        var result = [];\n        var key = IDBKeyRange.only(param);\n        var query = this.__db.transaction([table], \"readonly\").objectStore(table).index(index).openCursor(key)\n            .onsuccess= function (e) {\n            var cursor = e.target.result;\n            if(cursor){\n                result.push(cursor.value);\n                cursor.continue();\n            }else{\n                onsuccess(result);\n            }\n\n        };\n\n\n\n        query.onsuccess = function (e) {\n            onsuccess(e.target.result);\n        };\n    },\n    getAll(table,callback){\n        var request = this.__db.transaction([table], \"readonly\").objectStore(table);\n        var result = [];\n        request.openCursor().onsuccess = function (event) {\n\n\n            var cursor = event.target.result;\n            if(cursor){\n                result.push(cursor.value);\n                cursor.continue();\n            }else{\n                callback(result);\n            }\n\n\n        }\n\n    },\n    update_data(table,key,data, onsuccess, onerror){\n        onsuccess = onsuccess || function () {};\n        onerror = onerror || function () {};\n        if (this.__started) {\n            var transaction = this.__db.transaction([table], \"readwrite\").objectStore(table).put(data, key);\n            transaction.onsuccess =   onsuccess;\n            transaction.onerror = function(e){\n                console.log(e.target.error);\n                onerror(e);\n            };\n        }\n        else {\n            onerror(\"db not started\");\n        }\n\n    },\n\n\n    delete_database: function () {\n      if(DEBUG) {\n          indexedDB.deleteDatabase('osu');\n      }else{\n          console.log(\"no\");\n      }\n    },\n    clear_table: function(table_name){\n        if(DEBUG){\n            var transaction = this.__db.transaction([table_name], \"readwrite\");\n            var objectStore = transaction.objectStore(table_name);\n            var objectStoreRequest = objectStore.clear();\n\n            objectStoreRequest.onsuccess = function(event) {\n                console.log(table_name + \" cleared!\");\n\n            }\n        }else{\n            console.log(\"no\");\n        }\n\n    }\n\n\n\n};\n\n\r\n/**\n * replayreader.js\n * Created by Ugrend on 2/06/2016.\n */\n\n\n/**\n * Converts a hexdump of a replay file into a JS object\n * @param replay_data {String value of a hexdump of replay file}\n * @returns {{type: *, version: *, bmMd5Hash: *, playerName: *, rMd5Hash: *, h300: *, h100: *, h50: *, hGekis: *, hKatus: *, hMisses: *, tScore: *, tCombo: *, fullClear: *, mods: *, lifeBar: *, timeTicks: *, replayByteLength: *}}\n * @constructor\n */\nvar ReplayParser = function(replay_data, callback){\n    event_handler.emit(event_handler.EVENTS.REPLAY_LOADING);\n    //https://osu.ppy.sh/wiki/Osr_%28file_format%29\n    var b64EncodedMd5 = md5(btoa(Uint8ToString(replay_data)));\n    var RP = {\n        replay_bytes: replay_data,\n\n        byte_index: 0,\n\n\n        //data types\n        getByte: function(){\n            return this.replay_bytes[this.byte_index++];\n        },\n        getShort: function(){\n            return this.replay_bytes[this.byte_index++]\n                | (this.replay_bytes[this.byte_index++] << 8);\n        },\n        getInteger: function(){\n            return this.replay_bytes[this.byte_index++]\n                | (this.replay_bytes[this.byte_index++] << 8)\n                | (this.replay_bytes[this.byte_index++] << 16)\n                | (this.replay_bytes[this.byte_index++] << 24);\n        },\n        getLong: function(){\n            return this.getInteger() + this.getInteger() * 0x100000000;\n        },\n        getULEB128: function(){\n            var t = 0;\n            var s = 0;\n            while (true) {\n                var byte = this.getByte();\n                t |= ((byte & 0x7F) << s);\n                if ((byte & 0x80) === 0) break;\n                s += 7;\n            }\n            return t;\n        },\n        getString: function(){\n\n                /*\n                From: https://osu.ppy.sh/wiki/Osr_%28file_format%29\n                Has three parts; a single byte which will be either\n                0x00,indicating that the next two parts are not present, or\n                0x0b (decimal 11), indicating that the next two parts are present.\n                If it is 0x0b, there will then be a ULEB128,\n                representing the byte length of the following string, and then the string itself, encoded in UTF-8. See wikipedia:UTF-8*/\n                var startByte = this.getByte();\n                if (startByte == 0x0B){\n                    var len = this.getULEB128();\n                    var s = \"\";\n                    for (var i = 0; i < len; i++) {\n                        s += String.fromCharCode(this.getByte());\n                    }\n                    return s;\n                }\n                return \"\";\n        }\n\n    };\n    var replay = {\n        type: RP.getByte(),\n        version: RP.getInteger(),\n        bmMd5Hash: RP.getString(),\n        playerName: RP.getString(),\n        rMd5Hash: RP.getString(),\n        h300: RP.getShort(),\n        h100: RP.getShort(),\n        h50: RP.getShort(),\n        hGekis: RP.getShort(),\n        hKatus: RP.getShort(),\n        hMisses: RP.getShort(),\n        tScore: RP.getInteger(),\n        tCombo: RP.getShort(),\n        fullClear: RP.getByte(),\n        mods: osu.mods.getMods(RP.getInteger()),\n        lifeBar: RP.getString(),\n        time_played: RP.getLong(),\n        replayByteLength: RP.getInteger(),\n        b64md5sum: b64EncodedMd5\n    };\n\n    //this converts from .net ticks to epoch time\n    var epoch = (replay.time_played - 621355968000000000) / 10000 ;\n    var date_time = new Date(epoch);\n    replay.time_played = date_time.toLocaleString();\n\n\n    replay.grade = osu.score.getGrade(replay.h300, replay.h100, replay.h50,replay.hMisses, replay.mods).name;\n    replay.accuracy = osu.score.getAccuracy(replay.h300, replay.h100, replay.h50,replay.hMisses);\n\n    replay.been_rendered = false;\n\n    LZMA.decompress(\n        RP.replay_bytes.slice(RP.byte_index),\n        function(data) {\n            var replayData = data.split(\",\");\n            var lastTimeFrame = 0;\n            for(var i = 0 ; i< replayData.length ; i++){\n                var splitData = replayData[i].split(\"|\");\n                for(var x = 0; x< splitData.length ; x++){\n                    splitData[x] = parseFloat(splitData[x]);\n                }\n\n                if(splitData.length !=4) continue;\n                var time = +splitData[0];\n                if(time >= 0){\n                    time+= lastTimeFrame;\n                    lastTimeFrame = time;\n                }\n\n                var replayFrame = {\n                    t: time,\n                    x:splitData[1],\n                    y: splitData[2],\n                    keys: osu.keypress.get_keys(splitData[3])\n\n                };\n\n\n                replayData[i] = replayFrame;\n            }\n\n\n            replay.replayData = replayData;\n\n            database.insert_data(database.TABLES.REPLAYS, replay.rMd5Hash, replay, function () {\n                event_handler.emit(event_handler.EVENTS.REPLAY_LOADED);\n                callback(replay);\n            }, function () {\n                event_handler.emit(event_handler.EVENTS.REPLAY_LOADED);\n                callback(replay);\n            });\n        },\n        function(){}\n    );\n\n};\n\r\n/**\n * skinreader.js\n * Created by Ugrend on 6/06/2016.\n */\nvar SkinReader = function(skin_zip, callback) {\n\n    event_handler.emit(event_handler.EVENTS.SKIN_LOADING, skin_zip.name);\n\n    var skins = {\n        name: \"\",\n        author: \"\",\n        version: \"\",\n        colours: [],\n        assets: [],\n        md5sum: \"\",\n    };\n\n    zip.createReader(new zip.BlobReader(skin_zip), function (reader) {\n        var zip_length = 0;\n        var process_count = 0;\n        var processing_complete = function () {\n            process_count++;\n            if (process_count >= zip_length){\n\n                database.insert_data(database.TABLES.SKINS,skins.md5sum,skins,callback,callback);\n            }\n        };\n\n       var RGBToHex = function(r,g,b){\n            var bin = r << 16 | g << 8 | b;\n            return (function(h){\n                return new Array(7-h.length).join(\"0\")+h\n            })(bin.toString(16).toUpperCase())\n        };\n\n\n        reader.getEntries(function (entries) {\n            if (entries.length) {\n                zip_length = entries.length;\n                for (var i = 0; i < entries.length; i++) {\n                    var extension = entries[i].filename.split(\".\").pop();\n                    if (extension == \"ini\") {\n                        entries[i].getData(new zip.TextWriter(), function (text) {\n                            skins.md5sum = md5(text);\n\n                            var lines = text.replace(\"\\r\", \"\").split(\"\\n\");\n                            for (var j = 0; j < lines.length; j++) {\n                                var line = lines[j];\n                                if (line === \"\") {\n                                    continue;\n                                }\n                                if (line.indexOf(\"Name:\") == 0) {\n                                    var setting = line.split(\":\");\n                                    if (setting.length > 1) skins.name = setting[1].trim();\n                                }\n                                if (line.indexOf(\"Author:\") == 0) {\n                                    var setting = line.split(\":\");\n                                    if (setting.length > 1) skins.author = setting[1].trim();\n                                }\n                                if (line.indexOf(\"Version:\") == 0) {\n                                    var setting = line.split(\":\");\n                                    if (setting.length > 1) skins.version = setting[1].trim();\n                                }\n                                if (line.indexOf(\"Combo\") == 0) {\n                                    var setting = line.split(\":\");\n                                    if (setting.length > 1) {\n                                        var rgb = setting[1].trim().split(\",\");\n                                        if (rgb.length === 3) {\n                                            skins.colours.push(parseInt(\"0x\" + RGBToHex(rgb[0], rgb[1], rgb[2])));\n                                        }\n                                    }\n                                }\n                            }\n                            processing_complete();\n                        });\n\n                    } else if (extension == \"png\" || extension == \"wav\" || extension == \"mp3\") {\n\n                        var filename = entries[i].filename.split(\"/\");\n                        if(filename.length > 1 )filename = filename[1]; else filename = filename[0];\n                        if (extension == \"png\") {\n                            (function (filename) {\n                                if(DEBUG)console.log(filename);\n                                entries[i].getData(new zip.Data64URIWriter('image/png'), function (data) {\n                                    var md5sum = md5(data);\n                                    skins.assets.push({\n                                        filename: filename,\n                                        md5sum: md5sum\n                                    });\n                                    database.insert_data(database.TABLES.ASSETS, md5sum, data, processing_complete, processing_complete)\n                                });\n                            })(filename);\n\n                        } else if(extension == \"wav\") {\n\n                            (function (filename) {\n                                if(DEBUG)console.log(filename);\n                                entries[i].getData(new zip.Data64URIWriter('audio/wav'), function (data) {\n                                    var md5sum = md5(data);\n                                    skins.assets.push({\n                                        filename: filename,\n                                        md5sum: md5sum\n                                    });\n                                    database.insert_data(database.TABLES.ASSETS, md5sum, data, processing_complete, processing_complete)\n                                });\n                            })(filename);\n                        }else{\n                            (function (filename) {\n                                if(DEBUG)console.log(filename);\n                                entries[i].getData(new zip.Data64URIWriter('audio/mpeg'), function (data) {\n                                    var md5sum = md5(data);\n                                    skins.assets.push({\n                                        filename: filename,\n                                        md5sum: md5sum\n                                    });\n                                    database.insert_data(database.TABLES.ASSETS, md5sum, data, processing_complete, processing_complete)\n                                });\n                            })(filename);\n\n                        }\n                    } else {\n                        processing_complete();\n                    }\n                }\n            }\n        });\n    });\n};\r\n/**\n *hitsounds.js\n * Created by Ugrend on 9/07/2016.\n */\nvar osu = osu || {};\nosu.audio = osu.audio || {};\nosu.audio.HitSound = {\n    HIT_SOUNDS: {\n        SOUND_NORMAL: \"HITNORMAL\",\n        SOUND_WHISTLE: \"HITWHISTLE\",\n        SOUND_FINISH: \"HITFINISH\",\n        SOUND_CLAP: \"HITCLAP\",\n    },\n    HIT_ADDITIONS: {\n        NORMAL: \"NORMAL_\",\n        SOFT: \"SOFT_\",\n        DRUM: \"DRUM_\"\n    },\n\n    getHitSounds: function (hitSoundArray, timing,noNormals) {\n        noNormals = noNormals || false;\n        var soundArray = [];\n        var hitAdditons = this.HIT_ADDITIONS.NORMAL;\n        switch(timing.sampleType){\n            case osu.objects.HitObjectParser.HIT_ADDITIONS.DRUM:\n                hitAdditons = this.HIT_ADDITIONS.DRUM;\n                break;\n            case osu.objects.HitObjectParser.HIT_ADDITIONS.SOFT:\n                hitAdditons = this.HIT_ADDITIONS.SOFT;\n        }\n        if(!noNormals){\n            soundArray.push(osu.audio.sound[this.HIT_ADDITIONS.NORMAL+this.HIT_SOUNDS.SOUND_NORMAL]);\n        }\n\n        for(var i = 0 ; i < hitSoundArray.length; i ++){\n            switch(hitSoundArray[i]){\n                case osu.objects.HitObjectParser.HIT_SOUNDS.SOUND_NORMAL:\n                    break;\n                case osu.objects.HitObjectParser.HIT_SOUNDS.SOUND_WHISTLE:\n                    soundArray.push(osu.audio.sound[hitAdditons+this.HIT_SOUNDS.SOUND_WHISTLE]);\n                    break;\n                case osu.objects.HitObjectParser.HIT_SOUNDS.SOUND_FINISH:\n                    soundArray.push(osu.audio.sound[hitAdditons+this.HIT_SOUNDS.SOUND_FINISH]);\n                    break;\n                case osu.objects.HitObjectParser.HIT_SOUNDS.SOUND_CLAP:\n                    soundArray.push(osu.audio.sound[hitAdditons+this.HIT_SOUNDS.SOUND_CLAP]);\n                    break;\n            }\n\n        }\n        return soundArray;\n    }\n\n\n};\r\n/**\n * music_controller.js\n * Created by Ugrend on 9/06/2016.\n */\nvar osu = osu || {};\nosu.audio = osu.audio || {};\nosu.audio.music =  {\n\n    preview_screen: false,\n    preview_time: 0,\n    __audio: null,\n    md5sum: \"\",\n    playing: false,\n    events_bound: false,\n    using_howl: true,\n\n    init: function (src, md5sum) {\n\n        /*You might read this and ask, why have both html5 Audio and howler js\n\n            Basically had some weird problems with Chrome and datauri audio where switching sources/moving positions\n            would sometimes corrupt the audio playing.\n            To fix this i thought i would try using a audio library to see if it solved this problem\n            However this introduced a new problem, howlerjs didn't seem to work with CORS when the remote source did not allow remote domains,\n            Since the problem didn't affect url sources i decided to use both, howlerjs for datauri and standard Audio for everything else.\n\n         */\n\n        if(!this.events_bound){\n            event_handler.on(event_handler.EVENTS.SETTINGS_CHANGED, this.set_volume.bind(this));\n            this.events_bound = true;\n        }\n        //only start again\n        if(src && md5sum != this.md5sum){\n            this.md5sum = md5sum;\n            //howl has issues with same origin policy so only use it with datauris\n            this.using_howl = src.startsWith('data:audio');\n\n            //clear out original audio object\n            if(this.__audio instanceof Howl){\n                this.__audio.unload();\n            }\n            if(this.__audio instanceof Audio){\n                this.__audio.pause();\n                this.__audio.src = \"\";\n            }\n            if(this.using_howl){\n                this.__audio = new Howl({\n                    src:[src],\n                    onend:this.repeat.bind(this)\n                });\n            }else{\n                if(this.__audio instanceof Audio){\n                    this.__audio.src = src;\n                }else{\n                    this.__audio = new Audio(src);\n                    this.__audio.onended = this.repeat.bind(this);\n                }\n\n            }\n\n            this.set_volume();\n            this.playing = false;\n        }\n        this.set_playback_speed(1);//reset playback speed if was playing DT/HT\n\n\n    },\n    set_volume: function () {\n        if(this.__audio) {\n            if(this.using_howl){\n                this.__audio.volume(osu.settings.SETTINGS.master_volume * osu.settings.SETTINGS.music_volume);\n            }else{\n                this.__audio.volume = osu.settings.SETTINGS.master_volume * osu.settings.SETTINGS.music_volume;\n            }\n\n        }\n    },\n\n    stop: function () {\n        if(this.__audio){\n            if(this.using_howl){\n                this.__audio.stop();\n            }else{\n                this.__audio.pause();\n                this.__audio.currentTime = 0;\n            }\n\n        }\n    },\n\n    start: function(){\n        if(!this.__audio) return;\n        if(this.preview_screen){\n            if(!this.playing){\n                if(this.using_howl){\n                    this.__audio.seek(this.preview_time);\n                }else{\n                    this.__audio.currentTime = this.preview_time;\n                }\n\n                this.__audio.play();\n                this.playing = true;\n            }\n\n        }\n        else{\n            if(this.using_howl){\n                this.__audio.seek(0);\n            }else{\n                this.__audio.currentTime = 0;\n            }\n            this.__audio.play();\n        }\n\n    },\n    set_position: function (t) {\n        if(!this.__audio) return;\n        if(this.using_howl){\n            this.__audio.seek(t);\n        }else{\n            this.__audio.currentTime = t;\n        }\n\n    },\n\n    play: function(){\n        if(!this.__audio) return;\n        this.__audio.play()\n    },\n    pause: function () {\n        if(!this.__audio) return;\n        this.__audio.pause();\n    },\n    set_playback_speed: function (rate) {\n        if(!this.__audio) return;\n        if(this.using_howl){\n            this.__audio.rate(rate);\n        }else{\n            this.__audio.playbackRate = rate;\n        }\n\n\n\n    },\n\n    loaded: function () {\n        if(!this.using_howl && this.__audio){\n            return osu.audio.music.__audio.readyState == 4 || osu.audio.music.__audio.src != \"\" && !osu.audio.music.__audio.error\n        }\n        return true;\n    },\n    repeat: function () {\n        if(!this.__audio) return;\n        if(this.preview_screen){\n            this.playing = false;\n            this.start();\n        }\n\n    }\n\n\n\n\n\n\n\n\n\n\n\n\n};\n\n\r\n/**\n * sound_effects.js\n * Created by Ugrend on 16/06/2016.\n */\nvar osu = osu || {};\nosu.audio = osu.audio || {};\nosu.audio.sound = {\n    APPLAUSE: '',\n    COMBOBREAK: '',\n    COUNT1S: '',\n    COUNT2S: '',\n    COUNT3S: '',\n    DRUM_HITCLAP: '',\n    DRUM_HITFINISH: '',\n    DRUM_HITNORMAL: '',\n    DRUM_HITWHISTLE: '',\n    DRUM_SLIDERSLIDE: '',\n    DRUM_SLIDERTICK: '',\n    DRUM_SLIDERWHISTLE: '',\n    FAILSOUND: '',\n    GOS: '',\n    MENUBACK: '',\n    MENUCLICK: '',\n    MENUHIT: '',\n    NORMAL_HITCLAP: '',\n    NORMAL_HITFINISH: '',\n    NORMAL_HITNORMAL: '',\n    NORMAL_HITWHISTLE: '',\n    NORMAL_SLIDERSLIDE: '',\n    NORMAL_SLIDERTICK: '',\n    NORMAL_SLIDERWHISTLE: '',\n    READYS: '',\n    SECTIONFAIL: '',\n    SECTIONPASS: '',\n    SHUTTER: '',\n    SOFT_HITCLAP: '',\n    SOFT_HITFINISH: '',\n    SOFT_HITNORMAL: '',\n    SOFT_HITWHISTLE: '',\n    SOFT_SLIDERSLIDE: '',\n    SOFT_SLIDERTICK: '',\n    SOFT_SLIDERWHISTLE: '',\n    SPINNERBONUS: '',\n    SPINNER_OSU: '',\n    SPINNERSPIN: '',\n\n    initialised: false,\n\n    play_sound(effect,volume){\n        if(!this.initialised || effect == '') return;\n        volume = volume || 1;\n        effect.volume = (osu.settings.SETTINGS.master_volume * osu.settings.SETTINGS.sound_effects_volume) * volume;\n        effect.currentTime = 0;\n        effect.play();\n    },\n\n    init(){\n        this.APPLAUSE = new Audio(src=osu.skins.audio.applause);\n        this.COMBOBREAK = new Audio(src=osu.skins.audio.combobreak);\n        this.COUNT1S = new Audio(src=osu.skins.audio.count1s);\n        this.COUNT2S = new Audio(src=osu.skins.audio.count2s);\n        this.COUNT3S = new Audio(src=osu.skins.audio.count3s);\n        this.DRUM_HITCLAP = new Audio(src=osu.skins.audio.drum_hitclap);\n        this.DRUM_HITFINISH = new Audio(src=osu.skins.audio.drum_hitfinish);\n        this.DRUM_HITNORMAL = new Audio(src=osu.skins.audio.drum_hitnormal);\n        this.DRUM_HITWHISTLE = new Audio(src=osu.skins.audio.drum_hitwhistle);\n        this.DRUM_SLIDERSLIDE = new Audio(src=osu.skins.audio.drum_sliderslide);\n        this.DRUM_SLIDERTICK = new Audio(src=osu.skins.audio.drum_slidertick);\n        this.DRUM_SLIDERWHISTLE = new Audio(src=osu.skins.audio.drum_sliderwhistle);\n        this.FAILSOUND = new Audio(src=osu.skins.audio.failsound);\n        this.GOS = new Audio(src=osu.skins.audio.gos);\n        this.MENUBACK = new Audio(src=osu.skins.audio.menuback);\n        this.MENUCLICK = new Audio(src=osu.skins.audio.menuclick);\n        this.MENUHIT = new Audio(src=osu.skins.audio.menuhit);\n        this.NORMAL_HITCLAP = new Audio(src=osu.skins.audio.normal_hitclap);\n        this.NORMAL_HITFINISH = new Audio(src=osu.skins.audio.normal_hitfinish);\n        this.NORMAL_HITNORMAL = new Audio(src=osu.skins.audio.normal_hitnormal);\n        this.NORMAL_HITWHISTLE = new Audio(src=osu.skins.audio.normal_hitwhistle);\n        this.NORMAL_SLIDERSLIDE = new Audio(src=osu.skins.audio.normal_sliderslide);\n        this.NORMAL_SLIDERTICK = new Audio(src=osu.skins.audio.normal_slidertick);\n        this.NORMAL_SLIDERWHISTLE = new Audio(src=osu.skins.audio.normal_sliderwhistle);\n        this.READYS = new Audio(src=osu.skins.audio.readys);\n        this.SECTIONFAIL = new Audio(src=osu.skins.audio.sectionfail);\n        this.SECTIONPASS = new Audio(src=osu.skins.audio.sectionpass);\n        this.SHUTTER = new Audio(src=osu.skins.audio.shutter);\n        this.SOFT_HITCLAP = new Audio(src=osu.skins.audio.soft_hitclap);\n        this.SOFT_HITFINISH = new Audio(src=osu.skins.audio.soft_hitfinish);\n        this.SOFT_HITNORMAL = new Audio(src=osu.skins.audio.soft_hitnormal);\n        this.SOFT_HITWHISTLE = new Audio(src=osu.skins.audio.soft_hitwhistle);\n        this.SOFT_SLIDERSLIDE = new Audio(src=osu.skins.audio.soft_sliderslide);\n        this.SOFT_SLIDERTICK = new Audio(src=osu.skins.audio.soft_slidertick);\n        this.SOFT_SLIDERWHISTLE = new Audio(src=osu.skins.audio.soft_sliderwhistle);\n        this.SPINNERBONUS = new Audio(src=osu.skins.audio.spinnerbonus);\n        this.SPINNER_OSU = new Audio(src=osu.skins.audio.spinner_osu);\n        this.SPINNERSPIN = new Audio(src=osu.skins.audio.spinnerspin);\n        this.initialised = true;\n    }\n\n};\r\n/**\n * beatmaps.js\n * Created by Ugrend on 4/06/2016.\n */\n// https://osu.ppy.sh/wiki/Osu_%28file_format%29\n\n\nvar osu = osu || {};\nosu.beatmaps = osu.beatmaps || {};\n\n\nosu.beatmaps.BeatmapPreview = class BeatmapPreview {\n    constructor(md5sum, callback) {\n        callback = callback || function () {};\n        this.loaded = false;\n        this.artist = \"\";\n        this.artistunicode = \"\";\n        this.beatmapid = \"\";\n        this.beatmapsetid = \"\";\n        this.creator = \"\";\n        this.md5sum = md5sum;\n        this.source = \"\";\n        this.tags = \"\";\n        this.thumbnail_data = \"\";\n        this.title = \"\";\n        this.titleunicode = \"\";\n        this.version = \"\";\n        this.song = \"\";\n        this.preview_song_time = 0;\n        this.background = \"\";\n\n        //difficulty\n        this.approachRate = \"\";\n        this.circleSize = \"\";\n        this.overallDifficulty = \"\";\n        this.HPDrain = \"\";\n        this.stars = \"\";\n        this.bpm = 0;\n        this.objects = 0;\n        this.circles = 0;\n        this.sliders = 0;\n        this.spinners = 0;\n        this.song_length = \"\";\n\n        var self = this;\n        database.get_data(database.TABLES.BEATMAPS,md5sum, function (r) {\n            var beatmap = r.data;\n            self.artist = beatmap.artist || \"\";\n            //if unicode is same as normal just ignore it so we dont print twice\n            self.artistunicode = (beatmap.artistunicode == beatmap.artist ? false : beatmap.artistunicode);\n            self.artistunicode = beatmap.artistunicode || null;\n            self.beatmapid = beatmap.beatmapid || \"\";\n            self.beatmapsetid = beatmap.beatmapsetid || \"\";\n            self.creator = beatmap.creator || \"\";\n            self.source = beatmap.source || \"\";\n            self.tags = beatmap.tags || \"\";\n            self.title = beatmap.title || \"\";\n            self.titleunicode = (beatmap.titleunicode == beatmap.title ? false : beatmap.titleunicode);\n            self.version = beatmap.version || \"\";\n            self.song = beatmap.song || \"\";\n            self.preview_song_time = parseInt(beatmap.parsed.general.PreviewTime) || 0;\n            self.background = beatmap.background || \"\";\n            self.approachRate = beatmap.parsed.difficulty.ApproachRate || 0;\n            self.circleSize = beatmap.parsed.difficulty.CircleSize || 0;\n            self.overallDifficulty = beatmap.parsed.difficulty.OverallDifficulty || 0;\n            self.HPDrain = beatmap.parsed.difficulty.HPDrainRate || 0;\n            self.minBPM = beatmap.parsed.minBPM;\n            self.maxBPM = (beatmap.parsed.maxBPM == -1 ? false : beatmap.parsed.maxBPM);\n            self.circles = beatmap.parsed.circles || 0;\n            self.sliders = beatmap.parsed.sliders || 0;\n            self.spinners = beatmap.parsed.spinners || 0;\n            self.objects = self.circles + self.sliders + self.spinners;\n            self.stars = parseFloat(beatmap.stars);\n            self.display_stars = [];\n            var stars = self.stars;\n            for(var i = 0; i <= Math.ceil(self.stars); i++){\n                if(i > 9) break; //only display 10stars max\n\n\n                if(stars > 1){\n                    self.display_stars.push(\n                        {\n                            h: 52,\n                            w: 50,\n                            star_img: osu.skins.resources.star.url\n                        }\n                    )\n                }else{\n                    if(stars >= 0){\n                        self.display_stars.push(\n                            {\n                                h: 52 * stars,\n                                w: 50 * stars,\n                                star_img: osu.skins.resources.star.url\n                            })\n                    }\n\n                }\n                stars -= 1;\n\n            }\n\n            var milliseconds = beatmap.parsed.time_length;\n            var seconds = parseInt((milliseconds / 1000) % 60 );\n            var minutes = parseInt(((milliseconds / (1000*60)) % 60));\n            var hours   = parseInt(((milliseconds / (1000*60*60)) % 24));\n\n            var pad = function (s) {\n                return ('00'+s).substring(s.length);\n            };\n\n            self.song_length = (hours > 0 ? hours.toString() + \":\" : \"\") + pad(minutes.toString()) + \":\"  + pad(seconds.toString());\n\n            database.get_data(database.TABLES.ASSETS,beatmap.thumbnail, function (result) {\n                self.thumbnail_data = result.data;\n                self.loaded = true;\n                callback(this);\n            });\n        })\n\n    }\n\n\n    play_song() {\n        var preview_time = this.preview_song_time;\n        database.get_data(database.TABLES.ASSETS, this.song, function (r) {\n            osu.audio.music.preview_time = preview_time / 1000;\n            osu.audio.music.preview_screen = true;\n            osu.audio.music.init(r.data,r.md5sum);\n            osu.audio.music.start();\n        });\n    }\n\n    load_background(){\n\n        database.get_data(database.TABLES.ASSETS, this.background, function (r) {\n            osu.ui.interface.mainscreen.set_background(r.data);\n        });\n    }\n\n\n};\n\nosu.beatmaps.BeatmapLoader = {\n        beatmap_found: false,\n        map_name: \"\",\n        required_files: [],\n        background: \"\",\n        map_data: \"\",\n        assets: [],\n        song: \"\",\n        __beatmap: \"\",\n        __files_needed: [],\n        md5sum: \"\",\n\n        load: function (md5sum, onsuccess, onerror) {\n            //clear out old data\n            this.beatmap_found = false;\n            this.map_name = false;\n            this.required_files = [];\n            this.assets = [];\n            this.song = \"\";\n            this.song_md5sum = \"\";\n            this.__beatmap = \"\";\n            this.__files_needed = [];\n            this.background = \"\";\n\n            this.md5sum = md5sum;\n            this.onsuccess = onsuccess;\n            this.onerror = onerror;\n            // check if last loaded beatmap has our data first (incase indexeddb is unavailable/etc)\n            if (beatmap) {\n                for (var i = 0; i < beatmap.maps.length; i++) {\n                    if (beatmap.maps[i].md5sum == md5sum) {\n                        beatmap.locked = true; //lock the data to prevent droping another beatmap\n                        this.map_data = beatmap.maps[i].parsed;\n                        this.required_files = beatmap.maps[i].files;\n                        this.assets = beatmap.assets;\n                        this.beatmap_found = true;\n                        break;\n                    }\n                }\n                if (this.beatmap_found) {\n                    this.__beatmap_loaded();\n                }\n                else {\n                    this.__look_in_db();\n                }\n            } else {\n                this.__look_in_db();\n            }\n        },\n\n        __look_in_db: function () {\n            database.get_data(database.TABLES.BEATMAPS, this.md5sum, this.__load_bm_from_db.bind(this), function (e) {\n                event_handler.emit(event_handler.EVENTS.DB_ERROR, e.event.error);\n            });\n        },\n        __load_bm_from_db: function (result) {\n\n            if (result && result.data) {\n                this.__beatmap = result.data;\n                this.map_data = this.__beatmap.parsed;\n                this.required_files = this.__beatmap.files;\n                this.__files_needed = this.__beatmap.files.slice(0);\n                if(this.__files_needed && this.__files_needed.length){\n                    var file_to_get = this.__files_needed.pop().md5sum;\n                    database.get_data(database.TABLES.ASSETS, file_to_get, this.__load_assets_from_db.bind(this), function (e) {\n                        event_handler.emit(event_handler.EVENTS.DB_ERROR, e.event.error);\n                    });\n                }\n                else{\n                    //refresh assets\n                    osu.webapi.tasks.checkForMapAssets(this.__beatmap.md5sum);\n                    this.__load_assets_from_db();\n                }\n            } else {\n                event_handler.emit(event_handler.EVENTS.BEATMAP_NOTFOUND, result.md5sum);\n            }\n        },\n        __load_assets_from_db: function (result) {\n            if (result && result.data) {\n                this.assets.push(result);\n            } else if(result) {\n                event_handler.emit(event_handler.EVENTS.ASSET_NOT_FOUND, result.md5sum)\n            }\n            if (this.__files_needed && this.__files_needed.length) {\n                var file_to_get = this.__files_needed.pop().md5sum;\n                database.get_data(database.TABLES.ASSETS, file_to_get, this.__load_assets_from_db.bind(this), function (e) {\n                    event_handler.emit(event_handler.EVENTS.DB_ERROR, e.event.error);\n                });\n            } else {\n                this.beatmap_found = true;\n                this.__beatmap_loaded();\n            }\n\n        }\n        ,\n\n        __beatmap_loaded: function () {\n            if (this.beatmap_found) {\n                this.__process_beatmap();\n                //we only call onsuccess if we have the song, if we dont the findAudio api call will call the success function\n                if(this.song){\n                    this.onsuccess(this);\n                }\n\n\n            } else {\n                event_handler.emit(event_handler.EVENTS.BEATMAP_NOTFOUND, this.md5sum);\n                this.onerror(\"beatmap not found: \" + this.md5sum);\n\n            }\n        },\n\n        __process_beatmap: function () {\n            this.song_md5sum =this.__lookup_file_md5(this.map_data.general.AudioFilename);\n            this.song = this.__get_asset_from_md5(this.song_md5sum);\n            this.background = this.__get_asset_from_md5(this.__lookup_file_md5(this.map_data.events[0][2].replace(/\"/g, '')));\n            this.map_name = this.map_data.metadata.Artist + \" - \" + this.map_data.metadata.Title + \" [\" + this.map_data.metadata.Version + \"]\";\n            this.author = this.map_data.metadata.Creator;\n            if(this.song_md5sum == \"f25f5aa010a42f3618aea72ed8cfceaf\" &&!this.song){\n                this.song = \"data/RenatusSoleily.mp3\";\n            }\n\n            if(!this.song){\n                osu.webapi.audio.findAudio(this,this.onsuccess);\n            }\n\n\n        },\n        __lookup_file_md5: function (filename) {\n            for (var i = 0; i < this.required_files.length; i++) {\n                if (this.required_files[i].filename == filename) {\n                    return this.required_files[i].md5sum;\n                }\n            }\n        },\n        __get_asset_from_md5: function (md5) {\n            for (var i = 0; i < this.assets.length; i++) {\n                if (this.assets[i].md5sum == md5) {\n                    return this.assets[i].data;\n                }\n            }\n        }\n};\n\r\n/**\n * difficuly_calculator.js\n * Created by Ugrend on 23/06/2016.\n *\n * Code ported from opsu See\n * https://github.com/itdelatrisu/opsu/blob/master/src/itdelatrisu/opsu/beatmap/BeatmapDifficultyCalculator.java\n */\n\nvar osu = osu || {};\nosu.beatmaps = osu.beatmaps || {};\n\nosu.beatmaps.DifficultyCalculator = class DifficultyCalculator{\n\n    static get DifficultyType() {\n        return Object.freeze({\n            SPEED: 0,\n            AIM: 1\n\n        });\n\n    }\n\n    constructor(parsedBeatmapData){\n        this.TpHitObject = class TpHitObject{\n\n\n\n            constructor(hitObject){\n                this.TpSlider = class TpSlider {\n                    constructor(hitObject){\n                        this.startTime = hitObject.startTime;\n                        this.sliderTime = (hitObject.endTime - this.startTime)/hitObject.repeatCount;\n                        this.curve = new osu.objects.Curve(hitObject);\n                    }\n\n                    getPosAtTime(time){\n                        var t = (time - this.startTime) / this.sliderTime;\n                        var floor = Math.floor(t);\n                        t = (floor % 2 == 0) ? t - floor : floor + 1 - t;\n                        return this.curve.get_point(t);\n                    }\n\n\n                };\n\n\n                this.DECAY_BASE = [ 0.3, 0.15 ];\n                this.ALMOST_DIAMETER = 90;\n                this.STREAM_SPACING_TRESHOLD = 110;\n                this.SINGLE_SPACING_TRESHOLD = 125;\n                this.SPACING_WEIGHT_SCALING = [1400, 26.25];\n                this.LAZY_SLIDER_STEP_LENGTH = 1;\n                this.lazySliderLengthFirst = 0;\n                this.lazySliderLengthSubsequent = 0;\n                this.strains = [ 1, 1 ];\n\n\n                this.hitObject = hitObject;\n                var scalingFactor = (52/hitObject.size);\n                this.normalizedStartPosition = {\n                    x: hitObject.x * scalingFactor,\n                    y: hitObject.y * scalingFactor\n                };\n                if(hitObject.is_slider){\n                    var slider = new this.TpSlider(hitObject);\n                    var sliderFollowCircleRadius = hitObject.size * 3;\n                    var segmentLength = slider.sliderTime;\n                    var segmentEndTime = segmentLength + hitObject.startTime;\n                    var cursorPos = {\n                        x: hitObject.x,\n                        y: hitObject.y\n                    };\n                    for (var time = hitObject.startTime + this.LAZY_SLIDER_STEP_LENGTH; time < segmentEndTime; time += this.LAZY_SLIDER_STEP_LENGTH) {\n                        var sliderPos = slider.getPosAtTime(time);\n                        var difference = {x: sliderPos.x, y: sliderPos.y};\n                        difference.x -= cursorPos.x;\n                        difference.y -= cursorPos.y;\n                        var distance = Math.sqrt(difference.x * difference.x + difference.y * difference.y);\n                        if (distance > sliderFollowCircleRadius) {\n                            difference.x /= distance;\n                            difference.y /= distance;\n                            distance -= sliderFollowCircleRadius;\n                            cursorPos.x +=difference.x * distance;\n                            cursorPos.y +=difference.y * distance;\n                            this.lazySliderLengthFirst += distance;\n                        }\n                    }\n                    this.lazySliderLengthFirst *= scalingFactor;\n                    if (hitObject.repeatCount % 2 == 1) {\n                        this.normalizedEndPosition = {\n                            x: cursorPos.x * scalingFactor,\n                            y: cursorPos.y * scalingFactor\n                        }\n                    }\n                    if(hitObject.repeatCount > 1){\n                        segmentEndTime += segmentLength;\n                        for (var time = segmentEndTime - segmentLength + this.LAZY_SLIDER_STEP_LENGTH; time < segmentEndTime; time += this.LAZY_SLIDER_STEP_LENGTH) {\n                            var sliderPos = slider.getPosAtTime(time);\n                            var difference = {x: sliderPos.x, y: sliderPos.y};\n                            difference.x -= cursorPos.x;\n                            difference.y -= cursorPos.y;\n                            var distance = Math.sqrt(difference.x * difference.x + difference.y * difference.y);\n                            if (distance > sliderFollowCircleRadius) {\n                                difference.x /= distance;\n                                difference.y /= distance;\n                                distance -= sliderFollowCircleRadius;\n                                cursorPos.x +=difference.x * distance;\n                                cursorPos.y +=difference.y * distance;\n                                this.lazySliderLengthFirst += distance;\n                            }\n                        }\n                        this.lazySliderLengthSubsequent *= scalingFactor;\n                        if (hitObject.repeatCount % 2 == 0){\n                            this.normalizedEndPosition = {\n                                x: cursorPos.x * scalingFactor,\n                                y: cursorPos.y * scalingFactor\n                            }\n                        }\n\n                    }\n\n                }\n                else{\n                    this.normalizedEndPosition ={\n                        x: this.normalizedStartPosition.x,\n                        y: this.normalizedStartPosition.y\n                    };\n                }\n\n            }\n            getStrain(type){\n                return this.strains[type];\n            }\n\n            calculateStrains(previousHitObject){\n                this.calculateSpecificStrain(previousHitObject, osu.beatmaps.DifficultyCalculator.DifficultyType.SPEED);\n                this.calculateSpecificStrain(previousHitObject, osu.beatmaps.DifficultyCalculator.DifficultyType.AIM);\n            }\n\n            spacingWeight(distance, type) {\n            switch (type) {\n            case osu.beatmaps.DifficultyCalculator.DifficultyType.SPEED:\n                var weight;\n                if (distance > this.SINGLE_SPACING_TRESHOLD)\n                    weight = 2.5;\n                else if (distance > this.STREAM_SPACING_TRESHOLD)\n                    weight = 1.6 + 0.9 * (distance - this.STREAM_SPACING_TRESHOLD) / (this.SINGLE_SPACING_TRESHOLD - this.STREAM_SPACING_TRESHOLD);\n                else if (distance > this.ALMOST_DIAMETER)\n                    weight = 1.2 + 0.4 * (distance - this.ALMOST_DIAMETER) / (this.STREAM_SPACING_TRESHOLD - this.ALMOST_DIAMETER);\n                else if (distance > this.ALMOST_DIAMETER / 2)\n                    weight = 0.95 + 0.25 * (distance - (this.ALMOST_DIAMETER / 2)) / (this.ALMOST_DIAMETER / 2);\n                else\n                    weight = 0.95;\n                return weight;\n            case osu.beatmaps.DifficultyCalculator.DifficultyType.AIM:\n                return Math.pow(distance, 0.99);\n            default:\n                // Should never happen.\n                return 0;\n            }\n        }\n\n            calculateSpecificStrain(previousHitObject,type) {\n                var addition = 0;\n                var timeElapsed = this.hitObject.startTime - previousHitObject.hitObject.startTime;\n                var decay = Math.pow(this.DECAY_BASE[type], timeElapsed / 1000);\n\n                if (this.hitObject.is_spinner) {\n                    // Do nothing for spinners\n                } else if (this.hitObject.is_slider) {\n                    switch (type) {\n                        case osu.beatmaps.DifficultyCalculator.DifficultyType.SPEED:\n                            addition = this.spacingWeight(previousHitObject.lazySliderLengthFirst +\n                                    previousHitObject.lazySliderLengthSubsequent * (Math.max(previousHitObject.hitObject.repeatCount||0, 1) - 1) +\n                                    this.distanceTo(previousHitObject), type) * this.SPACING_WEIGHT_SCALING[type];\n                            break;\n\n                        case osu.beatmaps.DifficultyCalculator.DifficultyType.AIM:\n                            var spaceWeight1 = this.spacingWeight(previousHitObject.lazySliderLengthFirst, type);\n                            var spaceWeight2 = this.spacingWeight(previousHitObject.lazySliderLengthSubsequent, type);\n\n                            addition = (spaceWeight1 + spaceWeight2 * (Math.max(previousHitObject.hitObject.repeatCount||0, 1) - 1) +\n                                this.spacingWeight(this.distanceTo(previousHitObject), type)) * this.SPACING_WEIGHT_SCALING[type];\n                            break;\n                    }\n                } else if (this.hitObject.is_circle) {\n                    addition = this.spacingWeight(this.distanceTo(previousHitObject), type) * this.SPACING_WEIGHT_SCALING[type];\n                }\n\n                addition /= Math.max(timeElapsed, 50);\n\n                this.strains[type] = previousHitObject.strains[type] * decay + addition;\n\n            }\n\n            distanceTo(prevHitObject){\n                var x= this.normalizedStartPosition.x - prevHitObject.normalizedEndPosition.x;\n                var y= this.normalizedStartPosition.y - prevHitObject.normalizedEndPosition.y;\n\n                return Math.sqrt(x * x + y * y)\n            }\n\n        };\n\n        this.beatmap = parsedBeatmapData;\n\n        this.STAR_SCALING_FACTOR = 0.0675;\n        this.EXTREME_SCALING_FACTOR = 0.5;\n        this.STRAIN_STEP = 400;\n        this.DECAY_WEIGHT = 0.9;\n        this.tpHitObjects = [];\n        this.starRating = -1;\n        this.difficulties = [-1,-1];\n        this.stars = [-1,-1];\n    }\n\n    calculate(){\n        var circleSize = (osu.helpers.constants.OSU_GAME_WIDTH / 16) * (1 -.7 * (this.beatmap.difficulty.CircleSize - 5)/5);\n\n        for(var i = 0; i< this.beatmap.hit_objects.length; i++){\n            var hitObject = new osu.objects.HitObject(this.beatmap.hit_objects[i], circleSize, this.beatmap.difficulty.ApproachRate);\n            this.tpHitObjects.push(new this.TpHitObject(hitObject))\n        }\n        if (!this.calculateStrainValues()) {\n            console.log(\"Could not compute strain values. Aborting difficulty calculation.\");\n            return 0;\n        }\n        this.difficulties[osu.beatmaps.DifficultyCalculator.DifficultyType.SPEED] = this.calculateDifficulty(osu.beatmaps.DifficultyCalculator.DifficultyType.SPEED);\n        this.difficulties[osu.beatmaps.DifficultyCalculator.DifficultyType.AIM] = this.calculateDifficulty(osu.beatmaps.DifficultyCalculator.DifficultyType.AIM);\n\n        this.stars[osu.beatmaps.DifficultyCalculator.DifficultyType.SPEED] = Math.sqrt(this.difficulties[osu.beatmaps.DifficultyCalculator.DifficultyType.SPEED]) * this.STAR_SCALING_FACTOR;\n        this.stars[osu.beatmaps.DifficultyCalculator.DifficultyType.AIM] = Math.sqrt(this.difficulties[osu.beatmaps.DifficultyCalculator.DifficultyType.AIM  ]) * this.STAR_SCALING_FACTOR;\n        this.starRating = this.stars[osu.beatmaps.DifficultyCalculator.DifficultyType.SPEED] + this.stars[osu.beatmaps.DifficultyCalculator.DifficultyType.AIM] +\n            Math.abs(this.stars[osu.beatmaps.DifficultyCalculator.DifficultyType.SPEED] - this.stars[osu.beatmaps.DifficultyCalculator.DifficultyType.AIM]) * this.EXTREME_SCALING_FACTOR;\n\n        return this.starRating.toFixed(2);\n    }\n\n    calculateStrainValues() {\n        if (this.tpHitObjects.length == 0) {\n            console.log(\"Can not compute difficulty of empty beatmap.\");\n            return false;\n        }\n\n        var currentHitObject = this.tpHitObjects[0];\n        var  nextHitObject;\n        var index = 0;\n\n        while (++index < this.tpHitObjects.length) {\n            nextHitObject = this.tpHitObjects[index];\n            nextHitObject.calculateStrains(currentHitObject);\n            currentHitObject = nextHitObject;\n        }\n\n        return true;\n    }\n\n    calculateDifficulty(type) {\n\t\tvar highestStrains = [];\n\t\tvar intervalEndTime = this.STRAIN_STEP;\n\t\tvar maximumStrain = 0;\n\n\t\tvar previousHitObject = null;\n\t\tfor (var i = 0; i < this.tpHitObjects.length; i++) {\n\t\t\tvar hitObject = this.tpHitObjects[i];\n\n\t\t\twhile (hitObject.hitObject.startTime > intervalEndTime) {\n\t\t\t\thighestStrains.push(maximumStrain);\n\n\t\t\t\tif (previousHitObject == null)\n\t\t\t\t\tmaximumStrain = 0;\n\t\t\t\telse {\n\t\t\t\t\tvar decay = Math.pow(previousHitObject.DECAY_BASE[type], (intervalEndTime - previousHitObject.hitObject.startTime) / 1000);\n\t\t\t\t\tmaximumStrain = previousHitObject.getStrain(type) * decay;\n\t\t\t\t}\n\n\n\t\t\t\tintervalEndTime += this.STRAIN_STEP;\n\t\t\t}\n\n\t\t\t// Obtain maximum strain\n\t\t\tif (hitObject.getStrain(type) > maximumStrain)\n\t\t\t\tmaximumStrain = hitObject.getStrain(type);\n\n\t\t\tpreviousHitObject = hitObject;\n\t\t}\n\n\t\tvar difficulty = 0;\n\t\tvar weight = 1;\n        var sortNum = function (a,b) {\n            return b-a;\n        };\n        highestStrains.sort(sortNum);\n\n        for(var i = 0 ; i < highestStrains.length; i++){\n            var strain = highestStrains[i];\n            difficulty += weight * strain;\n            weight *= this.DECAY_WEIGHT;\n        }\n\n\t\treturn difficulty;\n\t}\n\n\n\n};\r\n/**\n * calculate_replay.js\n * Created by Ugrend on 21/07/2016.\n */\n\n\n\nvar osu  = osu || {};\n\nosu.calculateReplay = function (hitobjects, replayframes, unscaledCircleSize) {\n    //Pre calculate replay hits on hitobjects\n    //returns an array of when keys were pressed at what time and if it was a hit\n    var isIn = function(objectPos,curPos, radius){\n        //check if vector is in circle/slider\n        var distance = Math.hypot(objectPos.x - (curPos.orig_x || curPos.x), objectPos.y - (curPos.orig_y || curPos.y))\n        var result = distance <= radius;\n        return result;\n    };\n\n\n    var replayOffset = (replayframes[2].orig_t || replayframes[2].t) *-1;\n    if(replayOffset < 0) replayOffset =1;\n    var lastFrame = 2;\n\n    var keyPresses = [];\n    var K1M1Down = false;\n    var K2M2Down = false;\n    var keyDown = false;\n    var radius = (unscaledCircleSize /2);\n    var M1 = false;\n    var M2 = false;\n    var K1 = false;\n    var K2 = false;\n    var SMOKE = false;\n\n\n\n    for(var i = 0; i < hitobjects.length; i++){\n        var hitObject = hitobjects[i];\n\n        var hitTime = hitObject.startTime;\n        var IS_HIT = false;\n        var sliderPoints = hitObject.object.ticks || [];\n        var repeatCount = hitObject.repeatCount || 0;\n        var currentRepeat = 0;\n\n        if(hitObject.is_slider){\n            var startPoint = {\n                x: hitObject.x,\n                y: hitObject.y,\n                hitCount: 1,\n                timesHit:0\n            };\n            var endPoint = hitObject.object.curves.points[hitObject.object.curves.points.length-1];\n            endPoint.hitCount = 1;\n            endPoint.timesHit = 0;\n\n            if(repeatCount === 0){\n                for(var z = 0; z< sliderPoints.length;z++){\n                    sliderPoints[z].hitCount = 1;\n                    sliderPoints[z].timesHit = 0;\n                }\n\n                sliderPoints.push(startPoint);\n                sliderPoints.push(endPoint);\n            }else{\n                //Need to work out if a object should be 'hit' twice or more for repeats\n\n            }\n\n\n\n\n        }\n\n        //TODO: some maps (mostly or all troll) can have sliders and circles at the same time\n        // so may need to take that into account later\n        var REPLAYHIT = false;\n        for(true; lastFrame < replayframes.length; lastFrame++){\n            var replayFrame = replayframes[lastFrame];\n            if(typeof replayFrame != \"object\") break; //Last frame seems to be a string\n            var difference = hitTime - ((replayFrame.orig_t || replayFrame.t)  -replayOffset);\n\n            if(hitObject.is_circle && difference < hitObject.hitOffset.HIT_50*-1){\n                break;\n            }else if(difference < ((hitObject.endTime - hitObject.startTime)*-1)){\n                break;\n\n            }\n\n            var isClick = false; // if this is a hold or click (if button is down)\n            M1 = false;\n            M2 = false;\n            K1 = false;\n            K2 = false;\n            SMOKE = false;\n\n\n            for(var j = 0 ; j < replayFrame.keys.length ; j++){\n                var key = replayFrame.keys[j];\n                if(key == osu.keypress.KEYS.M1 || key == osu.keypress.KEYS.K1){\n                    if(K1M1Down == false){\n                        isClick = true;\n                        K1M1Down = true;\n                        keyDown = true;\n                    }\n\n                    M1 = (key == osu.keypress.KEYS.M1);\n                    K1 = (key == osu.keypress.KEYS.K1);\n                }\n\n                if(key == osu.keypress.KEYS.M2 || key == osu.keypress.KEYS.K2){\n                    if(K2M2Down == false){\n                        isClick = true;\n                        K2M2Down = true;\n                        keyDown = true;\n                    }\n\n                    M2 = (key == osu.keypress.KEYS.M2);\n                    K2 = (key == osu.keypress.KEYS.K2);\n                }\n                if(key == osu.keypress.KEYS.SMOKE ){\n                    SMOKE = true;\n                }\n            }\n\n\n            if(!M1 && !K1){\n                K1M1Down = false;\n            }\n            if(!M2 && !K2){\n                K2M2Down = false;\n            }\n            if(!K1M1Down && !K2M2Down){\n                keyDown = false;\n            }\n\n            difference = Math.abs(difference);\n            var circleHit = false;\n            if(!hitObject.is_spinner && isClick && !IS_HIT && isIn(hitObject,replayFrame,radius)){\n                if(difference <= hitObject.hitOffset.HIT_300){\n                    //Hit is a 300\n                    hitObject.hitType = 'HIT_300';\n                    hitObject.hitTime = (replayFrame.orig_t || replayFrame.t) - replayOffset;\n                    IS_HIT = true;\n                    REPLAYHIT = true;\n                    circleHit = true;\n                }else if (difference <= hitObject.hitOffset.HIT_100){\n                    //Hit is a 100\n                    hitObject.hitType = 'HIT_100';\n                    hitObject.hitTime = (replayFrame.orig_t || replayFrame.t) - replayOffset;\n                    IS_HIT = true;\n                    REPLAYHIT = true;\n                    circleHit = true;\n                }else if (difference  <= hitObject.hitOffset.HIT_50){\n                    //Hit is a 50\n                    hitObject.hitType = 'HIT_50';\n                    hitObject.hitTime = (replayFrame.orig_t || replayFrame.t) - replayOffset;\n                    IS_HIT = true;\n                    REPLAYHIT = true;\n                    circleHit = true;\n                }else if (difference  <= hitObject.hitOffset.HIT_MISS){\n                    //Hit to early and is a miss\n                    hitObject.hitType = 'HIT_MISS';\n                    hitObject.hitTime = (replayFrame.orig_t || replayFrame.t) - replayOffset;\n                    IS_HIT = true;\n                    REPLAYHIT = true;\n                    circleHit = true;\n                }\n            }\n\n            keyPresses.push({\n                M1: M1,\n                M2: M2,\n                K1: K1,\n                K2: K2,\n                SMOKE: SMOKE,\n                REPLAYHIT: circleHit,\n                ID: i,\n                t: (replayFrame.orig_t || replayFrame.t) -replayOffset\n            });\n            \n            if(REPLAYHIT && hitObject.is_circle){\n                replayFrame++;\n                break;\n            }\n            //TODO: its possible to still get points after missing intial circle\n            if(REPLAYHIT && hitObject.is_slider){\n                if(hitObject.object.scoreBreak){\n                    replayFrame++;\n                    break;\n                }\n                var duration = hitObject.duration / hitObject.repeatCount+1; //how long it takes to go 1 way\n                var t = difference - (currentRepeat*duration);\n\n                if(t <= duration) {\n                    var sliderPos;\n                    if (currentRepeat == 0 || currentRepeat % 2 == 0) {\n                        sliderPos = hitObject.object.curves.get_point(t/duration); //where we should be at this point in time;\n                    }else{\n                        sliderPos = hitObject.object.curves.get_point(1-(t/duration)); //where we should be at this point in time;\n                    }\n                    //TODO: this will need to be reworked alot, just getting the idea going\n                    for(var z = 0; z < sliderPoints.length; z++){\n                        if(isIn(sliderPos,sliderPoints[z],radius*3)){\n                            //TODO: need to not hit the same point multiple times\n                            sliderPoints[z].timesHit++\n                        }\n                    }\n\n                    if(isIn(sliderPos,replayFrame,radius *3)){\n                        hitObject.object.scoreBreak = false;\n                    }else{\n                        var sliderBreak = false;\n                        for(z = 0; z < sliderPoints.length; z++){\n                            if(sliderPoints[z].timesHit < sliderPoints[z].hitCount){\n                                sliderBreak = replayFrame.t -replayOffset;\n                            }\n                        }\n                        hitObject.object.scoreBreak = sliderBreak;\n                    }\n\n                }else{\n                    if(repeatCount > 0){\n                        currentRepeat++;\n                        repeatCount--;\n                        replayFrame--; //rerun this frame\n                        break;\n                    }else{\n                        replayFrame++;\n                        break;\n                    }\n                }\n\n            }\n\n            if(hitObject.is_spinner){\n                var centerPoint = {x:osu.helpers.constants.OSU_GAME_WIDTH/2,\n                    y:osu.helpers.constants.OSU_GAME_HEIGHT/2};\n                var angle = Math.atan2(centerPoint.y - (replayFrame.orig_y || replayFrame.y), centerPoint.x - (replayFrame.orig_x || replayFrame.x));\n                if(keyDown){\n                    hitObject.object.rotations.push({\n                        a: angle,\n                        t: (replayFrame.orig_t || replayFrame.t)\n                    });\n                }\n            }\n\n        }\n    }\n\n    return keyPresses;\n\n\n};\n\r\n/**\n * gametypes.js\n * Created by Ugrend on 3/06/2016.\n */\n\nosu = osu || {};\n\nosu.GAMETYPES = {\n    NORMAL: 0,\n    TAIKO: 1,\n    CTB: 2,\n    MANIA: 3\n};\r\n/**\n * constants.js\n * Created by Ugrend on 6/07/2016.\n */\n\nosu = osu || {};\nosu.helpers = osu.helpers || {};\nosu.helpers.constants = Object.freeze({\n    OSU_GAME_HEIGHT: 384,\n    OSU_GAME_WIDTH: 512,\n    DOUBLE_TIME_MULTI: 1.5,\n    HALF_TIME_MULTI: 0.75,\n    SLIDER_STEP_DISTANCE: 5,\n    TIMER_SONG_COLOUR: 0xB4B4B2,\n    TIMER_INTRO_COLOUR: 0x82FA58,\n    HR_DIFFICULTY_MULTI: 1.4,\n    EZ_DIFFICULTY_MULTI: 0.5,\n});\r\n/**\n *\n *\n * Created by Ugrend on 3/07/2016.\n */\n\nosu = osu || {};\nosu.helpers = osu.helpers || {};\nosu.helpers.math = {\n\n    distance: function (x1,y1,x2,y2) {\n        var v1 = Math.abs(x1 - x2);\n        var v2 = Math.abs(y1 - y2);\n        return Math.sqrt((v1 * v1) + (v2 * v2));\n    },\n\n    /*\n        Get angle between two vectors;\n     */\n    vectorDistance: function (v1,v2) {\n        return osu.helpers.math.distance(v1.x,v1.y,v2.x,v2.y);\n    },\n\n    angleVector: function (p1,p2) {\n\n        var xDiff = p2.x - p1.x;\n        var yDiff = p2.y - p1.y;\n        return Math.atan2(yDiff, xDiff);\n    }\n\n};\n\n\n\r\n/**\n * keypress.js\n * Created by Ugrend on 5/06/2016.\n */\n\nvar osu  = osu || {};\n\n/*\n\n Part\tData Type\tDescription\n w\tLong\tTime in milliseconds since the previous action\n x\tFloat\tx-coordinate of the cursor from 0 - 512\n y\tFloat\ty-coordinate of the cursor from 0 - 384\n z\tInteger\tBitwise combination of keys/mouse buttons pressed (M1 = 1, M2 = 2, K1 = 5, K2 = 10)\n\n\n */\nosu.keypress = Object.freeze({\n\n    KEYS: {\n        NONE : 0,\n        M1: 1,\n        M2: 2,\n        K1: 4,\n        K2: 8,\n        SMOKE: 16\n    },\n\n    //TODO: make this code less yuck\n    get_keys: function(keys_int){\n        var keys = [];\n        if (keys_int == 0) {\n            keys.push(this.KEYS.NONE);\n            return keys;\n        }\n        //seems k1/m1 etc are 'both' hit when k1/k2 are pressed so we need to ingore m1/m2 in that event\n        for (var k in this.KEYS) {\n            var bit = keys_int & this.KEYS[k];\n            if (bit == this.KEYS[k] && bit != 0) {\n                keys.push(this.KEYS[k]);\n            }\n        }\n\n\n        //remove M1/M2 if K1/K2 are present\n        if(keys.indexOf(this.KEYS.M1) > -1 && keys.indexOf(this.KEYS.K1) > -1){\n                keys.splice(keys.indexOf(this.KEYS.M1),1);\n        }\n        if(keys.indexOf(this.KEYS.M2) > -1 && keys.indexOf(this.KEYS.K2) > -1){\n            keys.splice(keys.indexOf(this.KEYS.M2),1);\n        }\n\n\n        return keys;\n    }\n\n});\n\n\r\n/**\n * mods.js\n * Created by Ugrend on 2/06/2016.\n */\n//https://osu.ppy.sh/wiki/Game_Modifiers\n//https://github.com/ppy/osu-api/wiki#mods\nvar osu  = osu || {};\n\n\nosu.mods = Object.freeze({\n\n    //anything higher than 4096 i don't really care about i don't think except maybe perfect?\n    __mods: {\n\n        NONE: {value: 0, multi: 1.0, code: \"\", name: \"No Mod\", icon: \"\"},\n        NO_FAIL: {value: 1, multi: 0.5, code: \"NF\", name: \"No Fail\", icon: \"selection_mod_nofail\"},\n        EASY: {value: 2, multi: 0.5, code: \"EZ\", name: \"Easy\", icon: \"selection_mod_easy\"},\n        NO_VIDEO: {value: 4, multi: 1.0, code: \"\", name: \"No Video\", icon: \"\"},\n        HIDDEN: {value: 8, multi: 1.06, code: \"HD\", name: \"Hidden\", icon: \"selection_mod_hidden\"},\n        HARD_ROCK: {value: 16, multi: 1.06, code: \"HR\", name: \"Hard Rock\", icon: \"selection_mod_hardrock\"},\n        SUDDEN_DEATH: {value: 32, multi: 1.0, code: \"SD\", name: \"Sudden Death\", icon: \"selection_mod_suddendeath\"},\n        DOUBLE_TIME: {value: 64, multi: 1.12, code: \"DT\", name: \"Double Time\", icon: \"selection_mod_doubletime\"},\n        RELAX: {value: 128, multi: 0, code: \"\", name: \"\", icon: \"\"},\n        HALF_TIME: {value: 256, multi: 0.3, code: \"HT\", name: \"Half Time\", icon: \"selection_mod_halftime\"},\n        NIGHT_CORE: {value: 512, multi: 1.12, code: \"NT\", name: \"Night Core\", icon: \"selection_mod_nightcore\"},\n        FLASH_LIGHT: {value: 1024, multi: 1.12, code: \"FL\", name: \"Flash Light\", icon: \"selection_mod_flashlight\"},\n        AUTO_PLAY: {value: 2048, multi: 0, code: \"\", name: \"Auto Play\", icon: \"\"},\n        SPUN_OUT: {value: 4096, multi: 0.9, code: \"SO\", name: \"Spun Out\", icon: \"selection_mod_spunout\"},\n        RELAX_2: {value: 8192, multi: 0, code: \"AP\", name: \"Auto Pilot\", icon:\"\"},\n        PERFECT: {value: 16384, multi: 1, code: \"PF\", name: \"Perfect\", icon:\"selection_mod_perfect\"}\n    },\n    /**\n     * gets used mods based on replay mod int value\n     * @param mod_bit_int {Number} value of replay mod output\n     * @returns {Array} of mods\n     */\n    getMods: function(mod_bit_int){\n        var mods = [];\n        if (mod_bit_int == 0) {\n            mods.push(this.__mods.NONE);\n            return mods;\n        }\n        for (var k in this.__mods) {\n            var bit = mod_bit_int & this.__mods[k].value;\n            if (bit == this.__mods[k].value) {\n                mods.push(this.__mods[k]);\n            }\n        }\n        return mods;\n    },\n    /**\n     * Gets mod based on value\n     * @param mod_int {Number} value of desired mod\n     * @returns {object} Mod object or Empty object if nothing found\n     */\n    getModFromVal: function(mod_int){\n        for (var k in this.__mods) {\n            if (this.__mods[k].value == mod_int) {\n                return this.__mods[k];\n            }\n        }\n        return {}\n    }\n});\n\n\r\n/**\n * circle.js\n * Created by Ugrend on 11/06/2016.\n */\n\n\nosu = osu || {};\nosu.objects = osu.objects || {};\nosu.objects.Circle = class Circle{\n    constructor(hitObject){\n        this.hitObject = hitObject;\n        this.last_draw_time = 0;\n        this.drawn = false;\n        this.destroyed = false;\n        this.hidden_time = this.hitObject.approachRate / 3.3;\n        this.beenHit = false;\n        this.isScoreAble = true; //just prevents the point animation from appearing\n        this.radius = 0;\n        this.missArray = [];\n\n        this.hit_numbers = {\n            num_0: osu.skins.resources.default_0.texture,\n            num_1: osu.skins.resources.default_1.texture,\n            num_2: osu.skins.resources.default_2.texture,\n            num_3: osu.skins.resources.default_3.texture,\n            num_4: osu.skins.resources.default_4.texture,\n            num_5: osu.skins.resources.default_5.texture,\n            num_6: osu.skins.resources.default_6.texture,\n            num_7: osu.skins.resources.default_7.texture,\n            num_8: osu.skins.resources.default_8.texture,\n            num_9: osu.skins.resources.default_9.texture\n        };\n\n    }\n\n    reset(){\n        //Reset the object so that it can be used again\n        this.last_draw_time = 0;\n        this.drawn = false;\n        this.destroyed = false;\n        this.beenHit = false;\n        this.isScoreAble = true;\n    }\n\n\n\n    init(){\n        this.radius = this.hitObject.size/2;\n        this.circleContainer = new PIXI.Container();\n        this.endCircleSprite =  new PIXI.Sprite(osu.skins.resources.hitcircle.texture);\n        this.endCircleSprite.tint = this.hitObject.colour;\n        this.endCircleSprite.anchor.set(0.5);\n        this.endCircleSprite.height = this.hitObject.size;\n        this.endCircleSprite.width = this.hitObject.size;\n        this.radius = this.hitObject.size /2;\n\n        if(!this.hitObject.game.is_hidden) {\n            this.approchCircleSprite = new PIXI.Sprite(osu.skins.resources.approachcircle.texture);\n            this.approchCircleSprite.tint = this.hitObject.colour;\n            this.approchCircleSprite.anchor.set(0.5);\n            this.approchCircleSprite.width = this.hitObject.size * 2.5;\n            this.approchCircleSprite.height = this.hitObject.size * 2.5;\n            this.circleContainer.addChild(this.approchCircleSprite);\n        }\n\n\n        this.circleOverlaySprite =  new PIXI.Sprite(osu.skins.resources.hitcicleoverlay.texture);\n        this.circleOverlaySprite.height = this.hitObject.size;\n        this.circleOverlaySprite.width = this.hitObject.size;\n        this.circleOverlaySprite.anchor.set(0.5);\n        this.circleContainer.addChild(this.endCircleSprite);\n        this.circleContainer.addChild(this.circleOverlaySprite);\n\n        var comboString = this.hitObject.combo.toString();\n        this.comboNumSprites = [];\n        for(var i = 0; i< comboString.length ; i++){\n            this.comboNumSprites.push(new PIXI.Sprite(this.hit_numbers[\"num_\"+comboString.charAt(i)]));\n        }\n\n        if(this.comboNumSprites.length > 1){\n            this.comboSprite1 = this.comboNumSprites[0];\n            this.comboSprite2 = this.comboNumSprites[1];\n            this.comboSprite1.x -= this.hitObject.size/10;\n            this.comboSprite2.x += this.hitObject.size/10;\n            this.comboSprite1.anchor.set(0.5);\n            this.comboSprite2.anchor.set(0.5);\n            this.circleContainer.addChild(this.comboSprite1);\n            this.circleContainer.addChild(this.comboSprite2);\n        }else{\n            this.comboSprite1 = this.comboNumSprites[0];\n            this.comboSprite1.anchor.set(0.5);\n            this.circleContainer.addChild(this.comboSprite1);\n        }\n        this.circleContainer.x = this.hitObject.x;\n        this.circleContainer.y =  this.hitObject.y;\n\n\n        this.hitSounds = osu.audio.HitSound.getHitSounds(this.hitObject.hitSounds,this.hitObject.timing)\n    }\n\n    updatePositions(){\n        this.circleContainer.x =  this.hitObject.x;\n        this.circleContainer.y =  this.hitObject.y;\n    }\n\n\n    draw(cur_time){\n        if(cur_time >= (this.hitObject.hitTime)){\n            this.hit(cur_time);\n        }\n        if(this.destroyed) {\n            if (!this.beenHit && cur_time > this.hitObject.startTime + this.hitObject.hitOffset.HIT_50) {\n                //never been hit\n                if (this.isScoreAble) this.hitObject.ScorePoint.displayMiss();\n                this.beenHit = true;\n            }\n            //object is no longer rendered but point sprite will be destroyed once this object is finished\n            return (cur_time < this.hitObject.startTime + 1000);\n        }\n\n        if(this.drawn && this.hitObject.game.is_hidden && cur_time > this.hitObject.startTime - this.hidden_time){\n            this.destroy();\n            this.destroyed = true;\n        }\n\n        if(!this.destroyed && cur_time > this.hitObject.startTime + 110 ){\n            this.destroy();\n            this.destroyed = true;\n        }\n\n        if(!this.destroyed && cur_time < this.hitObject.startTime + this.hitObject.approachRate){\n            if(!this.hitObject.game.is_hidden){\n                //dont need to calculate this so often\n                if(Date.now() - this.last_draw_time > 35) {\n                    var time_diff = this.hitObject.startTime - cur_time;\n                    var scale = 1 + (time_diff / this.hitObject.approachRate) * 2.5;\n                    if (scale < 1) scale = 1;\n                    this.approchCircleSprite.width = this.hitObject.size * scale;\n                    this.approchCircleSprite.height = this.hitObject.size * scale;\n                    this.last_draw_time = Date.now();\n                }\n            }\n            if(!this.drawn){\n                this.hitObject.game.hit_object_container.addChildAt(this.circleContainer,0);\n                this.drawn = true;\n            }\n        }\n        return true;\n    }\n\n    isInCircle(pos){\n\n        var hitCirclePos = {\n            x: this.hitObject.x,\n            y: this.hitObject.y\n        };\n        var distance = osu.helpers.math.vectorDistance(hitCirclePos,pos);\n        var result = distance <= this.radius;\n        if(!result && DEBUG) this.missArray.push(\"DISTANCE: \" + distance + \"RADIUS: \" +this.radius + \"DIFFERENCE: \" + (distance-this.radius) + \"STARTIME: \"+this.hitObject.startTime\n            + \" X: \" + hitCirclePos.x + \" Y: \" + hitCirclePos.y);\n        return result\n    }\n\n    playHitSound(){\n        for(var i = 0 ; i < this.hitSounds.length ; i++){\n            osu.audio.sound.play_sound(this.hitSounds[i], this.hitObject.timing.volume/100);\n        }\n    }\n\n    hit(time, pos){\n\n        if(this.beenHit) {\n            return;\n        }\n\n        switch(this.hitObject.hitType){\n            case 'HIT_MISS':\n                if(this.isScoreAble) this.hitObject.ScorePoint.displayMiss();\n                this.beenHit = true;\n                break;\n            case 'HIT_50':\n                if (this.isScoreAble) this.hitObject.ScorePoint.display50();\n                this.playHitSound();\n                this.beenHit = true;\n                break;\n            case 'HIT_100':\n                if (this.isScoreAble) this.hitObject.ScorePoint.display100();\n                this.playHitSound();\n                this.beenHit = true;\n                break;\n            case 'HIT_300':\n                if (this.isScoreAble) this.hitObject.ScorePoint.display300();\n                this.playHitSound();\n                this.beenHit = true;\n                break;\n        }\n\n\n\n/*\n        var difference = this.hitObject.startTime - time;\n        if(this.isInCircle(this.hitObject.game.getCursorPos())) {\n            if (difference > this.hitObject.hitOffset.HIT_MISS) {\n                return;\n            }\n            if (difference < this.hitObject.hitOffset.HIT_MISS && difference > this.hitObject.hitOffset.HIT_50) {\n                //miss\n                if (this.isScoreAble) this.hitObject.ScorePoint.displayMiss();\n                this.beenHit = true;\n            }\n            if (difference < this.hitObject.hitOffset.HIT_50 && difference > this.hitObject.hitOffset.HIT_100) {\n                //hit50\n                if (this.isScoreAble) this.hitObject.ScorePoint.display50();\n                this.playHitSound();\n                this.beenHit = true;\n            }\n            if (difference < this.hitObject.hitOffset.HIT_100 && difference > this.hitObject.hitOffset.HIT_300) {\n                //hit100\n                if (this.isScoreAble) this.hitObject.ScorePoint.display100();\n                this.playHitSound();\n                this.beenHit = true;\n            }\n            if (difference < this.hitObject.hitOffset.HIT_300 && time <= this.hitObject.startTime) {\n                //hit300\n                if (this.isScoreAble) this.hitObject.ScorePoint.display300();\n                this.playHitSound();\n                this.beenHit = true;\n\n            }\n        }\n\n        if(this.beenHit){\n          //  this.destroy();\n        }\n        */\n    }\n\n    destroy(){\n        this.hitObject.game.hit_object_container.removeChild(this.circleContainer);\n    }\n\n};\n\r\n/**\n * curves.js\n * Created by Ugrend on 11/07/2016.\n */\n\nosu = osu || {};\nosu.objects = osu.objects || {};\nosu.objects.curves = osu.objects.curves || {};\nosu.objects.curves.TYPES = Object.freeze({\n    BEZIER: \"B\",\n    LINEAR: \"L\",\n    PASSTHROUGH: \"P\",\n    CATMULL: \"C\"\n});\n\nosu.objects.Curve = class Curve {\n\n    constructor(hitObject){\n        this.startPoint ={x: hitObject.x, y: hitObject.y };\n        this.controllPoints = hitObject.points;\n        this.type = hitObject.sliderType;\n        this.points = [];\n        switch(this.type){\n            case osu.objects.curves.TYPES.LINEAR:\n                this.__generate_linear();\n                break;\n            case osu.objects.curves.TYPES.BEZIER:\n                this.__generate_beizer();\n                break;\n            case osu.objects.curves.TYPES.PASSTHROUGH:\n                this.__generate_passthrough();\n                break;\n            default:\n                this.__generate_beizer();\n                console.log(\"Unknown slider type\")\n        }\n\n        for(var i = 0; i < this.points.length-1;i++){\n            var currentPoint = this.points[i];\n            var nextPoint = this.points[i+1];\n            var xDiff = nextPoint.x - currentPoint.x;\n            var yDiff = nextPoint.y - currentPoint.y;\n            var angle = Math.atan2(yDiff, xDiff);\n            this.points[i].angle = angle;\n            if(i+1 == this.points.length-1){\n                this.points[i+1].angle = angle;\n            }\n        }\n\n\n    }\n\n    /*\n     * Gets point at given percentage/time;\n     */\n    get_point(t) {\n        //TODO: could do passthrough/circle curves more accurately\n        var point = Math.round((this.points.length-1) * t);\n        if(point >= this.points.length){\n            return this.points[this.points.length-1]\n        }\n        return this.points[point];\n    }\n\n\n    __generate_linear(){\n        //generate linear with bezier, add the startpoints as a controll point which will cause a straight line\n        this.controllPoints.unshift(this.startPoint);\n        this.__generate_beizer();\n    }\n    /*\n     * Generates a bezier curve slider (also used for linear sliders)\n     *\n     * How the Bezier sliders seem to work is that it will split them into seperate curves\n     * This split is indicated by a duplicate value\n     */\n    __generate_beizer(){\n        var beziers = [];\n        var cP = [];\n        var lastP = false;\n        for(var i = -1; i < this.controllPoints.length; i++){\n            var tPos;\n            if(i==-1) {\n                //The starter point is not in the initial point array so we start manually from it\n                tPos = this.startPoint;\n            }else{\n                tPos = this.controllPoints[i];\n            }\n            //this checks if the last point is same as the next point\n            //if it is the same it indicates the end of controll points for the bezier\n            //If there are less than two in the controllpoints we just drop it completly\n            if(lastP && tPos.x == lastP.x && tPos.y == lastP.y){\n                if(cP.length >1){\n                    beziers.push(new Bezier(cP))\n                }\n                cP.splice(0);\n            }\n            cP.push(tPos);\n            lastP = tPos;\n        }\n        if(cP.length >1){\n            beziers.push(new Bezier(cP));\n        }\n\n        for(i = 0; i< beziers.length; i++){\n            var distance = 0;\n            var compute_value = 0;\n            var startingPoint = beziers[i].compute(0);\n            var p = [startingPoint];\n            while(distance < osu.helpers.constants.SLIDER_STEP_DISTANCE){\n                compute_value += 0.00001;\n                var point = beziers[i].compute(compute_value);\n                distance = osu.helpers.math.distance(startingPoint.x, startingPoint.y, point.x,point.y);\n\n            }\n            var t = compute_value;\n            while(t <= 1){\n                p.push(beziers[i].compute(t));\n                t += compute_value;\n            }\n            if(t>1){\n                p.push(beziers[i].compute(1));\n            }\n            this.points = this.points.concat(p);\n        }\n\n\n    }\n\n    __generate_passthrough(){\n\n        var getPoint = function (angle,radius) {\n            var x = (Math.cos(angle) * radius);\n            var y = (Math.sin(angle) * radius);\n            return {x:x,y:y}\n        };\n        var lerp = function(ang1,ang2,t){\n            return ang1 * (1 - t) + ang2 * t;\n        };\n        var isMidBetween = function (a,b,c) {\n            return (b > a && b < c) || (b < a && b > c);\n        };\n\n        var  circumcircle = function(p1, p2, p3) {\n            var x,y,r;\n            var A = p2.x - p1.x,\n                B = p2.y - p1.y,\n                C = p3.x - p1.x,\n                D = p3.y - p1.y,\n                E = A * (p1.x + p2.x) + B * (p1.y + p2.y),\n                F = C * (p1.x + p3.x) + D * (p1.y + p3.y),\n                G = 2 * (A * (p3.y - p2.y) - B * (p3.x - p2.x)),\n                minx, miny, dx, dy;\n            if(Math.abs(G) < 0.000001) {\n                minx = Math.min(p1.x, p2.x, p3.x);\n                miny = Math.min(p1.y, p2.y, p3.y);\n                dx   = (Math.max(p1.x, p2.x, p3.x) - minx) * 0.5;\n                dy   = (Math.max(p1.y, p2.y, p3.y) - miny) * 0.5;\n                x = minx + dx;\n                y = miny + dy;\n                r = Math.sqrt(dx * dx + dy * dy);\n            }\n            else {\n                x = (D*E - B*F) / G;\n                y = (A*F - C*E) / G;\n                dx = x - p1.x;\n                dy = y - p1.y;\n                r = Math.sqrt(dx * dx + dy * dy);\n            }\n            return {x: x, y:y, r: r};\n        };\n\n\n\n        var centerCircle = circumcircle(this.startPoint,\n            this.controllPoints[0],this.controllPoints[1]);\n\n        var xDiff = this.startPoint.x - centerCircle.x;\n        var yDiff = this.startPoint.y - centerCircle.y;\n        var startAngle = Math.atan2(yDiff, xDiff);\n        xDiff = this.controllPoints[0].x - centerCircle.x;\n        yDiff = this.controllPoints[0].y - centerCircle.y;\n        var middleAngle = Math.atan2(yDiff, xDiff);\n        xDiff = this.controllPoints[1].x - centerCircle.x;\n        yDiff = this.controllPoints[1].y - centerCircle.y;\n        var endAngle = Math.atan2(yDiff, xDiff);\n\n\n        //code from opsu https://github.com/itdelatrisu/opsu\n        //https://github.com/itdelatrisu/opsu/blob/master/src/itdelatrisu/opsu/objects/curves/CircumscribedCircle.java#L90\n        var TWO_PI  =  Math.PI * 2;\n        if (!isMidBetween(startAngle, middleAngle, endAngle)) {\n            if (Math.abs(startAngle + TWO_PI - endAngle) < TWO_PI && isMidBetween(startAngle + (TWO_PI), middleAngle, endAngle))\n                startAngle += TWO_PI;\n            else if (Math.abs(startAngle - (endAngle + TWO_PI)) < TWO_PI && isMidBetween(startAngle, middleAngle, endAngle + (TWO_PI)))\n                endAngle += TWO_PI;\n            else if (Math.abs(startAngle - TWO_PI - endAngle) < TWO_PI && isMidBetween(startAngle - (TWO_PI), middleAngle, endAngle))\n                startAngle -= TWO_PI;\n            else if (Math.abs(startAngle - (endAngle - TWO_PI)) < TWO_PI && isMidBetween(startAngle, middleAngle, endAngle - (TWO_PI)))\n                endAngle -= TWO_PI;\n            else\n                console.log('Cannot find angles between midAng '+ startAngle + \" \" + middleAngle +\" \" + endAngle);\n        }\n\n\n\n        var t = 0;\n        while(t<=1){\n            var angle = lerp(startAngle,endAngle,t);\n            var point = getPoint(angle,centerCircle.r);\n            point.x += centerCircle.x;\n            point.y += centerCircle.y;\n            this.points.push(point);\n            t+=0.01;\n        }\n    }\n\n\n\n\n\n\n\n\n};\r\n/**\n * followpoint.js\n * Created by Ugrend on 6/07/2016.\n */\nosu = osu || {};\nosu.objects = osu.objects || {};\nosu.objects.FollowPoint = class FollowPoint{\n    constructor(hitObject1, hitObject2){\n        this.hitObject1 = hitObject1;\n        this.hitObject2 = hitObject2;\n        this.drawn = false;\n        this.destroyed = false;\n    }\n\n    init(){\n        this.x1 = this.hitObject1.endX || this.hitObject1.x;\n        this.y1 = this.hitObject1.endY  || this.hitObject1.y;\n        this.x2 = this.hitObject2.x;\n        this.y2 = this.hitObject2.y;\n\n        this.drawTime = this.hitObject1.endTime  || this.hitObject1.startTime;\n        this.drawTime -= this.hitObject1.approachRate/2;\n        var xDiff = this.x2 - this.x1;\n        var yDiff = this.y2 - this.y1;\n        var angle = Math.atan2(yDiff, xDiff);\n        var distance = osu.helpers.math.distance(this.x1, this.y1, this.x2, this.y2);\n        var numPoints = Math.round(distance / (this.hitObject1.size/1.5));\n        var steps = 1/(numPoints+1);\n        var nextStep = steps;\n        this.followPointContainer = new PIXI.Container();\n        var arrowTexture = osu.skins.resources.followpoint.texture;\n        for(var i = 0 ; i < numPoints; i++){\n            var arrowSprite = new PIXI.Sprite(arrowTexture);\n\n            arrowSprite.rotation = angle;\n            arrowSprite.position.x = this.x1 + (xDiff * nextStep);\n            arrowSprite.position.y = this.y1 + (yDiff * nextStep);\n            this.followPointContainer.addChild(arrowSprite);\n            nextStep += steps;\n        }\n    }\n\n    reset(){\n        this.destroyed = false;\n        this.drawn = false;\n    }\n\n\n    draw(cur_time){\n        if(this.destroyed){\n            return false;\n        }\n\n        if(!this.drawn && cur_time >= this.drawTime){\n            this.hitObject1.game.hit_object_container.addChildAt(this.followPointContainer,0);\n            this.drawn = true;\n            return true;\n        }\n        if(!this.destroyed && cur_time > this.hitObject2.startTime){\n            this.destroy();\n            this.destroyed = true;\n        }\n\n\n        return true;\n    }\n    destroy(){\n        this.hitObject1.game.hit_object_container.removeChild(this.followPointContainer);\n    }\n\n};\n\n\r\n/**\n *\n *\n * Created by Ugrend on 18/07/2016.\n */\nosu = osu || {};\nosu.objects = osu.objects || {};\n\nosu.objects.HitObjectParser = {\n    TYPES: {\n        CIRCLE: 1,\n        SLIDER: 2,\n        NEW_COMBO: 4,\n        SPINNER: 8,\n    },\n\n    HIT_SOUNDS: {\n        SOUND_NORMAL: 0,\n        SOUND_WHISTLE: 2,\n        SOUND_FINISH: 4,\n        SOUND_CLAP: 8,\n    },\n    HIT_ADDITIONS: {\n        NORMAL: 1,\n        SOFT: 2,\n        DRUM: 3,\n    },\n\n\n    parse_type: function (hitObjectInt) {\n        var newCombo = false;\n        if ((hitObjectInt & this.TYPES.NEW_COMBO)) {\n            newCombo = true;\n        }\n        if ((hitObjectInt & osu.objects.HitObjectParser.TYPES.CIRCLE)) {\n            return {type: this.TYPES.CIRCLE, new_combo: newCombo}\n        }\n        if ((hitObjectInt & osu.objects.HitObjectParser.TYPES.SLIDER)) {\n            return {type: this.TYPES.SLIDER, new_combo: newCombo}\n        }\n        if ((hitObjectInt & osu.objects.HitObjectParser.TYPES.SPINNER)) {\n            return {type: this.TYPES.SPINNER, new_combo: newCombo}\n        }\n    },\n    parse_line: function (line, timing, sliderMulti) {\n\n        var get_timing_point = function (offset) {\n            for(var i = timing.length -1 ; i >=0 ; i--){\n                if(timing[i].offset <= offset)  return timing[i];\n            }\n            return timing[0];\n        };\n\n        var parse_additions = function (strAdditions) {\n            if(!strAdditions) return {};\n            var additions = {};\n            var adds = strAdditions.split(\":\");\n            if(adds.length > 0){\n                additions.sample = +adds[0];\n            }\n            if(adds.length > 1){\n                additions.additionalSample = +adds[1];\n            }\n            if(adds.length > 2){\n                additions.customSampleIndex = +adds[2];\n            }\n            if(adds.length > 3){\n                additions.hitSoundVolume = +adds[3];\n            }\n            if(adds.length > 4){\n                additions.hitsound = +adds[4];\n            }\n\n            return additions;\n        };\n\n        var hitObject = {};\n\n        var hitArray = line.split(',');\n\n        var type = this.parse_type(+hitArray[3]);\n\n        hitObject.x = +hitArray[0];\n        hitObject.y = +hitArray[1];\n        hitObject.startTime = +hitArray[2];\n        hitObject.type = type.type;\n        hitObject.newCombo = type.new_combo;\n        hitObject.hitSounds = [];\n        hitObject.timing = get_timing_point(hitObject.startTime);\n        hitObject.is_slider = false;\n        hitObject.is_circle = false;\n        hitObject.is_spinner = false;\n\n        var soundByte = +hitArray[4];\n        if ((soundByte & this.HIT_SOUNDS.SOUND_WHISTLE) == this.HIT_SOUNDS.SOUND_WHISTLE)\n            hitObject.hitSounds.push(this.HIT_SOUNDS.SOUND_WHISTLE);\n        if ((soundByte & this.HIT_SOUNDS.SOUND_FINISH) == this.HIT_SOUNDS.SOUND_FINISH)\n            hitObject.hitSounds.push(this.HIT_SOUNDS.SOUND_FINISH);\n        if ((soundByte & this.HIT_SOUNDS.SOUND_CLAP) == this.HIT_SOUNDS.SOUND_CLAP)\n            hitObject.hitSounds.push(this.HIT_SOUNDS.SOUND_CLAP);\n        if (hitObject.hitSounds.length === 0)\n            hitObject.hitSounds.push(this.HIT_SOUNDS.SOUND_NORMAL);\n\n\n        if (hitObject.type == this.TYPES.CIRCLE) {\n            hitObject.is_circle = true;\n            hitObject.additions = parse_additions(hitArray[5]);\n        }\n        if (hitObject.type == this.TYPES.SPINNER) {\n            hitObject.is_spinner = true;\n            hitObject.endTime = +hitArray[5];\n            hitObject.additions = +hitArray[6];\n        }\n        if (hitObject.type == this.TYPES.SLIDER) {\n            hitObject.is_slider = true;\n            var sliderData = hitArray[5].split(\"|\");\n            hitObject.sliderType = sliderData[0];\n            hitObject.repeatCount = +hitArray[6];\n            hitObject.pixelLength = +hitArray[7];\n            hitObject.additions = parse_additions(hitArray[10]);\n            hitObject.edges =[];\n            var sounds    = [];\n            var additions = [];\n            if (hitArray[8])  sounds = hitArray[8].split('|');\n            if (hitArray[9])  additions = hitArray[9].split('|');\n            for (var x = 0; x < hitObject.repeatCount+1 ; x++) {\n                var edge = {\n                    sounds: [],\n                    additions: parse_additions(additions[x])\n                };\n\n                if (sounds[x]) {\n                    soundByte = sounds[x];\n                    //TODO: function this\n                    if ((soundByte & this.HIT_SOUNDS.SOUND_WHISTLE) == this.HIT_SOUNDS.SOUND_WHISTLE)\n                        edge.sounds.push(this.HIT_SOUNDS.SOUND_WHISTLE);\n                    if ((soundByte & this.HIT_SOUNDS.SOUND_FINISH) == this.HIT_SOUNDS.SOUND_FINISH)\n                        edge.sounds.push(this.HIT_SOUNDS.SOUND_FINISH);\n                    if ((soundByte & this.HIT_SOUNDS.SOUND_CLAP) == this.HIT_SOUNDS.SOUND_CLAP)\n                        edge.sounds.push(this.HIT_SOUNDS.SOUND_CLAP);\n                    if (hitObject.hitSounds.length === 0)\n                        edge.sounds.push(this.HIT_SOUNDS.SOUND_NORMAL);\n                } else {\n                    edge.sounds.push(this.HIT_SOUNDS.SOUND_NORMAL);\n                }\n\n                hitObject.edges.push(edge);\n            }\n\n            hitObject.points = [];\n            for(var i = 1; i < sliderData.length; i++){\n                var points = sliderData[i].split(\":\");\n                hitObject.points.push({x:+points[0], y:+points[1]});\n            }\n\n\n            var beats = (hitObject.pixelLength * hitObject.repeatCount) /(100*sliderMulti)\n            hitObject.duration = Math.ceil(beats * hitObject.timing.millisecondsPerBeat);\n            hitObject.endTime = hitObject.startTime + hitObject.duration;\n\n        }\n\n\n        return hitObject;\n    },\n\n\n    //https://gist.github.com/peppy/1167470\n    create_stacks: function (hitobjects, stackLeniency, circleSize, hardrock) {\n        for (var i = hitobjects.length - 1; i > 0; i--) {\n            var hitObjectI = hitobjects[i];\n            if (hitObjectI.stack != 0 || hitObjectI.type == osu.objects.HitObjectParser.TYPES.SPINNER) continue;\n\n            if (hitObjectI.type == osu.objects.HitObjectParser.TYPES.CIRCLE) {\n                for (var n = i - 1; n >= 0; n--) {\n                    var hitObjectN = hitobjects[n];\n                    if (hitObjectN.type == osu.objects.HitObjectParser.TYPES.SPINNER) continue;\n\n                    var timeI = hitObjectI.startTime - (1000 * stackLeniency); //convert to miliseconds\n                    var timeN = hitObjectN.startTime;\n                    if (timeI > timeN) break;\n\n                    var distance = osu.helpers.math.distance(hitObjectI.x, hitObjectI.y, hitObjectN.x, hitObjectN.y);\n                    if (distance < 3) {\n                        hitObjectN.stack = hitObjectI.stack + 1;\n                        hitObjectI = hitObjectN;\n                    }\n                }\n            }\n        }\n\n        for (i = 0; i < hitobjects.length; i++) {\n            var hitObject = hitobjects[i];\n            var stack = hitObject.stack;\n            var offset = (stack * (circleSize * 0.05));\n            var x = hitObject.x - offset;\n            var y = hitObject.y - offset;\n            if (hardrock)\n                y = y + offset;\n\n            hitObject.x = x;\n            hitObject.y = y;\n        }\n\n\n\n    },\n\n    initialiseHitObjects: function (hitobjects) {\n        for(var i = 0; i < hitobjects.length; i++){\n            hitobjects[i].init();\n        }\n\n    },\n\n    calculate_follow_points: function (hitobjects, game) {\n\n        for(var i = 0; i < hitobjects.length -1; i++){\n            var hitObject1 = hitobjects[i];\n            var hitObject2 = hitobjects[i+1];\n            if (hitObject1.type == osu.objects.HitObjectParser.TYPES.SPINNER) continue;\n            if (hitObject2.type == osu.objects.HitObjectParser.TYPES.SPINNER) continue;\n            if(hitObject2.newCombo) continue;\n\n            var startX = game.calculate_original_x(hitObject1.endX || hitObject1.x);\n            var startY = game.calculate_original_y(hitObject1.endY || hitObject1.y);\n            var endX = game.calculate_original_x(hitObject2.x);\n            var endY = game.calculate_original_y(hitObject2.y);\n            var distance = osu.helpers.math.distance(startX,startY,endX,endY);\n            if(distance > 50){\n                hitObject1.followPoint = new osu.objects.FollowPoint(hitObject1, hitObject2);\n                hitObject1.followPoint.init();\n            }\n        }\n\n    }\n\n};\r\n/**\n * hitobjects.js\n * Created by Ugrend on 17/06/2016.\n */\n\nosu = osu || {};\nosu.objects = osu.objects || {};\n\nosu.objects.HitObject = class HitObject{\n    constructor(hitObjectData, size, approachRate, game){\n        this._x = 0;\n        this._y = 0;\n        this.game = game || false;\n        this.combo = 1;\n        this.colour = 0xFFFFFF;\n        this.stack = 0;\n        this.size = size;\n        this.approachRate = approachRate;\n        this.followPoint = false;\n        this.drawn = false;\n        //these are defaults that should be overridden by the game\n        this.hitOffset = {\n            HIT_300: 79.5,\n            HIT_100: 139.5,\n            HIT_50: 199.5,\n            HIT_MISS: 500\n        };\n\n        this.destroyed = false;\n        $.extend(this, hitObjectData);\n\n\n        this.hitType = 'HIT_MISS';\n        this.hitTime = this.startTime;\n        if(this.game && this.game.is_hardrock) this._y = 384 - this._y;\n        switch (this.type){\n            case osu.objects.HitObjectParser.TYPES.CIRCLE:\n                this.object = new osu.objects.Circle(this);\n                break;\n            case osu.objects.HitObjectParser.TYPES.SLIDER:\n                this.object = new osu.objects.Slider(this);\n                break;\n            case osu.objects.HitObjectParser.TYPES.SPINNER:\n                this.object = new osu.objects.Spinner(this);\n        }\n        this.initialised = false;\n    }\n    set x(v){\n        this._x = v;\n        if(this.initialised) this.object.updatePositions();\n    };\n    get x() { return this._x}\n    set y(v){\n        this._y = v;\n        if(this.initialised) this.object.updatePositions();\n    };\n    get y() { return this._y}\n\n    init(){\n        if(!this.game){\n            throw \"Cannot Intialise object without game object!\";\n        }\n        this.x = this.game.calculate_x(this.x);\n        this.y = this.game.calculate_y(this.y);\n        this.drawn = false;\n\n\n\n\n        this.object.init();\n        //endX/Y will get intiatied by a slider else just use hitObject x\n        this.ScorePoint = new osu.objects.ScorePoint(this.endX||this.x,this.endY||this.y, this.game);\n\n\n        this.initialised = true;\n    }\n\n    reset(){\n        this.destroyed = false;\n        this.drawn = false;\n        this.object.reset();\n        if(this.followPoint){\n            this.followPoint.reset();\n        }\n    }\n\n    destroy(){\n        this.destroyed = true;\n    }\n\n    draw(cur_time){\n        if(this.destroyed) return false;\n        if(!this.drawn){\n            this.game.hit_object_container.addChild(this.ScorePoint.getContainer());\n            this.drawn = true;\n        }\n\n        var followResult = false;\n        if(this.followPoint){\n            followResult = this.followPoint.draw(cur_time);\n        }\n        var drawResult = this.object.draw(cur_time);\n        if(!drawResult){\n            this.game.hit_object_container.removeChild(this.ScorePoint.getContainer());\n        }\n\n        return drawResult ||  followResult;\n    }\n\n    hit(cur_time, pos){\n        return this.object.hit(cur_time, pos);\n    }\n\n\n};\r\n/**\n *\n *\n * Created by Ugrend on 18/07/2016.\n */\n\n//TODO: support animation\n\nosu = osu || {};\nosu.objects = osu.objects || {};\nosu.objects.ScorePoint = class ScorePoint {\n\n    constructor(x,y,game){\n        this.game = game;\n        this.hit300Sprite = new PIXI.Sprite(osu.skins.resources.hit300_0 && osu.skins.resources.hit300_0.texture || osu.skins.resources.hit300.texture);\n        this.hit100Sprite = new PIXI.Sprite(osu.skins.resources.hit100_0 && osu.skins.resources.hit100_0.texture || osu.skins.resources.hit100.texture);\n        this.hit50Sprite = new PIXI.Sprite(osu.skins.resources.hit50_0 && osu.skins.resources.hit50_0.texture || osu.skins.resources.hit50.texture);\n        this.hitMissSprite = new PIXI.Sprite(osu.skins.resources.hit0_0 && osu.skins.resources.hit0_0.texture || osu.skins.resources.hit0.texture);\n\n        this.hit300Sprite.visible = false;\n        this.hit100Sprite.visible = false;\n        this.hit50Sprite.visible = false;\n        this.hitMissSprite.visible = false;\n\n        this.hitContainer = new PIXI.Container();\n        this.hitContainer.addChild(this.hit300Sprite);\n        this.hitContainer.addChild(this.hit100Sprite);\n        this.hitContainer.addChild(this.hit50Sprite);\n        this.hitContainer.addChild(this.hitMissSprite);\n\n        this.hitContainer.position.x = x;\n        this.hitContainer.position.y = y;\n    }\n\n    getContainer(){\n        return this.hitContainer;\n    }\n\n    display300(){\n        this.hit300Sprite.visible = true;\n        this.game.performance.add300();\n    }\n    display100(){\n        this.hit100Sprite.visible = true;\n        this.game.performance.add100();\n    }\n    display50(){\n        this.hit50Sprite.visible = true;\n        this.game.performance.add50();\n    }\n    displayMiss(){\n        this.hitMissSprite.visible = true;\n        this.game.performance.addMiss();\n    }\n};\r\n/**\n * slider.js\n * Created by Ugrend on 11/06/2016.\n */\n\n\n\nosu = osu || {};\nosu.objects = osu.objects || {};\nosu.objects.Slider = class Slider{\n    constructor(hitObject){\n        //TODO: fix sliderFollowTexture\n        //Should do this better however we only really need to load these once, it would be inefficient to load the textures over and over for every slider\n        if(!osu.objects.ballTextures){\n            osu.objects.ballTextures = [];\n            if(osu.skins.resources.sliderb0){\n                for(var i = 0; i < 99; i++){\n                    if(osu.skins.resources[\"sliderb\"+i]){\n                        osu.objects.ballTextures.push(osu.skins.resources[\"sliderb\"+i].texture);\n                    }else{\n                        break;\n                    }\n                }\n            }\n        }\n\n\n        this.hitObject = hitObject;\n        this.last_draw_time  =0;\n        this.drawn = false;\n        this.destroyed = false;\n        this.initialised = false;\n        /*this is just used if we need to move the slider,\n        once generated the x,y coords of the slider will differ from the hitObject x,y\n        storing the originals will allow to move the slider by the difference\n         */\n        this.originalX = this.hitObject.x;\n        this.originalY = this.hitObject.y;\n        this.hidden_time = this.hitObject.approachRate / 3.3;\n        this.sliderDirectionBackwards = false;\n        this.drawnFollow = false;\n        this.followDestroyed = false;\n        this.totalTime = (this.hitObject.endTime - this.hitObject.startTime);\n        this.timePerRepeat = this.totalTime / this.hitObject.repeatCount;\n        this.nextRepeatTime = 0;\n        this.hitSounds = [];\n        this.repeatCount = this.hitObject.repeatCount;\n        var points = this.hitObject.points;\n        //for replay calcs\n        if(this.hitObject.game.is_hardrock){\n            for(var i = 0 ; i < points.length ; i++){\n                points[i].y = osu.helpers.constants.OSU_GAME_HEIGHT - points[i].y;\n            }\n        }\n        this.curves = new osu.objects.Curve(this.hitObject);\n        this.ticks = [];\n        this.tickPositions = [];\n        var  tickLengthDiv = this.hitObject.timing.millisecondsPerBeat / this.hitObject.game.sliderMultiplier / this.hitObject.game.sliderTickRate;\n        var sliderDuration = this.hitObject.duration / this.hitObject.repeatCount; //We only need to place the points once\n        var  tickCount =  Math.ceil(sliderDuration / tickLengthDiv) - 1;\n        if (tickCount > 0) {\n            var tickTOffset = 1 / (tickCount + 1);\n            var  t = tickTOffset;\n            for (i = 0; i < tickCount; i++, t += tickTOffset){\n                this.ticks.push(t)\n            }\n            for (i = 0; i < this.ticks.length; i++) {\n                var tickLoc = this.curves.get_point(this.ticks[i]);\n                this.tickPositions.push(tickLoc);\n            }\n\n        }\n        this.scoreBreak = false; //if the slider has been exited early\n\n    }\n\n    reset(){\n        //Reset the object so that it can be used again\n        this.beenHit = false;\n        this.sliderFollowContainer.visible = true;\n        this.nextRepeatTime = 0;\n        this.sliderDirectionBackwards = false;\n        this.repeatCount = this.hitObject.repeatCount;\n        this.startCircle.reset();\n        this.startCircle.isScoreAble = false;\n        this.drawnFollow = false;\n        this.drawn = false;\n        this.destroyed = false;\n        this.last_draw_time  =0;\n        this.hitSounds = [];\n        for(var i = 0 ; i < this.hitObject.edges.length;i++){\n            this.hitSounds.push(osu.audio.HitSound.getHitSounds(this.hitObject.edges[i].sounds, this.hitObject.timing, (i==0)));\n        }\n        this.displayRepeatArrow();\n    }\n\n\n    init(){\n        this.beenHit = false;\n        this.nextRepeatTime = 0;\n        this.sliderDirectionBackwards = false;\n        this.repeatCount = this.hitObject.repeatCount;\n        this.startCircle = new osu.objects.Circle(this.hitObject);\n        this.startCircle.isScoreAble = false;\n        this.startCircle.init();\n        this.drawnFollow = false;\n        this.drawn = false;\n        this.destroyed = false;\n        this.last_draw_time  =0;\n\n        if(this.initialised) return;\n\n        var sliderGraphics = new PIXI.Graphics();\n        var points = this.hitObject.points;\n        for(var i = 0 ; i < points.length ; i++){\n            points[i].x = this.hitObject.game.calculate_x(points[i].x);\n            points[i].y = this.hitObject.game.calculate_y(points[i].y);\n        }\n        sliderGraphics.beginFill(this.hitObject.colour);\n        sliderGraphics.lineStyle(5,0xFFFFFF);\n        var final_x = points[points.length-1].x;\n        var final_y = points[points.length-1].y;\n        this.hitObject.endX = final_x;\n        this.hitObject.endY =final_y;\n\n\n\n        sliderGraphics.endFill();\n        this.curves = new osu.objects.Curve(this.hitObject);\n        //ghetto sliders o babbby!\n        sliderGraphics.lineStyle(5,0xFFFFFF);\n        sliderGraphics.beginFill(0xFFFFFF);\n\n\n        //ghetto limit circle count to improve performance;\n\n\n        var lastPoint = this.curves.points[0];\n        sliderGraphics.drawCircle(lastPoint.x,lastPoint.y, (this.hitObject.size)/2.15);\n        var distance = osu.helpers.math.vectorDistance;\n        for(var i = 1; i< this.curves.points.length; i++){\n            var drawPoint = this.curves.points[i];\n            if(distance(lastPoint,drawPoint) > this.hitObject.size/15){\n                lastPoint = drawPoint;\n                sliderGraphics.drawCircle(drawPoint.x,drawPoint.y, (this.hitObject.size)/2.15);\n            }\n        }\n        var finalPoint = this.curves.points[this.curves.points.length-1];\n        sliderGraphics.drawCircle(finalPoint.x,finalPoint.y, (this.hitObject.size)/2.15);\n\n        sliderGraphics.lineStyle(5,this.hitObject.colour);\n        sliderGraphics.beginFill(this.hitObject.colour);\n\n\n        //draw inside\n        //TODO: masking might handle the border better so that it is not transparent\n        lastPoint = this.curves.points[0];\n        sliderGraphics.drawCircle(lastPoint.x,lastPoint.y, (this.hitObject.size*.9)/2.15);\n        for(var i = 1; i< this.curves.points.length; i++){\n            drawPoint = this.curves.points[i];\n            if(distance(lastPoint,drawPoint) > this.hitObject.size/15){\n                lastPoint = drawPoint;\n                sliderGraphics.drawCircle(drawPoint.x,drawPoint.y, (this.hitObject.size *.9)/2.15);\n            }\n        }\n        finalPoint = this.curves.points[this.curves.points.length-1];\n        sliderGraphics.drawCircle(finalPoint.x,finalPoint.y, (this.hitObject.size*.9)/2.15);\n\n\n        //seems to be a bug with generateTexture or its now meant to be used differently\n        //https://github.com/pixijs/pixi.js/issues/3446\n        //changing the location of the graphics fixes it tho so plz no remove this code even though it looks redundant\n        var bounds = sliderGraphics.getBounds();\n        sliderGraphics.x +=1;\n        sliderGraphics.x -=1;\n\n\n\n        var t = sliderGraphics.generateCanvasTexture();\n\n        var sprite = new PIXI.Sprite(t);\n        sprite.position.x = bounds.x;\n        sprite.position.y = bounds.y;\n        sprite.alpha = 0.6;\n        sprite.cacheAsBitmap = true;\n        sliderGraphics.clear();\n        sliderGraphics.destroy(); //no longer need this might a well destroy it\n        this.sliderGraphicsContainer = new PIXI.Container();\n        this.sliderGraphicsContainer.addChild(sprite);\n\n\n        //Add end circle TODO: check if theres a override skin\n        this.endCircleSprite =  new PIXI.Sprite(osu.skins.resources.hitcicleoverlay.texture);\n        this.endCircleSprite.anchor.set(0.5);\n        this.endCircleSprite.height = this.hitObject.size;\n        this.endCircleSprite.width = this.hitObject.size;\n        this.endCircleSprite.position.x = final_x;\n        this.endCircleSprite.position.y = final_y;\n\n        this.sliderGraphicsContainer.addChild(this.endCircleSprite);\n\n        this.startCircleSprite =  new PIXI.Sprite(osu.skins.resources.hitcicleoverlay.texture);\n        this.startCircleSprite.anchor.set(0.5);\n        this.startCircleSprite.height = this.hitObject.size;\n        this.startCircleSprite.width = this.hitObject.size;\n        this.startCircleSprite.position.x = this.hitObject.x;\n        this.startCircleSprite.position.y = this.hitObject.y;\n        this.sliderGraphicsContainer.addChild(this.startCircleSprite);\n\n        this.arrowSliderEnd = new PIXI.Sprite(osu.skins.resources.reversearrow.texture);\n        this.arrowSliderEnd.height = (this.hitObject.size *2)/5;\n        this.arrowSliderEnd.width = (this.hitObject.size *2)/5;\n        this.arrowSliderEnd.anchor.set(0.5);\n        this.arrowSliderEnd.position.x = final_x;\n        this.arrowSliderEnd.position.y = final_y;\n        var angle = osu.helpers.math.angleVector(this.curves.points[this.curves.points.length -1],\n            this.curves.points[this.curves.points.length-2]);\n        this.arrowSliderEnd.rotation = angle;\n        this.arrowSliderEnd.visible = false;\n\n        this.arrowSliderStart = new PIXI.Sprite(osu.skins.resources.reversearrow.texture);\n        this.arrowSliderStart.height = (this.hitObject.size *2) /5;\n        this.arrowSliderStart.width = (this.hitObject.size *2) /5 ;\n        this.arrowSliderStart.anchor.set(0.5);\n        this.arrowSliderStart.position.x = this.hitObject.x;\n        this.arrowSliderStart.position.y = this.hitObject.y;\n        angle = osu.helpers.math.angleVector(this.curves.points[0], this.curves.points[1]);\n        this.arrowSliderStart.rotation = angle;\n        this.arrowSliderStart.visible = false;\n\n        this.sliderGraphicsContainer.addChild(this.arrowSliderStart);\n        this.sliderGraphicsContainer.addChild(this.arrowSliderEnd);\n        this.tickPositions = [];\n        for (i = 0; i < this.ticks.length; i++) {\n            var tickLoc = this.curves.get_point(this.ticks[i]);\n            this.tickPositions.push(tickLoc);\n            var tickSprite = new PIXI.Sprite(osu.skins.resources.sliderscorepoint.texture);\n            tickSprite.position.x = tickLoc.x;\n            tickSprite.position.y = tickLoc.y;\n            tickSprite.anchor.set(0.5);\n            this.sliderGraphicsContainer.addChild(tickSprite)\n        }\n\n\n\n        this.sliderFollowContainer = new PIXI.Container();\n\n        var sliderFollowSprite = new PIXI.Sprite(osu.skins.resources.sliderfollowcircle.texture);\n        sliderFollowSprite.height = this.hitObject.size *2;\n        sliderFollowSprite.width = this.hitObject.size *2;\n        sliderFollowSprite.anchor.set(0.5);\n\n        var sliderBall = new PIXI.extras.MovieClip(osu.objects.ballTextures);\n        sliderBall.animationSpeed = 1.2;\n        sliderBall.anchor.set(0.5);\n        sliderBall.width = this.hitObject.size;\n        sliderBall.height = this.hitObject.size;\n        sliderBall.play();\n        this.sliderFollowContainer.addChild(sliderFollowSprite);\n        this.sliderFollowContainer.addChild(sliderBall);\n        this.sliderFollowContainer.position.x = this.hitObject.x;\n        this.sliderFollowContainer.position.y = this.hitObject.y;\n\n        for(i = 0 ; i < this.hitObject.edges.length;i++){\n            this.hitSounds.push(osu.audio.HitSound.getHitSounds(this.hitObject.edges[i].sounds, this.hitObject.timing, (i==0)));\n        }\n\n        this.displayRepeatArrow();\n\n        this.initialised = true;\n    }\n\n    displayRepeatArrow(){\n        if(this.repeatCount > 0) {\n            if (this.repeatCount % 2 == 0) {\n                this.arrowSliderEnd.visible = true;\n                this.arrowSliderStart.visible = false;\n            } else {\n                this.arrowSliderEnd.visible = false;\n                if (this.repeatCount != 1) {\n                    this.arrowSliderStart.visible = true;\n                }\n            }\n        }\n    }\n\n\n    updatePositions(){\n        this.startCircle.updatePositions();\n\n        var moveX = this.originalX - this.hitObject.x;\n        var moveY = this.originalY - this.hitObject.y;\n        //the container x,y may differ from the hitobject xy so we move it by the difference change.\n        this.sliderGraphicsContainer.x -= moveX;\n        this.sliderGraphicsContainer.y -= moveY;\n        this.originalX = this.hitObject.x;\n        this.originalY = this.hitObject.y;\n    }\n    hit(time){\n        var playSound = false;\n        if(time >= this.hitObject.startTime && this.hitSounds.length == this.hitObject.edges.length){\n            playSound = true;\n        }\n        if(this.nextRepeatTime == 0){\n            if(time >= this.hitObject.endTime){\n                playSound = true;\n            }\n        }else{\n            if(time >= this.nextRepeatTime + this.hitObject.startTime){\n                playSound = true;\n            }\n        }\n\n\n        if(playSound && this.hitSounds.length > 0){\n            var sounds = this.hitSounds.shift();\n            for(var i = 0 ; i < sounds.length ; i++){\n                osu.audio.sound.play_sound(sounds[i], this.hitObject.timing.volume/100);\n            }\n        }\n\n\n\n    }\n\n    draw(cur_time){\n        this.hit(cur_time);\n        var drawCircle = this.startCircle.draw(cur_time);\n        //object is no longer rendered but still might have some logic (eg being missed, is hidden etc)\n        if(this.destroyed && !drawCircle){\n            if(cur_time > this.hitObject.endTime + 500){\n                if(!this.followDestroyed) {\n                    //if we alt tab or get a big lag spike some reason the object is not removed so this is a workaround\n                    this.sliderFollowContainer.visible = false;\n                    this.hitObject.game.hit_object_container.removeChild(this.sliderFollowContainer);\n                }\n                return false;\n            }\n        }\n        //TODO: should this be at the slider endtime, or use start time?\n        if(this.drawn && this.hitObject.game.is_hidden && cur_time > this.hitObject.startTime - this.hidden_time){\n            this.destroy();\n            this.destroyed = true;\n        }\n\n        if(!this.beenHit && this.scoreBreak && this.scoreBreak > cur_time){\n            this.hitObject.ScorePoint.displayMiss();\n            this.beenHit = true;\n        }\n        if(!this.beenHit && !this.scoreBreak && cur_time > this.hitObject.endTime){\n            switch(this.hitObject.hitType){\n                case 'HIT_MISS':\n                    this.hitObject.ScorePoint.displayMiss();\n                    this.beenHit = true;\n                    break;\n                case 'HIT_50':\n                    this.hitObject.ScorePoint.display50();\n                    this.beenHit = true;\n                    break;\n                case 'HIT_100':\n                    this.hitObject.ScorePoint.display100();\n                    this.beenHit = true;\n                    break;\n                case 'HIT_300':\n                    this.hitObject.ScorePoint.display300();\n                    this.beenHit = true;\n                    break;\n            }\n\n        }\n\n        if(cur_time >= this.hitObject.startTime){\n            if(!this.drawnFollow){\n                this.hitObject.game.hit_object_container.addChild(this.sliderFollowContainer);\n            }\n            if(this.repeatCount > 0){\n                //TODO: i feel like this is wrong and im overcomplicating it but im tired and this works\n                //WTF SLEEPY ME\n                var elapsed_time = (cur_time-this.nextRepeatTime) - this.hitObject.startTime;\n\n                this.displayRepeatArrow();\n\n                var t = (elapsed_time / this.timePerRepeat);\n                if(this.sliderDirectionBackwards){\n                    t = 1-t;\n                }\n                if(t >= 1 || t < 0){\n                    this.repeatCount -=1;\n                    this.nextRepeatTime += this.timePerRepeat;\n                    this.sliderDirectionBackwards = !this.sliderDirectionBackwards;\n                    t = 1;\n                }\n\n                var moveTo = this.curves.get_point(t);\n\n\n                if(moveTo){\n                    this.sliderFollowContainer.position.x = moveTo.x;\n                    this.sliderFollowContainer.position.y = moveTo.y;\n                    this.sliderFollowContainer.rotation = moveTo.angle;\n                }else{\n                    console.log('why u gotta put in dem troll maps');\n                }\n\n\n            }else{\n                this.hitObject.game.hit_object_container.removeChild(this.sliderFollowContainer);\n                //if we alt tab or get a big lag spike some reason the object is not removed so this is a workaround\n                this.sliderFollowContainer.visible = false;\n                this.followDestroyed = true;\n            }\n\n\n        }\n\n        if(!this.drawn){\n            this.hitObject.game.hit_object_container.addChildAt(this.sliderGraphicsContainer,0);\n            this.drawn = true;\n        }\n\n        if(!this.destroyed && cur_time > this.hitObject.endTime + 110){\n            this.destroy();\n            this.destroyed = true;\n        }\n        return true;\n    }\n\n    destroy(){\n        this.destroyed = true;\n        this.hitObject.game.hit_object_container.removeChild(this.sliderGraphicsContainer);\n\n    }\n\n\n\n};\n\n\n\r\n/**\n * smoke.js\n * Created by Ugrend on 23/07/2016.\n */\n\nosu = osu || {};\nosu.objects = osu.objects || {};\nosu.objects.Smoke = function (x,y) {\n    var sprite = new PIXI.Sprite(osu.skins.resources.cursor_smoke.texture);\n    sprite.position.x = x;\n    sprite.position.y = y;\n    sprite.anchor.set(0.5);\n    sprite.destroyer = function () {\n        var self = this;\n        setTimeout(function () {\n            self.visible = false;\n        }, 3500);\n    };\n    sprite.destroyer();\n    return sprite\n\n};\r\n/**\n * spinner.js\n * Created by Ugrend on 11/06/2016.\n */\n\n\nosu = osu || {};\nosu.objects = osu.objects || {};\nosu.objects.Spinner = class Spinner{\n    constructor(hitObject){\n        this.hitObject = hitObject;\n        this.drawn = false;\n        this.destroyed = false;\n        this.rotations = [];\n        this.currentRotation = 0;\n    }\n\n    reset(){\n        //Reset the object so that it can be used again\n        this.drawn = false;\n        this.destroyed = false;\n        this.beenHit = false;\n        this.isScoreAble = true;\n        this.currentRotation = 0;\n    }\n\n    init(){\n        this.drawn = false;\n        this.destroyed = false;\n        this.x = this.hitObject.game.getRenderWidth()/2;\n        this.y = this.hitObject.game.getRenderHeight()/2;\n        this.spinnerContainer = new PIXI.Container();\n        var backgroundSprite = new PIXI.Sprite(osu.skins.resources.spinner_background.texture);\n        backgroundSprite.width = this.hitObject.game.getRenderWidth();\n        backgroundSprite.height =this.hitObject.game.getRenderHeight();\n        this.spinnerCirle = new PIXI.Sprite(osu.skins.resources.spinner_circle.texture);\n        this.spinnerCirle.position.x = this.x;\n        this.spinnerCirle.position.y = this.y;\n        this.spinnerCirle.anchor.set(0.5);\n        this.spinnerContainer.addChild(backgroundSprite);\n        this.spinnerContainer.addChild(this.spinnerCirle);\n    }\n    draw(cur_time){\n        if(!this.drawn){\n            if(cur_time > this.hitObject.startTime){\n                this.hitObject.game.hit_object_container.addChild(this.spinnerContainer);\n                this.drawn = true;\n            }\n        }\n        if(!this.destroyed){\n            if(this.rotations.length === 0){\n                this.spinnerCirle.rotation -= 0.1;\n            }else{\n                for(var i = this.currentRotation; i<this.rotations.length; i++){\n                    if(this.rotations[i].t <= cur_time){\n                        this.currentRotation = i;\n                        this.spinnerCirle.rotation = this.rotations[i].a;\n                    }else{\n                        break;\n                    }\n                }\n\n            }\n\n            if(cur_time > this.hitObject.endTime){\n                this.destroy();\n                this.destroyed = true;\n            }\n        }\n\n        return !this.destroyed;\n\n    }\n    destroy(){\n        this.hitObject.game.hit_object_container.removeChild(this.spinnerContainer);\n    }\n\n};\n\r\n/**\n * score.js\n * Created by ugrend on 2/06/2016.\n */\n\nvar osu  = osu || {};\nosu.score = {\n\n\n    /*\n     Accuracy = Total points of hits / (Total number of hits * 300)\n     Total points of hits \t(Number of 50s * 50 + Number of 100s * 100 + Number of 300s * 300)\n     Total number of hits \t(Number of misses + Number of 50's + Number of 100's + Number of 300's)\n\n     For reference: 300 = 6/6, 100 = 2/6, 50 = 1/6, Miss = 0/6.\n\n     */\n    GRADES: Object.freeze({\n        SS: {name:\"SS\",small_icn:\"ranking_x_small\",large_icn:\"ranking_x\"},\n        S:  {name:\"S\",small_icn:\"ranking_s_small\",large_icn:\"ranking_s\"},\n        A:  {name:\"A\",small_icn:\"ranking_a_small\",large_icn:\"ranking_a\"},\n        B:  {name:\"B\",small_icn:\"ranking_b_small\",large_icn:\"ranking_b\"},\n        C:  {name:\"C\",small_icn:\"ranking_c_small\",large_icn:\"ranking_c\"},\n        D:  {name:\"D\",small_icn:\"ranking_d_small\",large_icn:\"ranking_d\"},\n        SSH:  {name:\"SSH\",small_icn:\"ranking_xh_small\",large_icn:\"ranking_xh\"},\n        SH:  {name:\"SH\",small_icn:\"ranking_sh_small\",large_icn:\"ranking_sh\"}\n    }),\n\n\n    /**\n     *\n     * @param h300  {Number}\n     * @param h100  {Number}\n     * @param h50   {Number}\n     * @param hMisses {Number}\n     * @returns\n     */\n    getGrade: function(h300,h100,h50,hMisses,mods){\n        /*\n         SS = 100% Accuracy\n         S = Over 90% 300s, less than 1% 50s and no misses.\n         A = Over 80% 300s and no misses OR over 90% 300s.\n         B = Over 70% 300s and no misses OR over 80% 300s.\n         C = Over 60% 300s.\n         D = Anything else.\n\n\n         Special grades\n\n         Silver SS (SSH) = Normal grade SS with 'hidden' and/or 'flashlight' mod.\n         Silver S (SH) = Normal grade S with 'hidden' and/or 'flashlight' mod.\n\n         */\n        var is_silver = false;\n        for(var i =0; i < mods.length ; i++){\n            if(mods[i].code == \"FL\" || mods[i].code == \"HD\"){\n                is_silver = true;\n            }\n        }\n\n\n        var total_hits =  h300 + h100 + h50 + hMisses;\n        if(h300 == total_hits){\n            if(is_silver) return this.GRADES.SSH;else return this.GRADES.SS\n        }\n        if((h300/total_hits)*100 > 90) {\n            if (hMisses > 0 || (h50 / total_hits) * 100 > 1) {\n                return this.GRADES.A;\n            }\n             if(is_silver) return this.GRADES.SH; else return this.GRADES.S;\n        }\n        if((h300/total_hits)*100 > 80) {\n            if (hMisses > 0) {\n                return this.GRADES.B;\n            }\n            return this.GRADES.A;\n        }\n        if((h300/total_hits)*100 > 70) {\n            if (hMisses > 0) {\n                return this.GRADES.C;\n            }\n            return this.GRADES.B;\n        }\n        if((h300/total_hits)*100 > 60) {\n            return this.GRADES.C;\n        }\n        return this.GRADES.D;\n    },\n\n    getAccuracy: function(h300,h100,h50,hMisses){\n        var maxHits = h300 + h100 + h50 + hMisses;\n        var percent = (h300 * 300 + h100* 100 + h50 * 50) / (maxHits * 300) * 100;\n        return parseFloat(percent).toFixed(2);\n    },\n\n    parseAccuracyFromReplay: function (replay) {\n        return this.getAccuracy(replay.h300 + replay.hGekis, replay.h100 + replay.hKatus, replay.h50, replay.hMisses)\n    }\n\n\n\n\n\n};\r\n/**\n * settings.js\n * Created by Ugrend on 9/06/2016.\n */\n\n\nosu = osu || {};\nosu.settings = {\n\n    DEFAULTS: Object.freeze({\n        background_dim: 0.3,\n        master_volume: 1.0,\n        music_volume: 0.5,\n        sound_effects: 1,\n        use_beatmap_skins: false,\n        use_beatmap_hitsounds: false,\n        song_url: false,\n        asset_server: false,\n        selected_skin: \"0\",\n\n    }),\n    SETTINGS:{\n\n\n        _background_dim: 0.3,\n        _master_volume: 1.0,\n        _music_volume: 0.5,\n        _sound_effects_volume: 1,\n        _use_beatmap_skins: false,\n        _use_beatmap_hitsounds: false,\n        _song_url: false,\n        _asset_server: false,\n        _selected_skin: \"0\",\n\n        get background_dim(){return this._background_dim},\n        set background_dim(v) { this._background_dim = v; event_handler.emit(event_handler.EVENTS.SETTINGS_CHANGED);},\n        get master_volume(){return this._master_volume;},\n        set master_volume(v) { this._master_volume = v; event_handler.emit(event_handler.EVENTS.SETTINGS_CHANGED);},\n        get music_volume(){return this._music_volume},\n        set music_volume(v) { this._music_volume = v; event_handler.emit(event_handler.EVENTS.SETTINGS_CHANGED);},\n        get sound_effects_volume(){return this._sound_effects_volume},\n        set sound_effects_volume(v) { this._sound_effects_volume = v; event_handler.emit(event_handler.EVENTS.SETTINGS_CHANGED);},\n        get use_beatmap_skins(){return this._use_beatmap_skins},\n        set use_beatmap_skins(v) { this._use_beatmap_skins = v; event_handler.emit(event_handler.EVENTS.SETTINGS_CHANGED);},\n        get use_beatmap_hitsounds(){return this._use_beatmap_hitsounds},\n        set use_beatmap_hitsounds(v) { this._use_beatmap_hitsounds = v; event_handler.emit(event_handler.EVENTS.SETTINGS_CHANGED);},\n        get song_url(){return this._song_url},\n        set song_url(v) { this._song_url = v; event_handler.emit(event_handler.EVENTS.SETTINGS_CHANGED);},\n        get asset_server(){return this._asset_server},\n        set asset_server(v) { this._asset_server = v; event_handler.emit(event_handler.EVENTS.SETTINGS_CHANGED);},\n        get selected_skin(){return this._selected_skin},\n        set selected_skin(v) { this._selected_skin = v; event_handler.emit(event_handler.EVENTS.SETTINGS_CHANGED);},\n    },\n\n\n    init: function () {\n        var self = this;\n        event_handler.on(event_handler.EVENTS.SETTINGS_CHANGED, this.save_settings.bind(this));\n\n        database.get_data(database.TABLES.OPTIONS,\"options\", function (e) {\n            if(e.data){\n                for(var k in e.data){\n                    if(e.data.hasOwnProperty(k)){\n                        if(k.indexOf(\"_\") == 0){\n                            self.SETTINGS[k] = e.data[k];\n                        }\n                    }\n                }\n            }\n            self.onloaded();\n            event_handler.emit(event_handler.EVENTS.SETTINGS_CHANGED);\n        });\n    },\n    save_settings: function () {\n        database.update_data(database.TABLES.OPTIONS,\"options\",this.SETTINGS);\n    },\n\n    onloaded: function () {\n\n    }\n\n\n\n\n\n};\n\r\n/**\n * main_screen.js\n * Created by Ugrend on 20/06/2016.\n */\nvar osu = osu || {};\nosu.ui = osu.ui || {};\nosu.ui.interface = osu.ui.interface || {};\nosu.ui.interface.mainscreen = {\n\n    beatmap_count: -1,\n    replay_count: -1,\n    key_count: 0,\n    processed_count: 0,\n    displaying_main_screen: false,\n    loaded: false,\n    beatmap_keys: [],\n    beatmaps: [],\n    current_selection: false,\n    beatmap_selection_template: \"\",\n    replay_selection_template: \"\",\n    $beatmap_section_html: null,\n    $replay_section_html: null,\n    cached_dom: false,\n    events_bound: false,\n    replays: [],\n    beatmapSearch: null,\n    replaySearch: null,\n    $currentSelectionHtml: \"\",\n    launched_replay_from_url: false,\n\n\n    init: function () {\n        this.cacheDom();\n        this.bind_events();\n\n        this.$master_volume_slider.val(osu.settings.SETTINGS.master_volume * 100);\n        this.$music_volume_slider.val(osu.settings.SETTINGS.music_volume * 100);\n        this.$sound_volume_slider.val(osu.settings.SETTINGS.sound_effects_volume * 100);\n        this.$background_dim_slider.val(osu.settings.SETTINGS.background_dim * 100);\n        this.$skin_select.val(osu.settings.SETTINGS.selected_skin);\n\n        var self = this;\n        database.get_count(database.TABLES.BEATMAPS, function (count) {\n            self.beatmap_count = count;\n            self.show_selection();\n        });\n        database.get_count(database.TABLES.REPLAYS, function (count) {\n            self.replay_count = count;\n            self.show_selection();\n        });\n        event_handler.on(event_handler.EVENTS.BEATMAP_LOADED,this.on_load_file.bind(this));\n        //event_handler.on(event_handler.EVENTS.REPLAY_LOADED, this.on_load_file.bind(this)); // we may not care about a new replay\n\n    },\n\n    launchReplayFromURL: function () {\n        if (window.location.href.match(/\\?./)) {\n            var queryDict = getParams();\n            if(queryDict.r){\n                osu.webapi.replays.loadReplay(queryDict.r);\n            }\n        }\n        else{\n            //allow loading replay data from # so can load in replay frame from a iframe\n            if(location.hash.replace(/#/,\"\") != \"\"){\n\n                var replayB64 = decodeURI(location.hash.replace(/#/,\"\"));\n                location.hash = \"\";\n                ReplayParser(base64ToUint8Array(replayB64), function (replay_data) {\n                    replay = replay_data; //TODO: not be essentially global\n                    loadBeatMap();\n                });\n            }\n        }\n\n    },\n    cacheDom: function () {\n        if(!this.cached_dom){\n            this.beatmap_selection_template = document.getElementById(\"beatmap_select_template\").innerHTML;\n            this.replay_selection_template = document.getElementById(\"replay_select_template\").innerHTML;\n            this.$beatmap_section_html = $(\"#song_selection_area\");\n            this.$replay_section_html = $(\"#replay_select_area\");\n            this.mapped_by = document.getElementById(\"mapped_by\");\n            this.map_length_and_objects = document.getElementById(\"map_length_and_objects\");\n            this.map_object_type_counts = document.getElementById(\"map_object_type_counts\");\n            this.map_difficulty = document.getElementById(\"map_difficulty\");\n            this.map_name = document.getElementById(\"map_name\");\n            this.$footer = $(\"#footer\");\n            this.$beatmap_search_field = $(\"#filter_maps_search\");\n            this.$replay_search_field = $(\"#filter_players_search\");\n            this.$title_and_search = $(\"#title_and_search\");\n            this.$details_replay_search = $(\"#details_replay_search\");\n            this.$asset_server_url = $(\"#asset_server_url\");\n            this.$song_server_url = $(\"#song_server_url\");\n            this.$save_asset_servers_btn = $(\"#save_asset_servers_btn\");\n            this.$master_volume_slider = $(\"#master_volume\");\n            this.$music_volume_slider = $(\"#music_volume\");\n            this.$sound_volume_slider = $(\"#sound_volume\");\n            this.$background_dim_slider = $(\"#background_dim\");\n            this.$skin_select = $(\"#skin_select\");\n            this.cached_dom = true;\n            this.$deleteBeatmapModel = $(\"#delete_beatmap_modal\");\n            this.$deleteButton = this.$deleteBeatmapModel.find(\"#deleteMapButton\");\n            this.$deleteOtherDifficultiesCheckBox = this.$deleteBeatmapModel.find(\"#delete_other_difficulties\");\n            this.$deleteAssetsCheckBox = this.$deleteBeatmapModel.find(\"#delete_assets\");\n        }\n\n    },\n\n    bind_events: function () {\n        //init script can be called multiple times if no maps/replays exist\n        if(!this.events_bound){\n\n\n            $(\"#replay_playback_speed\").on('change', function (e) {\n                osu.ui.interface.osugame.setPlayBackMulti(e.currentTarget.value);\n            });\n\n            $(\"#open_config_button_other\").on('click', function () {\n                osu.ui.interface.osugame.toggle_settings();\n            });\n\n            var self = this;\n            this.$save_asset_servers_btn.on('click', function () {\n                osu.settings.SETTINGS.asset_server = self.$asset_server_url.val();\n                osu.settings.SETTINGS.song_url = self.$song_server_url.val();\n            });\n\n            this.$skin_select.on('change',function () {\n                osu.settings.SETTINGS.selected_skin = self.$skin_select.val();\n                osu.skins.init();\n            });\n\n\n            this.$beatmap_search_field.on('input', function (e) {\n                var searchParam = e.currentTarget.value;\n                if(self.beatmapSearch && searchParam != \"\"){\n                    self.$beatmap_section_html.find(\".beatmap_preview:not([class*='hidden'])\").addClass(\"hidden\");\n                    self.beatmapSearch.search(searchParam, function (result) {\n                       for(var i = 0; i < result.length ; i++){\n                           self.$beatmap_section_html.find(\"#\"+result[i].md5sum).removeClass(\"hidden\");\n                       }\n                    });\n                }else{\n                    self.$beatmap_section_html.find(\".beatmap_preview\").removeClass(\"hidden\");\n                    self.$currentSelectionHtml[0].scrollIntoViewIfNeeded();\n                }\n\n\n            });\n\n            this.$replay_search_field.on('input', function (e) {\n                var searchParam = e.currentTarget.value;\n                if(self.replaySearch && searchParam != \"\"){\n                    self.$replay_section_html.find(\".replay_preview:not([class*='hidden'])\").addClass(\"hidden\");\n                    self.replaySearch.search(searchParam, function (result) {\n                        for(var i = 0; i < result.length ; i++){\n                            self.$replay_section_html.find(\"#\"+result[i].rMd5Hash).removeClass(\"hidden\");\n                        }\n                    });\n                }else{\n                    self.$replay_section_html.find(\".replay_preview\").removeClass(\"hidden\");\n                }\n            });\n\n            this.$master_volume_slider.on(\"input\", function (e) {\n               osu.settings.SETTINGS.master_volume = e.currentTarget.value / 100;\n                osu.audio.sound.play_sound(osu.audio.sound.MENUCLICK);\n            });\n            this.$music_volume_slider.on(\"input\", function (e) {\n                osu.settings.SETTINGS.music_volume = e.currentTarget.value / 100;\n                osu.audio.sound.play_sound(osu.audio.sound.MENUCLICK);\n            });\n            this.$sound_volume_slider.on(\"input\", function (e) {\n                osu.settings.SETTINGS.sound_effects_volume = e.currentTarget.value / 100;\n                osu.audio.sound.play_sound(osu.audio.sound.MENUCLICK);\n            });\n            this.$background_dim_slider.on(\"input\", function (e) {\n                osu.settings.SETTINGS.background_dim = e.currentTarget.value / 100;\n                osu.audio.sound.play_sound(osu.audio.sound.MENUCLICK);\n            });\n\n\n            //On beatmap select click highlight the clicked item, and unhighlight any other items\n            this.$beatmap_section_html.on(\"click\",\".beatmap_preview\", function (event) {\n                osu.audio.sound.play_sound(osu.audio.sound.MENUCLICK);\n                var clickedObject = $(this);\n                var md5sum = clickedObject.attr(\"id\");\n                self.highlight_beatmap(clickedObject);\n                self.select_beatmap(md5sum, false);\n            });\n            //on right click allow deleting of map/etc\n            this.$beatmap_section_html.on('contextmenu',\".beatmap_preview\",function (e) {\n                e.preventDefault();\n                self.deletion_id = $(this).attr(\"id\");\n                self.$deleteBeatmapModel.modal('show');\n            });\n\n\n            this.$deleteButton.on(\"click\", self.delete_map.bind(self));\n\n            //on replay click open replay\n            $(this.$replay_section_html).on(\"click\",\".replay_preview\", function (event) {\n                osu.audio.sound.play_sound(osu.audio.sound.MENUHIT);\n                var id = $(this).attr('id');\n                for(var i = 0; i < self.replays.length ; i ++){\n                    if(self.replays[i].rMd5Hash == id){\n                        replay = self.replays[i];\n                        break;\n                    }\n                }\n                loadBeatMap();\n            });\n\n            //Escape out of replay back to main screen\n            document.onkeyup = function (e) {\n                e = e || window.event;\n                //27 is Escape\n                if(e.keyCode == 27){\n                    if(self.loaded && !self.displaying_main_screen){\n                        //if a replay is playing we can stop it\n                        event_handler.emit(event_handler.EVENTS.STOP_REPLAY);\n                        if(!osu.ui.interface.osugame.has_started){\n                            self.show_main_screen();\n                        }\n\n                    }\n                }\n\n            }\n        }\n\n        this.events_bound = true;\n\n\n    },\n\n    _delete_other_difficulties(id){\n        var delete_array = [];\n        var self = this;\n        var parentMap = false;\n        for(var i = 0; i < this.beatmaps.length ; i++){\n            var beatmap = this.beatmaps[i];\n            if(beatmap.md5sum == id) {\n                parentMap = beatmap;\n                break;\n            }\n        }\n        if(parentMap){\n            var beatmapSet = parentMap.beatmapsetid;\n\n            for(i = 0; i < this.beatmaps.length ; i++){\n                beatmap = this.beatmaps[i];\n                if(beatmap.beatmapsetid == beatmapSet) {\n                    delete_array.push(beatmap.md5sum);\n                }\n            }\n        }\n        for(i = 0 ; i< delete_array.length; i++){\n            self.$beatmap_section_html.find(\"#\" +delete_array[i]).hide();\n            database.delete_data(database.TABLES.BEATMAPS,delete_array[i]);\n        }\n    },\n\n    delete_map(id,other_difficulties,include_assets){\n        var self = this;\n        //check id if object, if so came from ui not console\n        if(typeof id == \"object\"){\n            id = this.deletion_id;\n            other_difficulties = this.$deleteOtherDifficultiesCheckBox.is(':checked');\n            include_assets = this.$deleteAssetsCheckBox.is(':checked');\n        }\n        self.$beatmap_section_html.find(\"#\" +id).hide();\n\n\n        if(include_assets){\n            database.get_data(database.TABLES.BEATMAPS,id,function (result) {\n                if(other_difficulties){\n                    self._delete_other_difficulties(id);\n                }\n                var beatmap = result.data;\n                for(var i = 0; i<beatmap.files.length; i++){\n                    database.delete_data(database.TABLES.ASSETS,beatmap.files[i].md5sum);\n                }\n                database.delete_data(database.TABLES.BEATMAPS,id)\n            });\n        }\n\n\n        if(other_difficulties && !include_assets){\n            this._delete_other_difficulties(id);\n        }\n\n        if(!other_difficulties && !include_assets){\n            database.delete_data(database.TABLES.BEATMAPS,id);\n\n        }\n    },\n\n    highlight_beatmap($beatmapHtml){\n        this.$currentSelectionHtml =$beatmapHtml;\n        this.$beatmap_section_html.find(\".song_preview_row\").removeClass('song_preview_unselected').removeClass('song_preview_mouseover').removeClass('song_preview_selected').addClass('song_preview_unselected');\n        //resize everything back to unselected size\n        this.$beatmap_section_html.find(\".beatmap_preview\").removeClass(\"col-xs-9\").removeClass(\"col-xs-8\").removeClass(\"col-xs-7\")\n            .removeClass('col-xs-offset-5').removeClass('col-xs-offset-4').removeClass('col-xs-offset-3')\n            .addClass('col-xs-offset-5').addClass('col-xs-7');\n        $beatmapHtml.removeClass(\"col-xs-9\").removeClass(\"col-xs-8\").removeClass(\"col-xs-7\")\n            .removeClass('col-xs-offset-5').removeClass('col-xs-offset-4').removeClass('col-xs-offset-3')\n            .addClass('col-xs-offset-3').addClass('col-xs-9');\n        $beatmapHtml.find('.song_preview_row').removeClass('song_preview_unselected').addClass('song_preview_selected');\n        $beatmapHtml[0].scrollIntoViewIfNeeded();\n\n    },\n\n\n    select_beatmap(md5sum,highlight_map){\n        this.$replay_section_html.html(\"\"); //clear current replay select\n\n\n\n\n        var beatmap = null;\n        for(var i = 0; i < this.beatmaps.length ; i++){\n            if(this.beatmaps[i].md5sum == md5sum){\n                beatmap = this.beatmaps[i];\n                break;\n            }\n        }\n\n        this.map_name.innerHTML = Mustache.render(\"{{source}} \"+\n            \"({{#artistunicode}}{{artistunicode}}{{/artistunicode}}{{^artistunicode}}{{artist}}{{/artistunicode}}) - \"+\n            \"{{#titleunicode}}{{titleunicode}}{{/titleunicode}}{{^titleunicode}}{{title}}{{/titleunicode}}  [{{version}}]\",beatmap);\n        this.mapped_by.innerHTML = \"Mapped by \" + beatmap.creator;\n        this.map_length_and_objects.innerHTML =\n            \"Length: \" + beatmap.song_length +\n            \" BPM: \" +  (beatmap.maxBPM ? beatmap.maxBPM + \" - \" : \"\") + beatmap.minBPM  +\n            \" Objects: \" + beatmap.objects;\n        this.map_object_type_counts.innerHTML =\n            \"Circles: \" +  beatmap.circles  +\n            \" Sliders: \"+  beatmap.sliders  +\n            \" Spinners \" + beatmap.spinners ;\n        this.map_difficulty.innerHTML =\n            \"CS: \" + beatmap.circleSize +\n            \" AR: \" + beatmap.approachRate +\n            \" OD: \" + beatmap.overallDifficulty +\n            \" HP: \" + beatmap.HPDrain +\n            \" Stars: \" + beatmap.stars;\n        beatmap.play_song();\n        beatmap.load_background();\n        var self = this;\n        database.get_data_from_index(database.TABLES.REPLAYS,database.INDEXES.REPLAYS.BEATMAP_ID,beatmap.md5sum, function (replays) {\n            self.replays = replays;\n            replays.sort(function (a,b) {\n                if (a.tScore > b.tScore)\n                    return -1;\n                if (a.tScore < b.tScore)\n                    return 1;\n                //if same score (rare but would happen on easier maps) sort by date played\n                var aDate = new Date(a.time_played);\n                var bDate = new Date(b.time_played);\n                if(aDate > bDate){\n                    return -1;\n                }\n                if(aDate < bDate){\n                    return 1;\n                }\n                return 0;\n            });\n            for(i = 0; i < self.replays.length; i++){\n                self.replays[i].grade_img = osu.skins.resources[osu.score.GRADES[self.replays[i].grade].small_icn].url;\n            }\n\n            self.replaySearch = new Bloodhound({\n                datumTokenizer: function (datum) {\n                    return Bloodhound.tokenizers.whitespace(datum.playerName);\n                },\n                queryTokenizer: Bloodhound.tokenizers.whitespace,\n                local: self.replays\n            });\n            self.render_replay(self.replays);\n\n\n        });\n        this.current_selection = beatmap;\n        if(highlight_map){\n                this.highlight_beatmap($(\"#\"+md5sum));\n        }\n    },\n    render_replay(replays){\n        var content = Mustache.render(this.replay_selection_template, {replays:replays});\n        this.$replay_section_html.append(content);\n    },\n\n\n    show_selection: function () {\n        if(this.beatmap_count > 0 && this.replay_count > 0){\n            var self = this;\n            database.get_all_keys(database.TABLES.BEATMAPS, function (keys) {\n                self.key_count = keys.length; //even though this should be same as beatmap count just to be safe we will check again\n                for(var i = 0; i < keys.length ; i++){\n                    self.beatmap_keys.push(keys[i]);\n                    var beatmap = new osu.beatmaps.BeatmapPreview(keys[i], function () {\n                        self.processed_count++;\n                        self.songs_processed();\n                    });\n                    self.beatmaps.push(beatmap);\n                }\n            });\n        }\n        if(this.beatmap_count == 0 || this.replay_count == 0){\n            document.getElementById(\"loading\").className = \"hidden\";\n            this.show_main_screen();\n            //document.getElementById(\"no_beatmaps_replays\").className = \"\";\n        }\n    },\n    songs_processed: function () {\n        if(this.key_count == this.processed_count){\n            this.beatmaps.sort(function (a,b) {\n                if (a.title < b.title)\n                    return -1;\n                if (a.title > b.title)\n                    return 1;\n                //if same beatmap order by star difficulty\n                if(a.stars < b.stars){\n                    return -1;\n                }\n                if(a.stars > b.stars){\n                    return 1;\n                }\n                return 0;\n            });\n            for(var i =0; i < this.beatmaps.length; i++){\n                this.render_song(this.beatmaps[i]);\n            }\n            this.beatmapSearch = new Bloodhound({\n                datumTokenizer: function (datum) {\n                    var matchon = datum.title + \" \" + datum.artist + \" \" + datum.tags;\n                    return Bloodhound.tokenizers.whitespace(matchon);\n                },\n                queryTokenizer: Bloodhound.tokenizers.whitespace,\n                local: this.beatmaps\n            });\n            this.show_main_screen();\n        }\n    },\n    show_main_screen: function () {\n        osu.ui.interface.replaycontroller.hideBar();\n        document.getElementById(\"loading\").className = \"hidden\";\n        document.getElementById(\"no_beatmaps_replays\").className = \"hidden\";\n        document.getElementById(\"container\").className = \"\";\n        document.getElementById(\"main_menu\").className = \"\";\n        document.getElementById(\"render_zone\").className = \"hidden\";\n        document.getElementById(\"replay_url_area\").className = \"hidden\";\n        document.getElementById(\"playback_ratio_area\").className = \"hidden\";\n        document.getElementById(\"open_config_button_other\").className = \"hidden\";\n\n        this.$asset_server_url.val(osu.settings.SETTINGS.asset_server);\n        this.$song_server_url.val(osu.settings.SETTINGS.song_url);\n\n        if(this.$footer.css('display') =='none'){\n            this.$footer.toggle(\"slide\", {direction: \"down\"});\n        }\n\n        if(this.$replay_section_html.css('display') == \"none\"){\n            this.$replay_section_html.toggle(\"slide\", {direction: \"left\"});\n        }\n        if(this.$title_and_search.css('display') == \"none\"){\n            this.$title_and_search.toggle(\"slide\", {direction: \"up\"});\n        }\n        if(this.$details_replay_search.css('display') == \"none\"){\n            this.$details_replay_search.toggle(\"slide\", {direction: \"up\"});\n        }\n        if(this.$beatmap_section_html.css('display') == \"none\"){\n            this.$beatmap_section_html.toggle(\"slide\", {direction: \"right\"}); //right looks broken\n        }\n\n        this.$skin_select.empty();\n        this.$skin_select.append('<option value=\"0\">Default</option>');\n        for(var i = 0; i < osu.skins.skins.length; i++){\n            this.$skin_select.append('<option value=\"'+ osu.skins.skins[i].md5sum +'\">'+ osu.skins.skins[i].name  +'</option>')\n        }\n        this.$skin_select.val(osu.settings.SETTINGS.selected_skin);\n\n\n        this.$footer.find('#skin_settings').attr('style','');\n        this.$footer.find('#skin_select_field').attr('style','');\n        this.loaded = true;\n        this.displaying_main_screen = true;\n        if(!this.current_selection && this.beatmaps.length){\n            //select random beatmap\n            this.select_beatmap(this.beatmaps[Math.floor(Math.random()*this.beatmaps.length)].md5sum, true);\n        }else if(this.beatmaps.length){\n            this.current_selection.load_background();\n        }\n        this.$beatmap_search_field.focus();\n\n        if(!this.launched_replay_from_url){\n            //We need to wait for mainscreen to load before we try launch replay as it can prevent the replay from every actually loading\n            //once we have loaded it atleast once we wont try again\n            this.launched_replay_from_url = true;\n            this.launchReplayFromURL();\n        }\n\n    },\n    hide_main_screen: function () {\n        console.log(this.$footer.css('display'));\n        if(this.$footer.css('display') !='none'){\n            this.$footer.toggle(\"slide\", {direction: \"down\"});\n        }\n        if(this.$beatmap_section_html.css('display') != \"none\"){\n            this.$beatmap_section_html.toggle(\"slide\", {direction: \"right\"});\n        }\n        if(this.$replay_section_html.css('display') != \"none\"){\n            this.$replay_section_html.toggle(\"slide\", {direction: \"left\"});\n        }\n        if(this.$title_and_search.css('display') != \"none\"){\n            this.$title_and_search.toggle(\"slide\", {direction: \"up\"});\n        }\n        if(this.$details_replay_search.css('display') != \"none\"){\n            this.$details_replay_search.toggle(\"slide\", {direction: \"up\"});\n        }\n        this.displaying_main_screen = false;\n    },\n\n    set_background: function (background_data) {\n        document.body.style.background = \"url(\"+background_data+\") no-repeat center fixed\";\n        document.body.style.backgroundSize = \"100% 100%\";\n    },\n    remove_background: function () {\n        document.body.style.background = \"\";\n    },\n    display_new_song: function (md5sum) {\n\n        if(this.displaying_main_screen){\n            //make main selection\n\n        }\n    },\n\n    load_song: function (md5sum) {\n        var self = this;\n        var curr_length = this.beatmaps.length;\n        var beatmap = new osu.beatmaps.BeatmapPreview(md5sum, function () {\n            self.render_song(self.beatmaps[curr_length+1]); //some reason we havent finished loading on this callback ??\n            self.display_new_song(md5sum);\n        });\n        this.beatmaps.push(beatmap);\n        this.beatmap_keys.push(md5sum);\n    },\n\n    render_song: function (beatmap) {\n        var content = Mustache.render(this.beatmap_selection_template, {beatmaps:beatmap});\n        this.$beatmap_section_html.append(content);\n    },\n\n    on_load_file: function (data) {\n        if(!this.loaded){\n            this.init();\n        }\n        else {\n            for(var i = 0; i < data.md5sums.length; i++){\n                if(this.beatmap_keys.indexOf(data.md5sums[i]) == -1){\n                    this.load_song(data.md5sums[i])\n                }\n            };\n\n        }\n    }\n\n};\n\r\n/**\n * osu_game.js\n * Created by Ugrend on 5/06/2016.\n */\n\n\n/*\n\n Main Game Window AKA: Spaghetti Monster\n\n x ranges from 0 to 512 (inclusive) and y ranges from 0 to 384 (inclusive).\n\n\n 4:3 aspect ratio\n */\n\n\nvar osu = osu || {};\nosu.ui = osu.ui || {};\nosu.ui.interface = osu.ui.interface || {};\nosu.ui.interface.osugame = {\n\n\n    master_container: new PIXI.Container(),\n    offSetDetails: null,\n    replay_data: [],\n    key_1_count: 0,\n    key_2_count: 0,\n    key_3_count: 0,\n    key_4_count: 0,\n    key_1_pressed: false,\n    key_2_pressed: false,\n    key_3_pressed: false,\n    key_4_pressed: false,\n    beatmap: {},\n    expected_replay_movment_time: null,\n    gone_over: 0,\n    has_started: false,\n    audioLeadIn: 0,\n    countdown_started: false,\n    curr_replay_frame: 0,\n    mods: [],\n    oldest_object_position: 0,\n    oldestReplayFrame:0,\n    replay_intro_time: -1,\n    end_skip_frame: -1,\n    skip_frames: [],\n    flash_count: 0,\n    warning_arrow_times: [],\n    break_times: [],\n    replay_played_by_text: \"\",\n    hit_objects: [],\n    events_bound: false,\n    curMapTime:0,\n    replayDiff:0,\n    delayEnd: 0,\n    finished: false,\n    keyPresses: [],\n    currentKeyPress: 0,\n    lasthit_id: 1000,\n    paused: false,\n    paused_time: 0,\n    starting_pos: 0,\n    playbackMulti: 1,\n    modPlayBackMulti: 1,\n\n    getPlayBackMulti: function () {\n        return this.modPlayBackMulti * this.playbackMulti;\n    },\n\n    currentMap: function () {\n        return this.beatmap;\n    },\n\n    currentReplay: function () {\n        return this.replay_data;\n    },\n\n    currentHitObjects: function () {\n        return this.hit_objects;\n    },\n\n    calculateLetterBox: function () {\n        var x = osu.ui.renderer.renderWidth;\n        var y = osu.ui.renderer.renderHeight;\n        var fixed_ratio_y = (3 / 4) * x;\n        var fixed_ratio_x = (4 / 3) * y;\n        var details = {\n            width: x,\n            height: y,\n            x_offset: 0,\n            y_offset: 0\n        };\n\n        if (fixed_ratio_y > y) {\n            //if we increasing y bigger than the screen we need to make x smaller\n            details.width = fixed_ratio_x;\n        }\n        else {\n            details.height = fixed_ratio_y;\n        }\n        details.x_offset = (x - details.width)/2 || 0;\n        details.y_offset = (y - details.height)/2 || 0;\n        return details;\n\n    },\n\n    getRenderWidth: function () {\n        return osu.ui.renderer.renderWidth;\n    },\n    getRenderHeight: function () {\n        return osu.ui.renderer.renderHeight;\n    },\n    create_dimmer: function () {\n\n\n        this.background_dimmer = this.background_dimmer || new PIXI.Container();\n        this.background_dimmer.removeChildren();\n        var dimmer = new PIXI.Graphics();\n        dimmer.beginFill(0x0, osu.settings.SETTINGS.background_dim);\n        dimmer.drawRect(0, 0, this.getRenderWidth(), this.getRenderHeight());\n        this.background_dimmer.addChild(dimmer);\n\n\n    },\n    create_background: function () {\n\n        this.beatmap.background = this.beatmap.background || \"\"; //prevent pixi breaking on undefined background\n        var background = PIXI.Texture.fromImage(this.beatmap.background);\n        var background_sprite = new PIXI.Sprite(background);\n        background_sprite.width = this.getRenderWidth();\n        background_sprite.height = this.getRenderHeight();\n        this.master_container.addChild(background_sprite);\n\n        this.create_dimmer();\n        this.master_container.addChild(this.background_dimmer);\n\n\n    },\n\n    create_pause_screen_container: function () {\n        this.pauseScreenContainer = new PIXI.Container();\n        this.pauseScreenContainer.visible = false;\n        var overlayTexture = osu.skins.resources.pause_overlay.texture;\n        this.overlaySprite = new PIXI.Sprite(overlayTexture);\n        this.overlaySprite.width = this.getRenderWidth();\n        this.overlaySprite.height = this.getRenderHeight();\n        this.pauseScreenContainer.addChild(this.overlaySprite);\n\n\n        var resumeButtonTexture = osu.skins.resources.pause_continue.texture;\n        this.resumeButtonSprite = new PIXI.Sprite(resumeButtonTexture);\n        this.resumeButtonSprite.position.x = this.getRenderWidth() /2;\n        this.resumeButtonSprite.position.y = this.getRenderHeight() *.26;\n        this.resumeButtonSprite.anchor.set(0.5);\n        this.resumeButtonSprite.interactive = true;\n        this.resumeButtonSprite.on(\"mouseup\", this.toggle_pause.bind(this));\n        this.resumeButtonSprite.on(\"touchend\", this.toggle_pause.bind(this));\n        this.pauseScreenContainer.addChild(this.resumeButtonSprite);\n\n\n        var backButtonTexture = osu.skins.resources.pause_back.texture;\n        this.backButtonSprite = new PIXI.Sprite(backButtonTexture);\n        this.backButtonSprite.position.x = this.getRenderWidth() /2;\n        this.backButtonSprite.position.y = this.getRenderHeight() *.74;\n        this.backButtonSprite.anchor.set(0.5);\n        this.backButtonSprite.interactive = true;\n        this.backButtonSprite.on(\"mouseup\", this.end_replay.bind(this));\n        this.backButtonSprite.on(\"touchend\", this.end_replay.bind(this));\n\n        this.pauseScreenContainer.addChild(this.backButtonSprite);\n\n\n\n\n        this.master_container.addChild(this.pauseScreenContainer);\n    },\n\n    tint_untint_key: function (key, do_tint) {\n        if (do_tint) {\n            key.scale = {x:1.1,y:1.1};\n            key.tint = 0xFFFF00;\n        }\n        else {\n            key.scale = {x:1,y:1};\n            key.tint = 0xFFFFFF;\n        }\n    },\n    create_key_press: function () {\n        this.keypress_area = new PIXI.Container();\n        var keypress_texture = osu.skins.resources.inputoverlay_key.texture;\n        this.keypress_1 = new PIXI.Sprite(keypress_texture);\n        this.keypress_2 = new PIXI.Sprite(keypress_texture);\n        this.keypress_3 = new PIXI.Sprite(keypress_texture);\n        this.keypress_4 = new PIXI.Sprite(keypress_texture);\n        //TODO: Style text\n        var style = {font : '14px Arial'}\n        this.keypress_1_Text = new PIXI.Text(this.key_1_count > 0 && this.key_1_count.toString() || \"K1\",style);\n        this.keypress_2_Text = new PIXI.Text(this.key_2_count > 0 && this.key_2_count.toString() || \"K2\",style);\n        this.keypress_3_Text = new PIXI.Text(this.key_3_count > 0 && this.key_3_count.toString() || \"M1\",style);\n        this.keypress_4_Text = new PIXI.Text(this.key_4_count > 0 && this.key_4_count.toString() || \"M2\",style);\n\n        this.keypress_1.tint = 0xFFFF00;\n\n\n        this.keypress_1.x = this.getRenderWidth() - 40;\n        this.keypress_1.y = this.getRenderHeight() / 2 - 55;\n        this.keypress_1.anchor.set(0.5);\n        this.keypress_1_Text.anchor.set(0.5);\n        this.keypress_1_Text.x = this.keypress_1.x;\n        this.keypress_1_Text.y = this.keypress_1.y;\n\n\n        this.keypress_2.x = this.getRenderWidth() - 40;\n        this.keypress_2.y = this.getRenderHeight() / 2;\n        this.keypress_2.anchor.set(0.5);\n        this.keypress_2_Text.anchor.set(0.5);\n        this.keypress_2_Text.x = this.keypress_2.x;\n        this.keypress_2_Text.y = this.keypress_2.y;\n\n        this.keypress_3.x = this.getRenderWidth() - 40;\n        this.keypress_3.y = this.getRenderHeight() / 2 + 55;\n        this.keypress_3.anchor.set(0.5);\n        this.keypress_3_Text.anchor.set(0.5);\n        this.keypress_3_Text.x = this.keypress_3.x;\n        this.keypress_3_Text.y = this.keypress_3.y;\n\n        this.keypress_4.x = this.getRenderWidth() - 40;\n        this.keypress_4.y = this.getRenderHeight() / 2 + 110;\n        this.keypress_4.anchor.set(0.5);\n        this.keypress_4_Text.anchor.set(0.5);\n        this.keypress_4_Text.x = this.keypress_4.x;\n        this.keypress_4_Text.y = this.keypress_4.y;\n\n\n        this.keypress_area.addChild(this.keypress_1);\n        this.keypress_area.addChild(this.keypress_2);\n        this.keypress_area.addChild(this.keypress_3);\n        this.keypress_area.addChild(this.keypress_4);\n        this.keypress_area.addChild(this.keypress_1_Text);\n        this.keypress_area.addChild(this.keypress_2_Text);\n        this.keypress_area.addChild(this.keypress_3_Text);\n        this.keypress_area.addChild(this.keypress_4_Text);\n\n        this.master_container.addChild(this.keypress_area);\n\n\n    },\n    create_cursor: function () {\n        this.cursor = new PIXI.Container();\n        var cursor_texture = osu.skins.resources.cursor.texture;\n        var cursor_middle_texture = osu.skins.resources.cursormiddle.texture;\n        var cursor_sprite = new PIXI.Sprite(cursor_texture);\n        var cursor_middle_sprite = new PIXI.Sprite(cursor_middle_texture);\n\n        cursor_sprite.anchor.set(0.5);\n        cursor_middle_sprite.anchor.set(0.5);\n\n        this.cursor.addChild(cursor_sprite);\n        this.cursor.addChild(cursor_middle_sprite);\n        this.cursor.x = this.getRenderWidth() / 2;\n        this.cursor.y = this.getRenderHeight() / 2;\n        this.master_container.addChild(this.cursor);\n    },\n    create_skip_container: function () {\n        this.skip_container = new PIXI.Container();\n\n        var skipFrames = [];\n        if(osu.skins.resources.play_skip_0){\n            for(var i = 0 ; i< 99; i++){\n                if(osu.skins.resources[\"play_skip_\"+i]){\n                    skipFrames.push(osu.skins.resources[\"play_skip_\"+i].texture);\n                }else{\n                    break;\n                }\n            }\n        }else{\n            skipFrames.push(osu.skins.resources.play_skip.texture);\n        }\n\n        var skipAnimation = new PIXI.extras.MovieClip(skipFrames);\n        skipAnimation.anchor.set(0.5);\n        skipAnimation.x = this.calculate_x(512);\n        skipAnimation.y = this.calculate_y(384);\n        skipAnimation.interactive = true;\n        skipAnimation.on(\"mouseup\", this.skip_intro.bind(this));\n        skipAnimation.animationSpeed = 0.1;\n        skipAnimation.play();\n        this.skip_container.visible = false;\n\n        this.skip_container.addChild(skipAnimation);\n        this.master_container.addChild(this.skip_container);\n\n    },\n    create_play_warn_arrows_container: function () {\n        this.arrow_container = new PIXI.Container();\n        var arrow_texture =  osu.skins.resources.play_warningarrow.texture;\n        var skip_arrow_sprite_1 = new PIXI.Sprite(arrow_texture);\n        var skip_arrow_sprite_2 = new PIXI.Sprite(arrow_texture);\n        var skip_arrow_sprite_3 = new PIXI.Sprite(arrow_texture);\n        var skip_arrow_sprite_4 = new PIXI.Sprite(arrow_texture);\n        skip_arrow_sprite_1.anchor.set(0.5);\n        skip_arrow_sprite_2.anchor.set(0.5);\n        skip_arrow_sprite_3.anchor.set(0.5);\n        skip_arrow_sprite_4.anchor.set(0.5);\n        skip_arrow_sprite_1.x = this.calculate_x(25);\n        skip_arrow_sprite_1.y = this.calculate_y(19);\n        skip_arrow_sprite_2.scale.x = -1; //flip arrow\n        skip_arrow_sprite_2.x = this.calculate_x(487);\n        skip_arrow_sprite_2.y = this.calculate_y(19);\n\n\n        skip_arrow_sprite_3.x = this.calculate_x(25);\n        skip_arrow_sprite_3.y = this.calculate_y(365);\n        skip_arrow_sprite_4.scale.x = -1; //flip arrow\n        skip_arrow_sprite_4.x = this.calculate_x(487);\n        skip_arrow_sprite_4.y = this.calculate_y(365);\n\n\n        this.arrow_container.addChild(skip_arrow_sprite_1);\n        this.arrow_container.addChild(skip_arrow_sprite_2);\n        this.arrow_container.addChild(skip_arrow_sprite_3);\n        this.arrow_container.addChild(skip_arrow_sprite_4);\n        this.arrow_container.visible = false;\n        this.master_container.addChild(this.arrow_container);\n\n    },\n    create_success_container: function () {\n        this.success_container = new PIXI.Container();\n        var success_texture =  osu.skins.resources.section_pass.texture;\n        var success_sprite = new PIXI.Sprite(success_texture);\n        success_sprite.anchor.set(0.5);\n        success_sprite.x = this.getRenderWidth() / 2;\n        success_sprite.y = this.getRenderHeight() / 2;\n        this.success_container.visible = false;\n        this.success_container.addChild(success_sprite);\n        this.master_container.addChild(this.success_container);\n    },\n    create_fail_container: function () {\n        this.fail_container = new PIXI.Container();\n        var fail_texture = osu.skins.resources.section_fail.texture;\n        var fail_sprite = new PIXI.Sprite(fail_texture);\n        fail_sprite.anchor.set(0.5);\n        fail_sprite.x = this.getRenderWidth() / 2;\n        fail_sprite.y = this.getRenderHeight() / 2;\n        this.fail_container.visible = false;\n        this.fail_container.addChild(fail_sprite);\n        this.master_container.addChild(this.fail_container);\n    },\n    create_replay_by_text: function () {\n        this.replay_text = new PIXI.Text(this.replay_played_by_text, {\n            font: Math.round((osu.ui.renderer.renderHeight + osu.ui.renderer.renderWidth)/150) +\"px Arial\",\n            fill: \"#FFFFFF\"\n        });\n        this.replay_text.y = this.getRenderHeight() * .18;\n        this.replay_text.x = this.getRenderWidth() / 2;\n        this.master_container.addChild(this.replay_text);\n    },\n    create_mod_container: function () {\n        for (var i = 0; i < this.mods.length; i++) {\n            if (this.mods[i].icon != \"\") {\n                var modpng = osu.skins.resources[this.mods[i].icon].texture;\n                var modSprite = new PIXI.Sprite(modpng);\n                modSprite.position.y = this.getRenderHeight() *.22;\n                modSprite.position.x = (this.getRenderWidth() * .95) - (i * 50);\n                modSprite.anchor.set(0.5);\n                this.master_container.addChild(modSprite);\n            }\n        }\n    },\n    create_settings_icon_container: function () {\n        this.settingIconContainer = new PIXI.Container();\n        var settingsTexture = new PIXI.Texture.fromImage(\"data/settings.png\");\n        var settingsSprite = new PIXI.Sprite(settingsTexture);\n        settingsSprite.anchor.set(1);\n        settingsSprite.x = this.getRenderWidth();\n        settingsSprite.y = this.getRenderHeight();\n        settingsSprite.alpha = 0.9;\n        settingsSprite.interactive = true;\n        settingsSprite.on(\"mouseup\", this.toggle_settings.bind(this));\n        this.settingIconContainer.addChild(settingsSprite);\n\n        this.master_container.addChild(this.settingIconContainer);\n    },\n    create_timer_container: function () {\n        this.timerX = this.getRenderWidth() - (this.getRenderWidth()*.115);\n        this.timerY = this.getRenderHeight() * .13;\n        var timerContainer = new PIXI.Container();\n        var baseCircle = new PIXI.Graphics();\n        baseCircle.lineStyle(4,0xFFFFFF);\n        baseCircle.beginFill(0x0,0);\n        baseCircle.drawCircle(0, 0,25);\n        baseCircle.beginFill(0xFFFFFF,2);\n        baseCircle.drawCircle(0,0,1);\n        var baseCircleTexture = baseCircle.generateTexture();\n        var baseCircleSprite = new PIXI.Sprite(baseCircleTexture);\n        baseCircleSprite.position.x = this.timerX;\n        baseCircleSprite.position.y = this.timerY;\n        baseCircleSprite.anchor.set(0.5);\n\n        this.timerMask = new PIXI.Graphics();\n        this.timerPie = new PIXI.Graphics();\n        this.timerPie.mask = this.timerMask;\n        this.timerPie.beginFill(0xB4B4B2,0.8);\n        this.timerPie.drawCircle(this.timerX, this.timerY,25);\n        this.timerPie.endFill();\n\n        timerContainer.addChild(this.timerPie);\n        timerContainer.addChild(baseCircleSprite);\n        this.master_container.addChild(timerContainer);\n\n    },\n\n    update_timer_percentage(percentage, colour){\n        //http://jsfiddle.net/asoyaqud/17/\n        var createPoint = function(x,y) { return {x:x,y:y}; };\n        var rotateXY = function(x,y,angle) {\n            var rad = Math.PI * angle/180;\n            var cosVal = Math.cos(rad);\n            var sinVal = Math.sin(rad);\n            return createPoint(cosVal*x - sinVal*y,\n                sinVal*x + cosVal*y);\n        };\n        var computeMaskPolygon = function(x,y,radius,angle) {\n            while(angle<0)\n                angle += 360;\n            angle%=360;\n\n            var delta = rotateXY(0, -2*radius, angle);\n            var pts = [createPoint(x,y-2*radius),\n                createPoint(x,y),\n                createPoint(x+delta.x, y+delta.y)];\n\n            if(angle > 270)\n                pts.push(createPoint(x-2*radius,y));\n            if(angle > 180)\n                pts.push(createPoint(x,y+2*radius));\n            if(angle > 90)\n                pts.push(createPoint(x+2*radius,y));\n\n            return pts;\n        };\n        this.timerPie.clear();\n        this.timerPie.beginFill(colour,0.8);\n        this.timerPie.drawCircle(this.timerX, this.timerY,25);\n        this.timerPie.endFill();\n\n        this.timerMask.clear();\n        var angle = percentage*360;\n        if(angle >= 360) angle = 359.9;\n\n        var pts = computeMaskPolygon(this.timerX, this.timerY, 25, angle);\n        this.timerMask.beginFill(0xFFFFFF);\n        this.timerMask.moveTo(pts[0].x, pts[0].y);\n        for(var i=1;i<pts.length;++i) {\n            this.timerMask.lineTo(pts[i].x, pts[i].y);\n        }\n        this.timerMask.lineTo(pts[0].x, pts[0].y);\n        this.timerMask.endFill();\n    },\n\n    createSmokeContainer: function () {\n        this.smokeContainer = new PIXI.Container();\n        this.master_container.addChild(this.smokeContainer);\n    },\n\n    createScoreContainer: function () {\n\n        var style = { font: 'bold '+Math.round((osu.ui.renderer.renderHeight + osu.ui.renderer.renderWidth)/36)+'px Arial', fill: '#FFFFFF', align: 'center', stroke: '#000000', strokeThickness: 6 };\n        this.scoreText = new PIXI.Text(\"0\",style);\n        this.scoreText.anchor.set(1,0);\n        this.scoreText.y = 0 ;\n        this.scoreText.x = this.getRenderWidth()  ;\n        this.comboText = new PIXI.Text(\"0X\",style);\n        this.comboText.anchor.set(0,1);\n        this.comboText.y = this.getRenderHeight() *.95;\n\n        var style = { font: 'bold 50px Arial', fill: '#FFFFFF', align: 'center', stroke: '#000000', strokeThickness: 6 };\n        this.accuracyText = new PIXI.Text(\"0.00%\",style);\n        this.accuracyText.anchor.set(1,0.5);\n        this.accuracyText.y = this.getRenderHeight() * .13 ;\n        this.accuracyText.x = this.getRenderWidth()  ;\n\n        var scoreContainer = new PIXI.Container();\n        scoreContainer.addChild(this.scoreText);\n        scoreContainer.addChild(this.comboText);\n        scoreContainer.addChild(this.accuracyText);\n        this.master_container.addChild(scoreContainer);\n    },\n\n    create_master_container: function () {\n\n        this.master_container.removeChildren();\n        this.hit_object_container = new PIXI.Container();\n\n        this.create_background();\n        this.create_key_press();\n        this.create_mod_container();\n        this.create_replay_by_text();\n        this.create_timer_container();\n        this.createSmokeContainer();\n        this.createScoreContainer();\n        this.master_container.addChild(this.hit_object_container);\n        this.create_skip_container();\n        this.create_success_container();\n        this.create_fail_container();\n        this.create_play_warn_arrows_container();\n        this.create_cursor();\n        this.create_pause_screen_container();\n        //this.create_settings_icon_container();\n\n    },\n    flash_warning_arrows: function () {\n        if (this.flash_count < 15) {\n            var self = this;\n            setTimeout(function () {\n                self.arrow_container.visible = !self.arrow_container.visible;\n                self.flash_count++;\n                self.flash_warning_arrows()\n            }, 150);\n\n        } else {\n            this.arrow_container.visible = false;\n            this.flash_count = 0;\n        }\n\n    },\n    show_success: function () {\n        this.success_container.visible = true;\n        osu.audio.sound.play_sound(osu.audio.sound.SECTIONPASS);\n        var self = this;\n        setTimeout(function () {\n            self.success_container.visible = false;\n        }, 4000);\n    },\n    show_failure: function () {\n        this.fail_container.visible = true;\n        var self = this;\n        setTimeout(function () {\n            self.fail_container.visible = false;\n        }, 4000);\n    },\n    end_replay: function () {\n        this.finished = true;\n        this.has_started = false;\n        osu.ui.interface.mainscreen.show_main_screen();\n    },\n    bind_events: function () {\n        if (!this.events_bound) {\n            event_handler.on(event_handler.EVENTS.SETTINGS_CHANGED, this.create_dimmer.bind(this));\n            event_handler.on(event_handler.EVENTS.STOP_REPLAY, this.toggle_pause.bind(this));\n            this.events_bound = true;\n        }\n\n    },\n    /*osu coords are 512/384 but we dont want 0,512/etc to appear almost off screen\n     So instead will devide by a bigger but same aspect ratio and increase the original x/y by the difference/2\n     */\n    calculate_x: function (x) {\n        x = parseInt(x);\n        var result = ((this.offSetDetails.width / 640) * (x + 64)) +this.offSetDetails.x_offset ;\n        return result;\n    },\n    calculate_y: function (y) {\n        y = parseInt(y);\n        return ((this.offSetDetails.height / 480) * (y + 48)) +this.offSetDetails.y_offset;\n    },\n    calculate_original_x: function (x) {\n        x = parseInt(x);\n        return (x + 64) / (this.offSetDetails.width / 640) ;\n\n    },\n    calculate_original_y: function (y) {\n        y = parseInt(y);\n        return   (y + 48) / (this.getRenderHeight() / 480);\n    },\n\n    toggle_settings(){\n        this.$footer.find('#skin_settings').css('display','none');\n        this.$footer.find('#skin_select_field').css('display','none');\n        this.$footer.css('background', 'rgba(0,0,0,0.6');\n        this.$footer.slideToggle();\n\n    },\n    hide_settings(){\n        if(this.$footer.css('display') == \"none\"){\n            this.$footer.slideToggle();\n        }\n    },\n\n    initGame: function () {\n        osu.ui.interface.replaycontroller.bindEvents();\n        //reset pause so we dont incorrectly think we are paused\n        this.playbackMulti = 1;\n        $(\"#replay_playback_speed\").val(1);\n        this.modPlayBackMulti = 1;\n        this.paused = false;\n        this.paused_time = 0;\n        event_handler.off(event_handler.EVENTS.RENDER, \"replay_text\"); //unsubscrbe incase another replay closed early\n        this.currentKeyPress = 0;\n        this.key_1_count = 0;\n        this.key_2_count = 0;\n        this.key_3_count = 0;\n        this.key_4_count = 0;\n        this.$footer = osu.ui.interface.mainscreen.$footer || $(\"#footer\");\n        this.$footer.attr('style','');\n        this.$footer.css('display', 'none');\n        osu.ui.renderer.start();\n        this.offSetDetails = this.calculateLetterBox();\n        this.create_master_container();\n        osu.ui.renderer.clearStage();\n        osu.ui.renderer.addChild(this.master_container);\n        this.bind_events();\n        this.curMapTime = 0;\n        this.has_started = false;\n        this.countdown_started = false;\n        this.curr_replay_frame = 0;\n        this.expected_replay_movment_time = null;\n        this.oldest_object_position = 0;\n        this.warning_arrow_times = [];\n        this.is_hidden = false;\n        this.is_hardrock = false;\n        this.is_easy = false;\n        this.oldestReplayFrame = 0;\n        this.is_halftime = false;\n        this.is_doubletime = false;\n        this.replayDiff = 0;\n        this.break_times = [];\n        this.warning_arrow_times =[];\n        this.delayEnd = 0;\n        this.finished = false;\n        var modMulti = 1;\n        for (var i = 0; i < this.mods.length; i++) {\n            var mod = this.mods[i].code;\n            modMulti *= this.mods[i].multi;\n            if (mod == \"HD\") this.is_hidden = true;\n            if (mod == \"HR\") this.is_hardrock = true;\n            if (mod == \"EZ\") this.is_easy = true;\n            if (mod == \"DT\" || mod == \"NT\") this.is_doubletime = true;\n            if (mod == \"HT\") this.is_halftime = true;\n\n        }\n        if(this.is_doubletime){\n            this.modPlayBackMulti *= osu.helpers.constants.DOUBLE_TIME_MULTI;\n        }\n        if(this.is_halftime){\n            this.modPlayBackMulti *= osu.helpers.constants.HALF_TIME_MULTI;\n        }\n\n\n        for (i = 0; i < this.beatmap.map_data.events.length; i++) {\n            //2 looks to be breaks\n            if (this.beatmap.map_data.events[i][0] == \"2\") {\n                var startTime = parseInt(this.beatmap.map_data.events[i][1]);\n                var endTime = parseInt(this.beatmap.map_data.events[i][2]) - 2300;\n                this.break_times.push({t:startTime, played:false});\n                this.warning_arrow_times.push({t:endTime, played:false});\n            }\n        }\n        var comboNum = 0;\n        var comboColour = 0;\n        var approachRate = parseInt(this.beatmap.map_data.difficulty.ApproachRate) || 7;\n        var overallDifficulty = this.beatmap.map_data.difficulty.OverallDifficulty;\n        var difficultyCircleSize = parseInt(this.beatmap.map_data.difficulty.CircleSize);\n        var hpDrain = parseInt(this.beatmap.map_data.difficulty.HPDrainRate);\n        this.sliderMultiplier = parseFloat(this.beatmap.map_data.difficulty.SliderMultiplier || 1);\n        this.sliderTickRate = parseFloat(this.beatmap.map_data.difficulty.SliderTickRate || 1);\n        this.performance = new osu.game.Perforamnce(overallDifficulty+difficultyCircleSize+hpDrain,modMulti,hpDrain);\n\n\n        if (this.is_hardrock) {\n            approachRate *=  osu.helpers.constants.HR_DIFFICULTY_MULTI;\n            overallDifficulty *= osu.helpers.constants.HR_DIFFICULTY_MULTI;\n        }\n        if (this.is_easy){\n            approachRate *= osu.helpers.constants.EZ_DIFFICULTY_MULTI;\n            overallDifficulty *= osu.helpers.constants.EZ_DIFFICULTY_MULTI;\n        }\n        approachRate = Math.min(approachRate,10);\n        overallDifficulty = Math.min(overallDifficulty,10);\n\n\n\n\n\n        if (this.is_hardrock && difficultyCircleSize < 7) difficultyCircleSize += 1;\n        if (this.is_easy && difficultyCircleSize > 1) difficultyCircleSize -= 1; //TODO: work out if that's correct\n        //TODO: try work this out, osu is registering hits but this size i get misses, so my circles must be slightly smaller or some other calculation (this calc is from opsu)\n        var unScaledDiameter = (108.848 - (difficultyCircleSize * 8.9646)) ;\n        var circleSize = (this.offSetDetails.width / 640) * unScaledDiameter;\n\n        this.approachTime = 0;\n        if (approachRate < 5) {\n            this.approachTime = (1800 - (approachRate * 120))\n        } else {\n            this.approachTime = (1200 - ((approachRate - 5) * 150));\n        }\n        if(!this.beatmap.been_rendered){\n            this.keyPresses = [];\n            this.hit_objects = [];\n            for (i = 0; i < this.beatmap.map_data.hit_objects.length; i++){\n\n                var hitObject = new osu.objects.HitObject(this.beatmap.map_data.hit_objects[i], circleSize, this.approachTime, this);\n                if (comboNum == 0 || hitObject.newCombo) {\n                    comboNum = 1;\n                    if (comboColour == osu.skins.COMBO_COLOURS.length - 1) {\n                        comboColour = 0;\n                    }\n                    else {\n                        comboColour++;\n                    }\n                } else {\n                    comboNum++;\n                }\n                hitObject.colour = osu.skins.COMBO_COLOURS[comboColour];\n                hitObject.combo = comboNum;\n                //https://osu.ppy.sh/wiki/Song_Setup#Overall_Difficulty\n                hitObject.hitOffset = {\n                    HIT_300: 79.5 - (overallDifficulty * 6),\n                    HIT_100: 139.5 - (overallDifficulty * 8),\n                    HIT_50: 199.5 - (overallDifficulty * 10),\n                    HIT_MISS: 500 - (overallDifficulty * 10)\n                };\n\n                this.hit_objects.push(hitObject);\n            }\n            osu.objects.HitObjectParser.create_stacks(this.hit_objects, parseFloat(this.beatmap.map_data.general.StackLeniency) || 0.7, unScaledDiameter, this.is_hardrock);\n            this.keyPresses = osu.calculateReplay(this.hit_objects,this.replay_data, unScaledDiameter);\n            osu.objects.HitObjectParser.initialiseHitObjects(this.hit_objects);\n            osu.objects.HitObjectParser.calculate_follow_points(this.hit_objects, this);\n\n            this.beatmap.been_rendered = true;\n        }else{\n            for(var i = 0; i < this.hit_objects.length; i++){\n                this.hit_objects[i].reset();\n            }\n\n        }\n\n\n\n\n\n\n        this.audioLeadIn = parseInt(this.beatmap.map_data.general.AudioLeadIn);\n\n\n        //calculate x,y prior as processing slowly casues it to get out of sync\n        //might have to calculate replay times as time passed, as it is starting to get out of sync\n\n        if (!replay.been_rendered) {\n            for (var i = 0; i < this.replay_data.length; i++) {\n                //This is a workaround yay :D\n                this.replay_data[i].orig_x = this.replay_data[i].x;\n                this.replay_data[i].orig_y = this.replay_data[i].y;\n                this.replay_data[i].orig_t = this.replay_data[i].t;\n\n                this.replay_data[i].x = this.calculate_x(this.replay_data[i].x);\n                this.replay_data[i].y = this.calculate_y(this.replay_data[i].y);\n\n\n            }\n            replay.been_rendered = true;\n        }\n\n        this.skip_frames = [];\n\n\n\n        var skipFrame = this.replay_data[1];\n\n        this.skipTime = -1;\n\n        if(skipFrame.t > 0){\n            //im not sure how this works anymore but this fixed a problem so yeh\n            if (this.replay_data[2].t > 0) {\n                this.replayDiff = this.replay_data[2].t * -1;\n            }\n            this.skipTime = parseInt(skipFrame.t);\n            this.warning_arrow_times.push({t:this.skipTime, played:false});\n        }\n        else{\n            if (this.replay_data[2].t < 0) {\n                this.replayDiff = this.replay_data[2].t * -1;\n                if (this.audioLeadIn == 0) {\n                    this.audioLeadIn =  this.replayDiff;\n                }\n\n            }\n\n        }\n        osu.ui.interface.replaycontroller.set_duration(this.beatmap.map_data.time_length+2000);\n        this.delayEnd = this.beatmap.map_data.time_length + 2500;\n        osu.ui.interface.replaycontroller.enable_progressbar();\n        osu.ui.interface.replaycontroller.showPauseIcon();\n        event_handler.on(event_handler.EVENTS.RENDER, this.move_replay_text.bind(this), \"replay_text\")\n\n\n    },\n\n    move_replay_text: function () {\n        if(!this.paused){\n            if (this.replay_text.x < (-this.replay_text.width + 5)) {\n                this.replay_text.x = this.getRenderWidth();\n            }\n            this.replay_text.x -= 2;\n        }\n\n    },\n\n    renderKeyPress: function () {\n        for(var i = this.currentKeyPress; i < this.keyPresses.length; i++){\n            //is this getting looped over when we skip?\n            if(this.paused){\n                break;\n            }\n            var keyPress = this.keyPresses[i];\n            var t = keyPress.t;\n            if(t <= this.curMapTime){\n                var tint_1 = keyPress.K1;\n                var tint_2 = keyPress.K2;\n                var tint_3 = keyPress.M1;\n                var tint_4 = keyPress.M2;\n                this.tint_untint_key(this.keypress_1,tint_1);\n                this.tint_untint_key(this.keypress_2,tint_2);\n                this.tint_untint_key(this.keypress_3,tint_3);\n                this.tint_untint_key(this.keypress_4,tint_4);\n                this.currentKeyPress = i;\n                if(keyPress.REPLAYHIT && this.lasthit_id != keyPress.ID){\n                    if(keyPress.K1){\n                        this.key_1_count++;\n                    }\n                    if(keyPress.K2){\n                        this.key_2_count++;\n                    }\n                    if(keyPress.M1){\n                        this.key_3_count++;\n                    }\n                    if(keyPress.M2){\n                        this.key_4_count++;\n                    }\n                    this.keypress_1_Text.text = (this.key_1_count > 0 && this.key_1_count.toString() || \"K1\");\n                    this.keypress_2_Text.text = (this.key_2_count > 0 && this.key_2_count.toString() || \"K2\");\n                    this.keypress_3_Text.text = (this.key_3_count > 0 && this.key_3_count.toString() || \"M1\");\n                    this.keypress_4_Text.text = (this.key_4_count > 0 && this.key_4_count.toString() || \"M2\");\n                    this.lasthit_id = keyPress.ID;\n                }\n\n                if(keyPress.SMOKE){\n                    var pos = this.getCursorPos();\n                    //set pos in frame so we can check distance next frame;\n                    keyPress.x = pos.x;\n                    keyPress.y = pos.y;\n                    //draw smoke to current pos so that its not patchy\n                    if(i>0){\n                        var lastKey = this.keyPresses[i-1];\n                        if(lastKey.SMOKE){\n\n                            var xDiff = keyPress.x - lastKey.x;\n                            var yDiff = keyPress.y - lastKey.y;\n                            \n                            var distance = osu.helpers.math.distance(keyPress.x, keyPress.y, lastKey.x, lastKey.y);\n                            var numPoints = Math.round(distance / 20);\n                            var steps = 1/(numPoints+1);\n                            var nextStep = steps;\n                            for(var j = 0 ; j < numPoints; j++){\n                                var posX = keyPress.x + (xDiff * nextStep);\n                                var posY = keyPress.y + (yDiff * nextStep);\n                                var smoke = osu.objects.Smoke(posX,posY);\n                                this.smokeContainer.addChild(smoke);\n                                nextStep += steps;\n                            }\n                        }\n                    }\n                    var smoke = osu.objects.Smoke(pos.x,pos.y);\n                    //smoke will be set to invisible after 2.5seconds im not sure if its worth the effort to remove from container\n                    this.smokeContainer.addChild(smoke);\n                }\n            }else{\n                break;\n            }\n\n        }\n\n    },\n\n\n    render_object: function () {\n\n\n\n        var time = this.curMapTime;\n\n\n        for (var x = 0; x < this.warning_arrow_times.length; x++) {\n            if (time > this.warning_arrow_times[x].t + 2000 && !this.warning_arrow_times[x].played) {\n                this.warning_arrow_times[x].played = true;\n                this.flash_warning_arrows();\n                break;\n            }\n        }\n        for (var x = 0; x < this.break_times.length; x++) {\n            if (time > this.break_times[x].t + 1000 && !this.break_times[x].played) {\n                this.break_times[x].played = true;\n                //TODO: check performance to toggle correct break screen\n                this.show_success();\n                break;\n            }\n        }\n\n        for (var i = this.oldest_object_position; i < this.hit_objects.length; i++) {\n            if (this.hit_objects[i].startTime - this.approachTime > time) {\n                break;\n            }\n            //draw will return false if the object has been destroyed\n            //if it has been destroyed we will set the last object count to that pos so we don't iterate over all the objects later on\n            if (!this.hit_objects[i].draw(time)) {\n                //only allow this to icrement by 1 in case a object is still drawing like a slider.\n                if (this.oldest_object_position + 1 == i) {\n                    this.oldest_object_position = i;\n                }\n\n            }\n        }\n        osu.ui.interface.replaycontroller.set_position(this.curMapTime);\n\n        if(this.curMapTime - this.skipTime > 0){\n            this.update_timer_percentage(this.curMapTime/this.beatmap.map_data.time_length, osu.helpers.constants.TIMER_SONG_COLOUR);\n        }\n        \n        if(this.oldest_object_position == this.hit_objects.length -1){\n           if(this.curMapTime >= this.delayEnd){\n               this.finished = true;\n\n               event_handler.off(event_handler.EVENTS.RENDER, \"replay_text\");\n               osu.ui.interface.scorescreen.renderScoreScreen();\n           }\n        }\n\n        this.comboText.text = this.performance.combo + \"X\";\n        this.accuracyText.text = this.performance.accuracy + \"%\";\n        this.scoreText.text = this.performance.score;\n\n    },\n\n    skip_intro: function () {\n        if(this.skipTime && this.curMapTime < this.skipTime){\n            osu.audio.sound.play_sound(osu.audio.sound.MENUHIT);\n            this.go_to(this.skipTime);\n        }\n\n    },\n\n    getCursorPos: function () {\n        return {\n            x: this.cursor.x,\n            y:this.cursor.y\n        }\n    },\n\n    render_replay_frame(){\n        var curTime = this.curMapTime;\n        if(this.skipTime>0) curTime += this.skipTime;\n        for(var i = this.oldestReplayFrame; i < this.replay_data.length; i++){\n            var t = this.replay_data[i].t - this.replayDiff;\n\n            if(t <= 0){\n                var x =this.replay_data[i].x;\n                var y = this.replay_data[i].y;\n                if(x > 0 && y > 0){\n                    this.cursor.x = x;\n                    this.cursor.y = y;\n                    i++;\n                    this.oldestReplayFrame =i;\n                    break;\n                }\n            }\n            if(curTime >= t){\n                var x =this.replay_data[i].x;\n                var y = this.replay_data[i].y;\n                if(x > 0 && y > 0){\n                    this.cursor.x = x;\n                    this.cursor.y = y;\n                    i++;\n                    this.oldestReplayFrame =i;\n                }\n            }else{\n                break;\n            }\n\n        }\n\n    },\n\n    toggle_pause: function () {\n        if(!this.paused){\n            osu.ui.interface.replaycontroller.showPlayIcon();\n\n            this.paused = true;\n            this.pauseScreenContainer.visible = true;\n            if(this.has_started){\n                this.paused_time = Date.now();\n                osu.audio.music.pause();\n            }\n            return;\n        }\n        osu.ui.interface.replaycontroller.showPauseIcon();\n        this.pauseScreenContainer.visible = false;\n        this.paused = false;\n        if(this.has_started){\n            osu.audio.music.play();\n        }\n\n    },\n\n\n    go_to: function (t) {\n        //this will take a time in ms and then go to that point in the map\n        //we need to remove everything from the hitobject container\n        //we then need to destroy every object prior to the point we are skiping to so that it does not get rendered\n        //we then need to reset any object past the point we are skiping to so that if they have already been drawn it wont break things\n        //we then need to set the replay frame position to the correct point in time\n        //we then need to set the date_started time to be at a point where the calculations work as normal\n\n        t = parseInt(t);\n\n        var waspaused = this.paused;\n\n\n        this.smokeContainer.removeChildren(0);\n        this.paused = true; //pause game to prevent weird stuff from happening\n        osu.audio.music.pause();\n        osu.audio.music.set_position(t/1000);\n        //\n\n        //reset break screens / warning arrows\n        for(var i = 0; i< this.break_times.length; i++){\n                this.break_times[i].played = (t>this.break_times[i].t);\n        }\n        for(i = 0; i< this.warning_arrow_times.length; i++){\n            this.warning_arrow_times[i].played = (t>this.warning_arrow_times[i].t);\n        }\n\n        //reset score/combo\n\n        this.performance.totalHits = 0;\n        this.performance.h300 = 0;\n        this.performance.h100 = 0;\n        this.performance.h50 = 0;\n        this.performance.hMiss  = 0;\n        this.performance.combo  = 0;\n        this.performance.score  = 0;\n        this.performance.accuracy = 100;\n\n        var addScore = function (hitobject, performance) {\n            switch(hitobject.hitType){\n                case 'HIT_MISS':\n                    performance.addMiss();\n                    break;\n                case 'HIT_50':\n                    performance.add50();\n                    break;\n                case 'HIT_100':\n                    performance.add100();\n                    break;\n                case 'HIT_300':\n                    performance.add300();\n                    break;\n            }\n\n        };\n\n\n        //Reset Hitobjects\n\n        this.hit_object_container.removeChildren(0);\n        this.oldest_object_position = 0; //should sync it self back up\n        for(i = 0; i< this.hit_objects.length; i++){\n            var hitobject = this.hit_objects[i];\n            if(hitobject.is_circle){\n                if(hitobject.hitTime < t){\n                    hitobject.destroy();\n                    addScore(hitobject, this.performance)\n                }else{\n                    hitobject.reset();\n                }\n\n            }else{\n                if(hitobject.endTime < t){\n                    hitobject.destroy();\n                    if(hitobject.is_slider){\n                        addScore(hitobject, this.performance)\n                    }\n\n                }else{\n                    hitobject.reset();\n                }\n\n            }\n        }\n\n        //reset Replay frames\n        var curMapTime = parseInt(t);\n        if(this.skipTime>0) curMapTime += this.skipTime;\n        for(i=0; i < this.replay_data.length; i++){\n            var repT = this.replay_data[i].t - this.replayDiff;\n            if(curMapTime >= repT){\n\n                if(this.replay_data[i].x > 0 && this.replay_data[i].y > 0){\n                    i++;\n                    this.oldestReplayFrame =i;\n                }\n            }else{\n                break;\n            }\n        }\n\n        //reset keypresses\n\n        this.key_1_count = 0;\n        this.key_2_count = 0;\n        this.key_3_count = 0;\n        this.key_4_count = 0;\n        this.lasthit_id = -1;\n        this.currentKeyPress = 0;\n\n        for(i=0;  i<this.keyPresses.length; i++){\n            var keyPress = this.keyPresses[i];\n            if(keyPress.t <= curMapTime){\n                this.currentKeyPress = i;\n                if(keyPress.REPLAYHIT && this.lasthit_id != keyPress.ID){\n                    if(keyPress.K1){\n                        this.key_1_count++;\n                    }\n                    if(keyPress.K2){\n                        this.key_2_count++;\n                    }\n                    if(keyPress.M1){\n                        this.key_3_count++;\n                    }\n                    if(keyPress.M2){\n                        this.key_4_count++;\n                    }\n\n                    this.lasthit_id = keyPress.ID;\n                }\n\n\n            }\n            else{\n                break;\n            }\n\n\n        }\n        this.keypress_1_Text.text = (this.key_1_count > 0 && this.key_1_count.toString() || \"K1\");\n        this.keypress_2_Text.text = (this.key_2_count > 0 && this.key_2_count.toString() || \"K2\");\n        this.keypress_3_Text.text = (this.key_3_count > 0 && this.key_3_count.toString() || \"M1\");\n        this.keypress_4_Text.text = (this.key_4_count > 0 && this.key_4_count.toString() || \"M2\");\n\n\n        this.date_started = Date.now() - (t/ this.getPlayBackMulti());\n        this.curMapTime = t;\n\n\n\n\n        if(!waspaused){\n            this.paused = false;\n            osu.audio.music.play();\n        }\n\n\n\n    },\n    setPlayBackMulti: function (rate) {\n        if(rate <= 0) return; //dont allow 0 or less time as it will break everything;\n        var waspaused = this.paused;\n        this.paused = true;\n        var curTime = (Date.now() - this.date_started - this.paused_time);\n        var oldTime = curTime * this.getPlayBackMulti();\n        this.playbackMulti = rate;\n        var newTime = curTime * this.getPlayBackMulti();;\n\n        var difference = (oldTime - newTime)/this.getPlayBackMulti() || 0;\n\n        this.date_started = this.date_started - difference;\n\n        osu.audio.music.set_playback_speed(this.getPlayBackMulti());\n        this.paused = waspaused;\n    },\n\n    game_loop: function () {\n\n        if(!this.has_started && !this.countdown_started){\n            this.date_started = Date.now();\n        }\n\n\n        var curTime = (Date.now() - this.date_started - this.paused_time) * this.getPlayBackMulti();\n        if(!this.paused){\n            if(this.paused_time>0){\n                //Increase the date started time by the amount of time it has been paused for this should make everything remain insync\n                this.date_started += Date.now() - this.paused_time;\n                this.paused_time = 0;\n                curTime = (Date.now() - this.date_started - this.paused_time) * this.getPlayBackMulti();\n            }\n\n            this.render_replay_frame();\n            this.renderKeyPress();\n            if (!this.has_started && curTime > this.audioLeadIn && !this.finished) {\n                osu.audio.music.set_playback_speed(this.getPlayBackMulti());\n                osu.audio.music.start();\n                this.has_started = true;\n                this.date_started = Date.now();\n                curTime = (Date.now() - this.date_started - this.paused_time) * this.getPlayBackMulti();\n                if(this.starting_pos > 0){\n                    this.go_to(this.starting_pos);\n                }\n            } else {\n                this.countdown_started = true;\n                this.update_timer_percentage(curTime/this.audioLeadIn, osu.helpers.constants.TIMER_INTRO_COLOUR);\n            }\n\n            if (this.has_started) {\n\n                this.curMapTime = curTime;\n                this.paused_time = 0;\n                if (this.skipTime ==-1 || this.skipTime > -1 && this.skipTime < this.curMapTime) {\n                    this.skip_container.visible = false;\n                }else{\n                    this.update_timer_percentage(this.curMapTime/this.skipTime, osu.helpers.constants.TIMER_INTRO_COLOUR);\n                    this.skip_container.visible = true;\n                }\n                this.render_object();\n\n            }\n        }\n\n\n        if(!this.finished) window.requestAnimationFrame(this.game_loop.bind(this));\n\n    }\n\n\n};\n\r\n/**\n * osu_performance.js\n * Created by Ugrend on 23/07/2016.\n */\nvar osu = osu || {};\nosu.game = osu.game || {};\nosu.game.Perforamnce = class Performance{\n    //https://osu.ppy.sh/wiki/Score\n    //Score = Hit Value + Hit Value * (Combo multiplier * Difficulty multiplier * Mod multiplier) / 25\n    //Circle Size, HP Drain and Overall Difficulty are giving for each tick a \"diffculty point\";\n    // e.g. the maximum a map can give is 27 difficulty points with CS7, OD10 and HP10;\n    // the minimum a map can give is 2 difficulty points with CS2, OD0 and HP0. CS cannot normally go below 2 or above 7.\n    // Note that mods won't change the Difficulty multiplier. The original values are counting.\n    constructor(difficultyRating, modMulti, hpDrain){\n        this.combo = 0;\n        this.score = 0;\n        this.lifebar = 1;\n        this._difficultyRating = difficultyRating;\n        this._modMulti = modMulti;\n\n\n        this.totalHits = 0;\n        this.h300 = 0;\n        this.h100 =0;\n        this.h50 = 0;\n        this.hMiss  = 0;\n        this.accuracy = 100;\n    }\n\n    add300(){\n        this.h300++;\n        this.addPoints(300);\n\n    }\n    add100(){\n        this.h100++;\n        this.addPoints(100);\n\n    }\n    add50(){\n        this.h50++;\n        this.addPoints(50);\n\n    }\n    addMiss(){\n        this.hMiss++;\n        console.log('ayy');\n        this.resetCombo();\n    }\n\n    addPoints(p){\n        this.score += Math.round(p + p * (this.combo * this._difficultyRating * this._modMulti) / 25);\n        this.accuracy = osu.score.getAccuracy(this.h300,this.h100,this.h50,this.hMiss);\n        this.combo++;\n    }\n    resetCombo(){\n        if(this.combo > 10){\n            osu.audio.sound.play_sound(osu.audio.sound.COMBOBREAK);\n        }\n        this.combo = 0;\n        this.accuracy = osu.score.getAccuracy(this.h300,this.h100,this.h50,this.hMiss);\n    }\n\n\n};\r\n/**\n * scorescreen.js\n * Created by Ugrend on 4/06/2016.\n */\n\n\nvar osu = osu || {};\nosu.ui = osu.ui || {};\nosu.ui.interface = osu.ui.interface || {};\nosu.ui.interface.scorescreen = {\n    replayStarted: false,\n    background: \"\",\n    made_by: \"\",\n    played_by: \"\",\n    date_played: \"\",\n    total_score: 0,\n    t300Hits: 0,\n    t300gHits: 0,\n    t100Hits: 0,\n    t100kHits: 0,\n    t50Hits: 0,\n    tMissHits: 0,\n    maxCombo: 0,\n    accuracy: \"0.00\",\n    grade: \"\",\n    mods: [],\n    beatmap: {},\n    master_container: new PIXI.Container(),\n    loading: false,\n\n    getRenderWidth: function(){\n        return osu.ui.renderer.renderWidth;\n    },\n\n    getRenderHeight: function(){\n        return osu.ui.renderer.renderHeight;\n    },\n\n    map_details_heading_style : {\n\n        font:  Math.round((osu.ui.renderer.renderHeight + osu.ui.renderer.renderWidth)/100).toString() + 'px Lucida Sans Unicode',\n        fill: '#FFFFFF'\n    },\n\n    map_details_style: {\n        font: Math.round((osu.ui.renderer.renderHeight + osu.ui.renderer.renderWidth)/150).toString() +'px Lucida Sans Unicode',\n        fill: '#FFFFFF'\n    },\n\n    score_font_style: {\n        font: 'bold ' + Math.round((osu.ui.renderer.renderHeight + osu.ui.renderer.renderWidth)/36).toString() + 'px  Lucida Sans Unicode',\n        fill: '#FFFFFF'\n    },\n\n\n\n\n    create_background_container: function(){\n\n        this.beatmap.background = this.beatmap.background || \"\"; //prevent pixi breaking on undefined background\n        var background = PIXI.Texture.fromImage(this.beatmap.background);\n        var background_sprite = new PIXI.Sprite(background);\n        background_sprite.width = this.getRenderWidth();\n        background_sprite.height = this.getRenderHeight();\n        this.master_container.addChild(background_sprite);\n\n\n\n        var background_dimmer = new PIXI.Graphics();\n        background_dimmer.beginFill(0x0, 0.5);\n        background_dimmer.drawRect(0, 0, this.getRenderWidth(), this.getRenderHeight());\n\n        this.master_container.addChild(background_dimmer);\n\n\n    },\n\n    create_map_details_container: function(){\n        var map_details_area = new PIXI.Graphics();\n\n        map_details_area.beginFill(0x0,0.8);\n        map_details_area.drawRect(0, 0, this.getRenderWidth(), this.getRenderHeight() *.13);\n        map_details_area.lineStyle(this.getRenderHeight() *.006,0xE6E6E6,1);\n        map_details_area.drawRect(0,this.getRenderHeight() *.13,this.getRenderWidth(),1);\n\n        this.map_name_text = new PIXI.Text(this.beatmap.map_name, this.map_details_heading_style);\n        this.map_name_text.x = 5;\n        this.map_name_text.y = this.getRenderHeight() *0.01;\n\n        this.map_made_by = new PIXI.Text(\"Beatmap by \" + this.beatmap.author, this.map_details_style);\n        this.map_made_by.x = 5;\n        this.map_made_by.y = this.map_name_text.y + (this.getRenderHeight() * 0.04);\n\n        this.map_played_by = new PIXI.Text(\"Played by \"+ this.played_by  +\" on \" + this.date_played + \".\", this.map_details_style);\n        this.map_played_by.x = 5;\n        this.map_played_by.y = this.map_made_by.y + (this.getRenderHeight() * 0.03);\n\n        this.master_container.addChild(map_details_area);\n        this.master_container.addChild(this.map_name_text);\n        this.master_container.addChild(this.map_made_by);\n        this.master_container.addChild(this.map_played_by);\n    },\n\n    create_total_score_details_container: function () {\n        var scoreBox = new PIXI.Graphics();\n\n        scoreBox.beginFill(0x0,0.7);\n        scoreBox.lineStyle(5,0xFFFFFF,1);\n        scoreBox.drawRect(this.getRenderWidth() *.015, this.getRenderHeight() *.15, this.getRenderWidth() *.46, this.getRenderHeight() *.1);\n\n        var scoreLabel = new PIXI.Text(\"Score\", this.map_details_heading_style);\n        scoreLabel.x = this.getRenderWidth() *.02;\n        scoreLabel.y = this.getRenderHeight() *.215;\n\n        this.totalScoreText = new PIXI.Text(this.total_score.toString(),this.score_font_style);\n        this.totalScoreText.x = this.getRenderWidth() *.30;\n        this.totalScoreText.y = this.getRenderHeight() *.2;\n        this.totalScoreText.anchor.set(0.5);\n\n        this.master_container.addChild(scoreBox);\n        this.master_container.addChild(scoreLabel);\n        this.master_container.addChild(this.totalScoreText);\n    },\n\n    create_hit300_details_container: function () {\n        var scoreBox300 = new PIXI.Graphics();\n\n        scoreBox300.beginFill(0x0,0.7);\n        scoreBox300.lineStyle(5,0xFFFFFF,1);\n        scoreBox300.drawRect(this.getRenderWidth() *.015, this.getRenderHeight() *.3, this.getRenderWidth() *.46, this.getRenderHeight() *.1);\n\n        this.total300hitsText = new PIXI.Text(this.t300Hits.toString() + \"x\", this.score_font_style);\n        this.total300hitsText.x = this.getRenderWidth() *.16;\n        this.total300hitsText.y = this.getRenderHeight() *.35;\n        this.total300hitsText.anchor.set(0.5);\n\n        this.total300ghitsText = new PIXI.Text(this.t300gHits.toString() + \"x\", this.score_font_style);\n        this.total300ghitsText.x = this.getRenderWidth() *.39;\n        this.total300ghitsText.y = this.getRenderHeight() *.35;\n        this.total300ghitsText.anchor.set(0.5);\n\n\n        var hit300png = osu.skins.resources.hit300.texture;\n        var hit300gpng = osu.skins.resources.hit300g.texture;\n        var hit300Sprite = new PIXI.Sprite(hit300png);\n        var hit300gSprite = new PIXI.Sprite(hit300gpng);\n\n        hit300Sprite.position.x = this.getRenderWidth() *.05;\n        hit300Sprite.position.y = this.getRenderHeight() *.35;\n        hit300Sprite.width = this.getRenderWidth() *.05;\n        hit300Sprite.height = this.getRenderHeight() *.09;\n        hit300Sprite.anchor.set(0.5);\n\n        hit300gSprite.position.x = this.getRenderWidth() *.29;\n        hit300gSprite.position.y = this.getRenderHeight() *.35;\n        hit300gSprite.width = this.getRenderWidth() *.05;\n        hit300gSprite.height = this.getRenderHeight() *.09;\n        hit300gSprite.anchor.set(0.5);\n\n        this.master_container.addChild(scoreBox300);\n        this.master_container.addChild(this.total300hitsText);\n        this.master_container.addChild(this.total300ghitsText);\n        this.master_container.addChild(hit300Sprite);\n        this.master_container.addChild(hit300gSprite);\n    },\n\n    create_hit100_details_container: function () {\n        var scoreBox100 = new PIXI.Graphics();\n\n        scoreBox100.beginFill(0x0,0.7);\n        scoreBox100.lineStyle(5,0xFFFFFF,1);\n        scoreBox100.drawRect(this.getRenderWidth() *.015, this.getRenderHeight() *.43, this.getRenderWidth() *.46, this.getRenderHeight() *.1);\n\n        this.total100hitsText = new PIXI.Text(this.t100Hits.toString() + \"x\", this.score_font_style);\n        this.total100hitsText.x = this.getRenderWidth() *.16;\n        this.total100hitsText.y = this.getRenderHeight() *.48;\n        this.total100hitsText.anchor.set(0.5);\n\n        this.total100khitsText = new PIXI.Text(this.t100kHits.toString() + \"x\", this.score_font_style);\n        this.total100khitsText.x = this.getRenderWidth() *.39;\n        this.total100khitsText.y = this.getRenderHeight() *.48;\n        this.total100khitsText.anchor.set(0.5);\n\n\n        var hit100png = osu.skins.resources.hit100.texture;\n        var hit100kpng = osu.skins.resources.hit100k.texture;\n        var hit100Sprite = new PIXI.Sprite(hit100png);\n        var hit100kSprite = new PIXI.Sprite(hit100kpng);\n\n        hit100Sprite.position.x = this.getRenderWidth() *.05;\n        hit100Sprite.position.y = this.getRenderHeight() *.48;\n        hit100Sprite.width = this.getRenderWidth() *.05;\n        hit100Sprite.height = this.getRenderHeight() *.09;\n        hit100Sprite.anchor.set(0.5);\n\n        hit100kSprite.position.x = this.getRenderWidth() *.29;\n        hit100kSprite.position.y = this.getRenderHeight() *.48;\n        hit100kSprite.width = this.getRenderWidth() *.05;\n        hit100kSprite.height = this.getRenderHeight() *.09;\n        hit100kSprite.anchor.set(0.5);\n\n        this.master_container.addChild(scoreBox100);\n        this.master_container.addChild(this.total100hitsText);\n        this.master_container.addChild(this.total100khitsText);\n        this.master_container.addChild(hit100Sprite);\n        this.master_container.addChild(hit100kSprite);\n    },\n\n    create_hit50Misses_details_container: function () {\n        var container = new PIXI.Container();\n        var scoreBox50 = new PIXI.Graphics();\n\n        scoreBox50.beginFill(0x0,0.7);\n        scoreBox50.lineStyle(5,0xFFFFFF,1);\n        scoreBox50.drawRect(this.getRenderWidth() *.015, this.getRenderHeight() *.56, this.getRenderWidth() *.46, this.getRenderHeight() *.1);\n\n        this.total50hitsText = new PIXI.Text(this.t50Hits.toString() + \"x\", this.score_font_style);\n        this.total50hitsText.x = this.getRenderWidth() *.16;\n        this.total50hitsText.y = this.getRenderHeight() *.61;\n        this.total50hitsText.anchor.set(0.5);\n\n        this.totalMissesText = new PIXI.Text(this.tMissHits.toString() + \"x\", this.score_font_style);\n        this.totalMissesText.x = this.getRenderWidth() *.39;\n        this.totalMissesText.y = this.getRenderHeight() *.61;\n        this.totalMissesText.anchor.set(0.5);\n\n\n        var hit50png = osu.skins.resources.hit50.texture;\n        var hit0png = osu.skins.resources.hit0.texture;\n        var hit50Sprite = new PIXI.Sprite(hit50png);\n        var hit0Sprite = new PIXI.Sprite(hit0png);\n\n\n        hit50Sprite.position.x = this.getRenderWidth() *.05;\n        hit50Sprite.position.y = this.getRenderHeight() *.61;\n        hit50Sprite.width = this.getRenderWidth() *.05;\n        hit50Sprite.height = this.getRenderHeight() *.09;\n        hit50Sprite.anchor.set(0.5);\n\n        hit0Sprite.position.x = this.getRenderWidth() *.29;\n        hit0Sprite.position.y = this.getRenderHeight() *.61;\n        hit0Sprite.width = this.getRenderWidth() *.05;\n        hit0Sprite.height = this.getRenderHeight() *.09;\n        hit0Sprite.anchor.set(0.5);\n\n\n\n        this.master_container.addChild(scoreBox50);\n        this.master_container.addChild(this.total50hitsText);\n        this.master_container.addChild(this.totalMissesText);\n        this.master_container.addChild(hit50Sprite);\n        this.master_container.addChild(hit0Sprite);\n\n\n    },\n\n    create_combo_accuracy_details_container: function () {\n        var scoreBoxCombo = new PIXI.Graphics();\n\n        var maxComboLabel = new PIXI.Text(\"Max Combo\", this.map_details_heading_style);\n        maxComboLabel.x = this.getRenderWidth() *.02;\n        maxComboLabel.y = this.getRenderHeight() *.68;\n\n        var accuracyLabel = new PIXI.Text(\"Accuracy\", this.map_details_heading_style);\n        accuracyLabel.x = this.getRenderWidth() *.3;\n        accuracyLabel.y = this.getRenderHeight() *.68;\n\n\n        this.maxComboText = new PIXI.Text(this.maxCombo.toString() + \"x\", this.score_font_style);\n        this.maxComboText.x = this.getRenderWidth() *.02;\n        this.maxComboText.y = this.getRenderHeight() *.705;\n\n        this.accuracyText = new PIXI.Text(this.accuracy + \"%\", this.score_font_style);\n        this.accuracyText.x = this.getRenderWidth() *.27;\n        this.accuracyText.y = this.getRenderHeight() *.705;\n\n\n        scoreBoxCombo.beginFill(0x0,0.7);\n        scoreBoxCombo.lineStyle(5,0xFFFFFF,1);\n        scoreBoxCombo.drawRect(this.getRenderWidth() *.015, this.getRenderHeight() *.71, this.getRenderWidth() *.46, this.getRenderHeight() *.1);\n\n        this.master_container.addChild(maxComboLabel);\n        this.master_container.addChild(accuracyLabel);\n        this.master_container.addChild(scoreBoxCombo);\n        this.master_container.addChild(this.maxComboText);\n        this.master_container.addChild(this.accuracyText);\n\n    },\n\n    create_grade_details_container: function () {\n        var gradepng = osu.skins.resources[osu.score.GRADES[this.grade].large_icn].texture;\n        var gradeSprite = new PIXI.Sprite(gradepng);\n\n        gradeSprite.position.x = this.getRenderWidth() *.8;\n        gradeSprite.position.y = this.getRenderHeight() *.4;\n        gradeSprite.width = this.getRenderWidth() *.3;\n        gradeSprite.height = this.getRenderHeight() *.5;\n        gradeSprite.anchor.set(0.5);\n\n\n\n\n\n        var replaypng = osu.skins.resources.pause_replay.texture;\n        var replay_Sprite = new PIXI.Sprite(replaypng);\n        replay_Sprite.position.x = this.getRenderWidth() *.8;\n        replay_Sprite.position.y = this.getRenderHeight() *.8;\n        replay_Sprite.width = this.getRenderWidth() *.2;\n        replay_Sprite.height = this.getRenderHeight() *.2;\n        replay_Sprite.anchor.set(0.5);\n        replay_Sprite.interactive = true;\n        replay_Sprite.on(\"mouseup\", this.start_replay.bind(this));\n        replay_Sprite.on(\"touchend\", this.start_replay.bind(this));\n\n\n        var backFrames = [];\n\n\n        if(osu.skins.resources.menu_back_0){\n            for(var i = 0; i < 99; i++){\n                if(osu.skins.resources[\"menu_back_\"+i]){\n                    backFrames.push(osu.skins.resources[\"menu_back_\"+i].texture);\n                }else{\n                    break;\n                }\n            }\n        }else{\n            backFrames.push(osu.skins.resources.menu_back.texture);\n        }\n\n\n        var backAnimation = new PIXI.extras.MovieClip(backFrames);\n        backAnimation.position.x = this.getRenderWidth() *.05;\n        backAnimation.position.y = this.getRenderHeight() - 50;\n        backAnimation.interactive = true;\n        //backAnimation.width = this.getRenderWidth() *.2;\n        //backAnimation.height = this.getRenderHeight() *.2;\n        backAnimation.anchor.set(0.5,1);\n        backAnimation.on(\"mouseup\", this.exit.bind(this));\n        backAnimation.on(\"touchend\", this.exit.bind(this));\n        backAnimation.animationSpeed = 0.1;\n        backAnimation.play();\n\n        this.master_container.addChild(gradeSprite);\n        for(i = 0; i < this.mods.length ; i++ ){\n            if(this.mods[i].icon != \"\"){\n                var modpng = osu.skins.resources[this.mods[i].icon].texture;\n                var modSprite = new PIXI.Sprite(modpng);\n                modSprite.position.y = this.getRenderHeight() *.7;\n                modSprite.position.x = (this.getRenderWidth() *.9) - (i*50);\n                modSprite.anchor.set(0.5);\n                this.master_container.addChild(modSprite);\n            }\n        }\n\n        this.master_container.addChild(replay_Sprite);\n        this.master_container.addChild(backAnimation);\n\n    },\n    exit: function () {\n        osu.audio.sound.play_sound(osu.audio.sound.MENUBACK);\n        osu.ui.interface.mainscreen.show_main_screen();\n    },\n\n    start_replay: function(){\n        var self = this;\n\n        if(replay.type != \"0\"){\n            new PNotify({\n                title: 'Game mode unsupported',\n                text: \"Currently only osu! game mode is supported :(\",\n                type: 'error'\n            });\n            return;\n        }\n\n        var params = getParams();\n        if('t' in params){\n            var time = 0;\n            var hourRegex = /([0-9]+)h/g;\n            var minRegex = /([0-9]+)m/g;\n            var secRegex = /([0-9]+)s/g;\n            var hourMatch = hourRegex.exec(params.t);\n            var minMatch = minRegex.exec(params.t);\n            var secMatch = secRegex.exec(params.t);\n            if(hourMatch && hourMatch[1]){\n                time += hourMatch[1] * 3600000;\n            }\n            if(hourMatch && hourMatch[1]){\n                time += hourMatch[1] * 3600000;\n            }\n            if(minMatch && minMatch[1]){\n                time += minMatch[1] * 60000;\n            }\n            if(secMatch && secMatch[1]){\n                time += secMatch[1] * 1000;\n            }\n            osu.ui.interface.osugame.starting_pos = time;\n        }\n\n        if(!osu.audio.music.loaded()){\n            setTimeout(function () {\n                if(!self.loading){\n\n                    osu.audio.sound.play_sound(osu.audio.sound.MENUHIT);\n                    self.loading = new PNotify({\n                        title: 'Loading song',\n                        type: 'info',\n                        hide: false\n                    });\n                }\n                self.start_replay();\n\n            },1000);\n            return;\n        }\n        if(self.loading){\n\n            self.loading.remove()\n        }else{\n            osu.audio.sound.play_sound(osu.audio.sound.MENUHIT);\n        }\n\n        if(this.replayStarted) return; // prevent multi clicks\n        this.replayStarted = true;\n        setTimeout(function () {\n            //ghetto fix to play menu sound\n            osu.audio.music.preview_screen = false;\n\n            osu.ui.interface.osugame.replay_data = replay.replayData;\n            osu.ui.interface.osugame.beatmap = self.beatmap;\n            osu.ui.interface.osugame.mods = self.mods;\n            osu.ui.interface.osugame.replay_played_by_text = \"REPLAY MODE - Watching \" + replay.playerName + \" play \" + self.beatmap.map_name;\n            osu.ui.interface.osugame.initGame();\n            osu.audio.music.stop();\n            osu.ui.interface.osugame.game_loop();\n        },2000);\n\n    },\n\n\n    create_master_container: function () {\n        this.master_container.removeChildren();\n        this.create_background_container();\n        this.create_map_details_container();\n        this.create_total_score_details_container();\n        this.create_hit300_details_container();\n        this.create_hit100_details_container();\n        this.create_hit50Misses_details_container();\n        this.create_combo_accuracy_details_container();\n        this.create_grade_details_container();\n\n    },\n\n    onRender: function(){\n\n    },\n\n    renderScoreScreen: function(){\n        osu.ui.interface.replaycontroller.bindEvents();\n        osu.ui.interface.replaycontroller.showPlayIcon();\n        osu.ui.interface.replaycontroller.set_position(0);\n        osu.ui.interface.replaycontroller.set_duration(this.beatmap.map_data.time_length+2000);\n        osu.ui.interface.replaycontroller.disable_progressbar();\n        osu.ui.interface.replaycontroller.showBar();\n        this.$footer = osu.ui.interface.mainscreen.$footer || $(\"#footer\");\n        this.$footer.attr('style','');\n        this.$footer.css('display', 'none');\n        this.replayStarted = false;\n        osu.ui.renderer.fixed_aspect = false;\n        osu.ui.renderer.start();\n        this.create_master_container();\n        osu.ui.renderer.clearStage();\n        osu.ui.renderer.addChild(this.master_container);\n        var $replayURL = $(\"#replay_url\");\n        $replayURL.val(\"\");\n        var paramURL = \"\";\n        var params = getParams();\n\n        var autoplay = false;\n\n\n        if('ap' in params){\n            if(params.ap == \"1\" || params.ap == \"t\"){\n                autoplay = true;\n            }\n        }\n\n        for(var k in params){\n            if(params.hasOwnProperty(k)){\n                if(k != \"r\" && k != 'ap'){\n                    paramURL += \"&\"+k+ '=' + params[k];\n                }\n            }\n        }\n        $.ajax({\n            url : APIURL + \"replays\",\n            type: 'GET',\n            data: {'replay_id': replay.b64md5sum, 'validate_only':true},\n            dataType: 'json',\n            success: function (data) {\n                if(data){\n                    if(data.status  != \"error\"){\n                       $replayURL.val(window.location.href.split('?')[0] + \"?r=\" + data + paramURL);window.history.pushState(data, 'osu Replays', '?r='+data + paramURL);\n                    }\n\n                }\n\n            }\n        });\n\n        osu.audio.music.init(this.beatmap.song, this.beatmap.song_md5sum);\n        osu.audio.music.preview_screen = true;\n        if(osu.audio.music.__audio && osu.audio.music.__audio.readyState != 4 && (osu.audio.music.__audio.src != \"\" || !osu.audio.music.__audio.error)){\n            //if it is external we want to reset the position to 0 so it doesnt break bufffering\n            osu.audio.music.set_position(0);\n            osu.audio.music.preview_screen = false;\n        }\n\n\n        osu.audio.music.preview_time = this.beatmap.map_data.general.PreviewTime / 1000;\n        osu.audio.music.start();\n        document.getElementById(\"replay_url_area\").className = \"\";\n        document.getElementById(\"open_config_button_other\").className = \"\";\n        document.getElementById(\"playback_ratio_area\").className = \"col-lg-1\";\n            if(autoplay){\n                this.start_replay();\n            }\n    }\n\n};\r\n/**\n *\n *\n * Created by Ugrend on 6/08/2016.\n */\n\nosu = osu || {};\nosu.webapi = osu.webapi || {};\nosu.webapi.audio = {\n    findAudio: function (beatmap, callback, checkedLocal, checkLocalStatus) {\n\n        var songFound = false;\n        if(!osu.settings.SETTINGS.asset_server && !osu.settings.SETTINGS.song_url){\n            callback(beatmap);\n        }\n\n        if(!checkedLocal && osu.settings.SETTINGS.asset_server){\n            var a = new Audio();\n            var song = osu.settings.SETTINGS.asset_server +\"/\" + beatmap.song_md5sum;\n            a.src = song;\n            a.onloadedmetadata = function () {\n                osu.webapi.audio.findAudio(beatmap, callback, true, true);\n            };\n            a.onerror = function () {\n                osu.webapi.audio.findAudio(beatmap, callback, true,false);\n            } ;\n            return;\n        }\n\n        if(checkedLocal){\n            if(checkLocalStatus){\n                songFound = true;\n                beatmap.song = osu.settings.SETTINGS.asset_server +\"/\" + beatmap.song_md5sum;\n                callback(beatmap);\n            }\n        }\n\n\n        if(osu.settings.SETTINGS.song_url && (!(osu.settings.SETTINGS.asset_server && checkedLocal && songFound))){\n            if(beatmap.__beatmap.beatmapid){\n                beatmap.song = osu.settings.SETTINGS.song_url+ \"/\" +beatmap.__beatmap.beatmapid;\n                callback(beatmap);\n            }\n            else{\n                $.ajax({\n                    url: APIURL + \"beatmaps\",\n                    type: 'GET',\n                    data: {bmhash: beatmap.md5sum, validate_only: true},\n                    dataType: 'json',\n                    success: function (data) {\n                        if (data) {\n                            var beatmap_id = data.data.beatmap_id;\n                            beatmap.song = osu.settings.SETTINGS.song_url+ \"/\" +beatmap_id;\n                            callback(beatmap);\n                        }\n                    },\n                    error: function () {\n                        callback(beatmap);\n                    }\n                });\n            }\n\n\n        }\n\n        if(!osu.settings.SETTINGS.song_url && !songFound){\n            callback(beatmap);\n        }\n\n    }\n\n\n\n};\n\n\r\n/**\n * webapi/beatmaps.js\n * Created by Ugrend on 4/08/2016.\n */\n\nosu = osu || {};\nosu.webapi = osu.webapi || {};\nosu.webapi.beatmaps = {\n\n    /*\n     upload beatmap object to server\n     */\n    uploadBeatMap: function (beatmap) {\n\n        var beatmapFile = beatmap.data;\n        var assets = beatmap.files;\n        var beatmapMD5 = beatmap.md5sum;\n\n        $.ajax({\n            url: APIURL + \"beatmaps\",\n            type: 'GET',\n            data: {id: beatmapMD5, validate_only: true},\n            dataType: 'json',\n            success: function (data) {\n                //only upload beatmap if server doesnt have it else just update assets\n                if (data) {\n                    //TODO PUT\n\n                } else {\n                    $.ajax({\n                        url: APIURL + \"beatmaps\",\n                        type: 'POST',\n                        data: {beatmap: beatmapFile, assets: JSON.stringify(assets)},\n                        dataType: 'json',\n                        success: function (data) {\n\n                        }\n                    });\n                }\n\n            }\n        });\n\n    },\n\n    loadBeatMap: function (id, callback) {\n        $.ajax({\n            url: APIURL + \"beatmaps\",\n            type: 'GET',\n            data: {bmhash: id},\n            dataType: 'json',\n            success: function (data) {\n\n                if(data.status == \"error\"){\n                    callback(false);\n                    return;\n                }\n                var beatmap = {};\n\n                //TODO: rewrite parser so im not duplicating code here\n                beatmap.parsed = parse_osu_map_data(data.data.beatmap);\n                var difficultyCalc = new osu.beatmaps.DifficultyCalculator(beatmap.parsed);\n                beatmap.stars = difficultyCalc.calculate();\n                for (var k in beatmap.parsed.metadata) {\n                    beatmap[k.toLocaleLowerCase()] = beatmap.parsed.metadata[k];\n                }\n                var background_file_name = beatmap.parsed.events[0][2].replace(/\"/g, '');\n                beatmap.files = data.data.assets;\n                for (var i = 0; i < beatmap.files.length; i++) {\n                    if(beatmap.files[i].filename == background_file_name){\n                        beatmap.background = beatmap.files[i].md5sum;\n                    }\n                    if(beatmap.files[i].filename == beatmap.parsed.general.AudioFilename){\n                        beatmap.song = beatmap.files[i].md5sum;\n                    }\n                }\n                beatmap.thumbnail = \"NOT_CALCULATED\";\n                beatmap.md5sum = id;\n                database.insert_data(database.TABLES.BEATMAPS, beatmap.md5sum, beatmap, function () {\n                    //when calling for a map the server does not have, the server will first find the osu file over other files for the client\n                    //It will give us a task id which we can watch to see if we have got the assets\n                    //Once the task is done we can then update the map with the correct assets\n\n                    if(!data.data.assets.length && data.data.task_id){\n                        osu.webapi.tasks.checkForMapAssets(beatmap.md5sum,  data.data.task_id)\n                    }\n\n\n                    callback(true);\n                }, function () {\n                    callback(true);\n                });\n            }\n        })\n    }\n\n\n};\r\n/**\n * webapi/replays.js\n * Created by Ugrend on 4/08/2016.\n */\n\nosu = osu || {};\nosu.webapi = osu.webapi || {};\nosu.webapi.replays = {\n    \n    uploadReplay: function (file,base64md5) {\n        var formData = new FormData();\n        formData.append('replay', file);\n        // We don't want to upload the replay if its already there, so we will check first before uploading.\n        $.ajax({\n            url : APIURL + \"replays\",\n            type: 'GET',\n            data: {'replay_id': base64md5,'validate_only':true},\n            dataType: 'json',\n            success: function (data) {\n                if(!data){\n                    $.ajax({\n                        url : APIURL + \"replays\",\n                        type : 'POST',\n                        data : formData,\n                        processData: false,  // tell jQuery not to process the data\n                        contentType: false,  // tell jQuery not to set contentType\n                        success : function(data) {\n\n                        }\n                    });\n                }\n            }\n        })\n\n\n    },\n\n    loadReplay: function(id){\n\n\n        $.ajax({\n            url : APIURL + \"replays\",\n            type : 'GET',\n            data : {'replay_id': id},\n            dataType: 'json',\n            success : function(data) {\n                if(data.status == \"success\"){\n                    ReplayParser(base64ToUint8Array(data.data), function (replay_data) {\n                        replay = replay_data; //TODO: not be essentially global\n                        loadBeatMap();\n                    });\n                }else{\n                    new PNotify({\n                        title: 'Replay not found',\n                        text: data.msg,\n                        type: 'error'\n                    });\n\n                }\n\n            }\n        });\n    }\n    \n    \n};\r\n/**\n * webapi/tasks\n * Created by Ugrend on 13/12/2016.\n */\n\nosu = osu || {};\nosu.webapi = osu.webapi || {};\nosu.webapi.tasks = {\n\n    _joinAssetsToMap: function(map,assets){\n        //dont add if already there\n        for(var i = 0; i < assets.length; i++){\n            for(var j =0; j< map.files.length ; j++){\n                if(assets[i]['filename'] == map.files[j]['filename']){\n                    assets.splice(i,1);\n                }\n            }\n        }\n        for(i =0 ; i< assets.length; i++ ){\n            map.files.push(assets[i]);\n        }\n\n        if(!map.song){\n            var filename = map.parsed.general.AudioFilename;\n            var trustedFile = false;\n            for(i = 0; i< map.files.length ; i++){\n                if(filename == map.files[i]['filename']){\n                    if(map.files[i]['trusted']){\n                        trustedFile = i;\n                    }\n                    map.song = map.files[i]['md5sum']\n                }\n            }\n            if(trustedFile === 0 || trustedFile){\n                map.song = map.files[trustedFile]['md5sum']\n            }\n        }\n        if(!map.background){\n            filename = map.parsed.events[0][2].replace(/\"/g, '');\n            trustedFile = false;\n            for(i = 0; i< map.files.length ; i++){\n                if(filename == map.files[i]['filename']){\n                    if(map.files[i]['trusted']){\n                        trustedFile = i;\n                    }\n                    map.background = map.files[i]['md5sum']\n                }\n            }\n            if(trustedFile === 0 || trustedFile){\n                map.background = map.files[trustedFile]['md5sum']\n            }\n        }\n    },\n\n    checkForMapAssets: function (map_hash, task_id, attempt) {\n        if(!attempt){\n            attempt = 0;\n        }\n        attempt++;\n\n        if(task_id){\n            $.ajax({\n                url: APIURL + \"tasks\",\n                type: 'GET',\n                data: {task_id: task_id},\n                dataType: 'json',\n                success: function (data) {\n                    if(data.data.state == \"SUCCESS\"){\n                        database.get_data(database.TABLES.BEATMAPS,map_hash, function (d) {\n                            var map = d.data;\n                            var assets = data.data.result;\n                            osu.webapi.tasks._joinAssetsToMap(map, assets);\n                            database.update_data(database.TABLES.BEATMAPS,map_hash,map)\n                        });\n\n\n\n                    }else if(data.data.state == \"PENDING\"){\n                        //only try this 10times as if somehow we get wrong task id the task will always be in pending\n                        if(attempt < 10){\n                            //try again later\n                            setTimeout(function () {\n                                osu.webapi.tasks.checkForMapAssets(map_hash,task_id,attempt)\n                            },60000)\n                        }\n                    }\n                }\n            });\n\n\n        }else{\n            //TODO: we are just checking for assets for map\n\n            $.ajax({\n                type: 'GET',\n                data: {'bmhash': map_hash, 'assets_only': true},\n                dataType: 'json',\n                success: function (data) {\n                    if(data.status == 'success'){\n                        if(data.data.assets && data.data.assets.length){\n                            database.get_data(database.TABLES.BEATMAPS,map_hash, function (d) {\n                                var map = d.data;\n                                var assets = data.data.assets;\n                                osu.webapi.tasks._joinAssetsToMap(map, assets);\n                                database.update_data(database.TABLES.BEATMAPS,map_hash,map)\n                            });\n\n\n                        }\n                    }\n                }\n            })\n        }\n    }\n\n};\r\n/**\n * launcher.js\n * Created by Ugrend on 22/06/2016.\n */\n\nif (!window.indexedDB) {\n    console.log(\"no index db = no storage \")\n}\nelse {\n    database.init(function () {\n        osu.settings.onloaded = function () {\n            osu.skins.init();\n\n            osu.skins.onloaded = function () {\n                osu.ui.interface.mainscreen.init();\n            };\n\n\n        };\n        osu.settings.init();\n    });\n}\n"]}