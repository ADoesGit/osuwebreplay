<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="static/css/osureplay.css" rel="stylesheet" type="text/css"/>
    <link rel="stylesheet" href="static/libs/css/bootstrap.css">
    <link href="static/libs/css/pnotify.css" rel="stylesheet" type="text/css"/>
    <link rel="stylesheet" href="static/libs/css/jquery-ui.css">
    <title>osu Replays</title>
</head>
<body>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/3.0.11/pixi.min.js"></script>
<script src="static/libs/js/zip.js"></script>
<script src="static/libs/js/md5.js"></script>

<script id="replay_select_template" type="text/template">
    {{#replays}}
    <div class="row">
        <div class="replay_preview" id="{{rMd5Hash}}">
            <div class="row ">
                <div class="replay_data">
                    <span><img class="replay_avatar" height="64" width="64" src="{{avatar_img}}"></span>
                    <span><img height="64" width="auto" src="{{grade_img}}"></span>
                            <span class="replay_details">
                                <span class="replay_player_name">{{playerName}}</span>
                                <br/>
                                <span class="replay_score">Score: {{tScore}} ({{tCombo}}X)</span>
                            </span>

                        <span class="replay_mods">{{#mods}}{{code}} {{/mods}}<br/>
                            <span class="replay_accuracy">{{accuracy}}%</span>
                        </span>

                </div>

            </div>

        </div>

    </div>
    {{/replays}}
</script>

<script id="beatmap_select_template" type="text/template">
    {{#beatmaps}}
    <div class="col-xs-offset-5 col-xs-7 beatmap_preview" id="{{md5sum}}">
        <div class="row song_preview_row song_preview_unselected">
            <img src="{{thumbnail_data}}">
            <span class="song_details">
                <span class="song_name">{{#titleunicode}}{{titleunicode}} ( {{title}} ) {{/titleunicode}}{{^titleunicode}}{{title}}{{/titleunicode}}</span>
                <br>
                <span class="song_author">{{#artistunicode}}{{artistunicode}} ( {{artist}} ){{/artistunicode}}{{^artistunicode}}{{artist}}{{/artistunicode}} // {{creator}}</span>
                <br>
                <span class="song_version">{{version}}</span>
                <br>
                <span class="song_stars">
                    {{#display_stars}}
                        <img height="{{h}}" width="{{w}}" src="{{star_img}}">
                    {{/display_stars}}
                </span>
            </span>
        </div>
    </div>
    {{/beatmaps}}

</script>
<div id="loading">loading...</div>
<div class="hidden" id="no_beatmaps_replays"><p class="h3">Drag in some beatmaps and replays to begin!</p></div>

<div id="container" class="hidden">
    <div id="render_zone"></div>
    <div id="main_menu">
        <div id="title_and_search" class="row search">

            <div class="col-xs-8" id="map_name">
                DEFAULT_SONG_NAME
            </div>
            <div class="col-xs-4">
                <input id="filter_maps_search" type="text" class="form-control" placeholder="Search for beatmap here!"
                       autofocus>
            </div>
        </div>


        <div id="details_replay_search" class="col-xs-5 remove_padding">
            <div class="map_details">
                <div id="mapped_by">Mapped by DATBOI</div>
                <div id="map_length_and_objects">Length: 13:37 BPM: 240 Objects: 2000</div>
                <div id="map_object_type_counts">Circles: 2000 Sliders: 378 Spinners 5</div>
                <div id="map_difficulty">CS:10 AR:10 OD:10 HP:10 Stars:12</div>
            </div>
            <div class="col-xs-8">
                <input id="filter_players_search" type="text" class="form-control" placeholder="Filter Players!">
            </div>


            <div id="replay_select_area" class="replay_area col-xs-8">
                <!--- Replay data goes here --->
            </div>
        </div>


        <div id="song_selection_area">
            <!-- beatmap data goes here -->
        </div>
    </div>
    <div id="footer">
        <div class="col-xs-3">
            <label for="background_dim">Background Dim</label>
            <input type="range" id="background_dim" value="90">

        </div>
        <div class="col-lg-1">
            <label></label>
            <button type="button" id="show_asset_config" class="btn" data-toggle="modal" data-target="#asset_server_config_model">
               Configure Asset Servers
            </button>
        </div>

        <div class="col-xs-2 text-right">
            <div><label for="master_volume">Master Volume</label></div>
            <div><label for="music_volume">Music Volume</label></div>
            <div><label for="sound_volume">Sound Volume</label></div>
        </div>


        <div class="col-xs-1 remove_padding">
            <input type="range" class="" id="master_volume" value="80">
            <input type="range" id="music_volume" value="90">
            <input type="range" id="sound_volume" value="50">
        </div>
        <div class="col-xs-2 ">
            <div id="replay_url_area">
                <label for="replay_url">Replay Url:</label>
                <input id="replay_url" type="text" class="form-control" readonly/>
            </div>



            <div id="skin_settings">
                <label for="use_beatmap_skin">Use beatmap Skins</label>
                <input id="use_beatmap_skin" type="checkbox">

                <label for="use_beatmap_hitsounds">Use beatmap hitsounds</label>
                <input id="use_beatmap_hitsounds" type="checkbox">
            </div>

        </div>

        <div class="col-lg-2">
            <div id="skin_select_field">
                <label for="skin_select">Select Skin</label>
                <select id="skin_select" class="form-control">
                    <option>Default</option>

                </select>
            </div>
        </div>
        <div class="col-xs-1 ">
            <a target="_blank" class="pull-right" href="https://github.com/Ugrend/mmmyeh"><img src="data/GitHub-Mark-Light-64px.png"></a>
        </div>


    </div>
</div>

<div class="modal fade" id="asset_server_config_model" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Asset Server Configuration</h4>
            </div>
            <div class="modal-body">
                <p>As I do not wish to have any issues with copyright, by default this website will not provide any song data for the Replays.</p>
                <p>However you can add servers here where it can find song data for the replays.</p>
                <p>Alternatively you can also just drag in the song or osz file into the browser which will make it available at all times</p>
                <br>
                <br>
                <p>The order that assets will attempt to load in are</p>
                <b>Local -> Asset Server -> Beatmap Loader</b>

                <br>
                <br>
                <p>Asset server will take a param of id which will be the base64 (with MIME type) md5sum of the file.</p>
                <p>You can run your own (that only this PC can access) by running <a href="">this</a></p>
                <p>This program will run a small webserver that will give access to the osu! Song directory</p>
                <p><b>Note: This could be considered poor security practice, it could grant any website the ability to load assets from the osu! song dir. Run at own Risk</b></p>
                <b>Example:</b>
                <p><b>1716e0722fe2c502646fa041fae6593f</b> might be a md5 hash of freedmon dive</p>
                <p><b>http://localhost:17361/1716e0722fe2c502646fa041fae6593f</b> should return the song for freedom dive</p>

                <label for="asset_server_url">Asset Server URL:</label>
                <input id="asset_server_url" class="form-control" type="text">
                <br>
                <p>Beatmap loader URL will take the param of the osu! beatmap id and return the song for the map</p>
                <b>Example:</b>
                <p><b>129891</b> is the beatmap id for FREEDOM DiVE (4D)</p>
                <b>eg: http://urlforbeatmaps.com/osu/a/</b>
                <p>The url should be able to take a param of that ID and it should return the song for the map</p>
                <p>In this case <b>http://urlforbeatmaps/a/129891</b> should return the song for freedom dive</p>
                <label for="song_server_url">Beatmap Loader URL:</label>
                <input id="song_server_url" class="form-control" type="text">

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button id="save_asset_servers_btn"type="button" class="btn btn-primary" data-dismiss="modal">Save changes</button>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript" src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
<script type="text/javascript" src="static/libs/js/jquery-ui.js"></script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/typeahead.js/0.11.1/typeahead.bundle.min.js"></script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/2.2.1/mustache.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="static/libs/js/pnotify.js"></script>
<script src="static/libs/js/lzma.js"></script>
<script src="static/libs/js/bezier.js"></script>
<script src="static/js/osureplay.js"></script>

<h4 style="position: absolute; top: 0; left: 0; border: 0; color: red" ><br><b>ALPHA BUILD- Things may be broken or incomplete!</b></h4>
</body>
</html>